# =============================================================================
# SUPABASE SERVICE CONFIGURATION TEMPLATE
# =============================================================================
# Comprehensive configuration template for Supabase integration.
# Copy this file to services/.env and configure according to your environment.
#
# SUPABASE DOCUMENTATION: https://supabase.com/docs
# SUPABASE DASHBOARD: https://supabase.com/dashboard
#
# SECURITY CLASSIFICATION:
# [SENSITIVE] - Contains secrets, must be secured and never committed
# [CONFIG] - Configuration values, can be committed with review
# [SUPABASE] - Supabase-specific configuration
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE PROJECT CONFIGURATION
# -----------------------------------------------------------------------------
# [SENSITIVE] Supabase Project URL
# Get from: Project Settings → API → Project URL
SUPABASE_URL=https://cjjfegvtqvkcplvakpnk.supabase.co

# [SENSITIVE] Supabase Anon (Public) Key
# Get from: Project Settings → API → anon public key
# Safe to expose in frontend applications
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTQ2NjAsImV4cCI6MjA3ODg3MDY2MH0.G3igL_Gb3PamvZOo0ZjalMdz-BCIWk3fGs0WtCzTG9o

# [SENSITIVE] Supabase Service Role Key
# Get from: Project Settings → API → service_role secret key
# NEVER expose this in frontend applications - backend only
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzI5NDY2MCwiZXhwIjoyMDc4ODcwNjYwfQ.RWB5ZapGyqaTpLjsyMJxlOfaPUp2VSgtDhwCCbLq0Jo

# [SENSITIVE] Supabase JWT Secret
# Get from: Project Settings → API → JWT Secret
# Used for validating JWT tokens
SUPABASE_JWT_SECRET=EbURa+uKcP/dcmXoKNNiqu1w7DEQwKmu6W3HQT0xN+YG3+oRMonzcrnra5MfVB5BVRgbP9dRwSLSimxu4QuvbA==

# -----------------------------------------------------------------------------
# SUPABASE CONNECTION SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Database connection pool size
SUPABASE_POOL_SIZE=10

# [CONFIG] Connection timeout in milliseconds
SUPABASE_TIMEOUT=30000

# [CONFIG] Number of retry attempts for failed connections
SUPABASE_RETRY_ATTEMPTS=3

# [CONFIG] Retry delay in milliseconds
SUPABASE_RETRY_DELAY=1000

# [CONFIG] Enable connection logging
SUPABASE_LOGGING_ENABLED=false

# [CONFIG] Log level for Supabase operations
SUPABASE_LOG_LEVEL=error

# -----------------------------------------------------------------------------
# SUPABASE RATE LIMITING
# -----------------------------------------------------------------------------
# [CONFIG] Rate limit requests per window
SUPABASE_RATE_LIMIT_REQUESTS=1000

# [CONFIG] Rate limit window in milliseconds (15 minutes)
SUPABASE_RATE_LIMIT_WINDOW_MS=900000

# [CONFIG] Enable rate limiting
SUPABASE_RATE_LIMITING_ENABLED=true

# -----------------------------------------------------------------------------
# SUPABASE AUTHENTICATION SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] JWT token expiry time
SUPABASE_JWT_EXPIRY=3600

# [CONFIG] Refresh token expiry time (in seconds, default 30 days)
SUPABASE_REFRESH_TOKEN_EXPIRY=2592000

# [CONFIG] Enable email confirmations
SUPABASE_EMAIL_CONFIRMATION_ENABLED=true

# [CONFIG] Enable phone confirmations
SUPABASE_PHONE_CONFIRMATION_ENABLED=false

# [CONFIG] Enable anonymous sign-ins
SUPABASE_ANONYMOUS_SIGN_INS_ENABLED=false

# [CONFIG] Enable email sign-ups
SUPABASE_EMAIL_SIGN_UPS_ENABLED=true

# -----------------------------------------------------------------------------
# SUPABASE RLS (ROW LEVEL SECURITY) SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Enable Row Level Security
SUPABASE_RLS_ENABLED=true

# [CONFIG] Default RLS policy
SUPABASE_RLS_DEFAULT_POLICY=ALLOW

# [CONFIG] Enable RLS on new tables by default
SUPABASE_RLS_DEFAULT_FOR_NEW_TABLES_ENABLED=false

# -----------------------------------------------------------------------------
# SUPABASE STORAGE SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Storage bucket name
SUPABASE_STORAGE_BUCKET=avatars

# [CONFIG] Storage file size limit (in bytes, default 50MB)
SUPABASE_STORAGE_FILE_SIZE_LIMIT=52428800

# [CONFIG] Allowed file types for storage
SUPABASE_STORAGE_ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif

# [CONFIG] Enable public access to storage
SUPABASE_STORAGE_PUBLIC_ENABLED=false

# -----------------------------------------------------------------------------
# SUPABASE REAL-TIME SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Enable real-time subscriptions
SUPABASE_REALTIME_ENABLED=true

# [CONFIG] Real-time connection timeout
SUPABASE_REALTIME_TIMEOUT=10000

# [CONFIG] Maximum concurrent real-time connections
SUPABASE_REALTIME_MAX_CONNECTIONS=100

# -----------------------------------------------------------------------------
# SUPABASE BACKUP AND RECOVERY
# -----------------------------------------------------------------------------
# [CONFIG] Enable automatic backups
SUPABASE_BACKUP_ENABLED=true

# [CONFIG] Backup retention in days
SUPABASE_BACKUP_RETENTION_DAYS=7

# [CONFIG] Backup schedule (cron format)
SUPABASE_BACKUP_SCHEDULE=0 2 * * *

# -----------------------------------------------------------------------------
# SUPABASE MONITORING AND ANALYTICS
# -----------------------------------------------------------------------------
# [CONFIG] Enable query performance tracking
SUPABASE_PERFORMANCE_TRACKING_ENABLED=true

# [CONFIG] Enable database metrics
SUPABASE_METRICS_ENABLED=true

# [CONFIG] Metrics retention period in days
SUPABASE_METRICS_RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# SUPABASE WEBHOOK CONFIGURATION
# -----------------------------------------------------------------------------
# [SENSITIVE] Webhook endpoint URL for database changes
SUPABASE_WEBHOOK_URL=https://your-webhook-endpoint.com/supabase

# [SENSITIVE] Webhook secret for signature verification
SUPABASE_WEBHOOK_SECRET=your-webhook-signing-secret

# [CONFIG] Enable database change webhooks
SUPABASE_WEBHOOKS_ENABLED=true

# [CONFIG] Webhook events to trigger
SUPABASE_WEBHOOK_EVENTS=INSERT,UPDATE,DELETE

# -----------------------------------------------------------------------------
# SUPABASE REGIONAL SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Supabase project region
# Available regions: us-east-1, us-west-1, eu-west-1, ap-southeast-1
SUPABASE_REGION=us-east-1

# [CONFIG] Database timezone
SUPABASE_DATABASE_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# SUPABASE ADVANCED SETTINGS
# -----------------------------------------------------------------------------
# [CONFIG] Database connection string (alternative to individual params)
# Format: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT].supabase.co:5432/postgres

# [CONFIG] Database migration settings
SUPABASE_MIGRATION_ENABLED=true
SUPABASE_MIGRATION_AUTO_RUN=true

# [CONFIG] Enable database extensions
SUPABASE_EXTENSIONS_ENABLED=true
SUPABASE_EXTENSIONS=pgcrypto,uuid-ossp

# -----------------------------------------------------------------------------
# SUPABASE LOCAL DEVELOPMENT SETTINGS
# -----------------------------------------------------------------------------
# [LOCAL] Local Supabase configuration
# Use these settings when running Supabase locally with Docker

# [LOCAL] Local Supabase URL
SUPABASE_LOCAL_URL=http://localhost:54321

# [LOCAL] Local Supabase Studio URL
SUPABASE_LOCAL_STUDIO_URL=http://localhost:54323

# [LOCAL] Local database URL
SUPABASE_LOCAL_DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# [LOCAL] Local API URL
SUPABASE_LOCAL_API_URL=http://localhost:54321/rest/v1

# [LOCAL] Local auth URL
SUPABASE_LOCAL_AUTH_URL=http://localhost:54321/auth/v1

# [LOCAL] Local storage URL
SUPABASE_LOCAL_STORAGE_URL=http://localhost:54321/storage/v1

# -----------------------------------------------------------------------------
# SUPABASE PRODUCTION SETTINGS
# -----------------------------------------------------------------------------
# [PROD] Production-specific configurations

# [PROD] Production database connection
PROD_SUPABASE_DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT].supabase.co:5432/postgres

# [PROD] Production API settings
PROD_SUPABASE_API_URL=https://[YOUR-PROJECT].supabase.co/rest/v1
PROD_SUPABASE_AUTH_URL=https://[YOUR-PROJECT].supabase.co/auth/v1
PROD_SUPABASE_STORAGE_URL=https://[YOUR-PROJECT].supabase.co/storage/v1

# [PROD] Enhanced monitoring
PROD_SUPABASE_MONITORING_ENABLED=true
PROD_SUPABASE_ALERTING_ENABLED=true

# -----------------------------------------------------------------------------
# ENVIRONMENT-SPECIFIC VARIABLES
# -----------------------------------------------------------------------------
# LOCAL Environment Variables
# Copy these sections and modify values for your LOCAL environment
SUPABASE_URL_LOCAL=https://cjjfegvtqvkcplvakpnk.supabase.co
SUPABASE_ANON_KEY_LOCAL=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTQ2NjAsImV4cCI6MjA3ODg3MDY2MH0.G3igL_Gb3PamvZOo0ZjalMdz-BCIWk3fGs0WtCzTG9o
SUPABASE_SERVICE_KEY_LOCAL=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzI5NDY2MCwiZXhwIjoyMDc4ODcwNjYwfQ.RWB5ZapGyqaTpLjsyMJxlOfaPUp2VSgtDhwCCbLq0Jo
SUPABASE_JWT_SECRET_LOCAL=EbURa+uKcP/dcmXoKNNiqu1w7DEQwKmu6W3HQT0xN+YG3+oRMonzcrnra5MfVB5BVRgbP9dRwSLSimxu4QuvbA==

# PROD Environment Variables
# Copy these sections and modify values for your PROD environment
SUPABASE_URL_PROD=https://cjjfegvtqvkcplvakpnk.supabase.co
SUPABASE_ANON_KEY_PROD=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyOTQ2NjAsImV4cCI6MjA3ODg3MDY2MH0.G3igL_Gb3PamvZOo0ZjalMdz-BCIWk3fGs0WtCzTG9o
SUPABASE_SERVICE_KEY_PROD=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqamZlZ3Z0cXZrY3BsdmFrcG5rIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzI5NDY2MCwiZXhwIjoyMDc4ODcwNjYwfQ.RWB5ZapGyqaTpLjsyMJxlOfaPUp2VSgtDhwCCbLq0Jo
SUPABASE_JWT_SECRET_PROD=EbURa+uKcP/dcmXoKNNiqu1w7DEQwKmu6W3HQT0xN+YG3+oRMonzcrnra5MfVB5BVRgbP9dRwSLSimxu4QuvbA==

# -----------------------------------------------------------------------------
# SUPABASE SECURITY BEST PRACTICES
# -----------------------------------------------------------------------------
#
# SECURITY GUIDELINES:
#
# 1. NEVER expose SERVICE_ROLE_KEY in frontend applications
# 2. Use ANON_KEY for client-side operations only
# 3. Always use HTTPS for production Supabase connections
# 4. Enable Row Level Security (RLS) on all tables
# 5. Implement proper authentication and authorization
# 6. Regularly rotate JWT secrets and API keys
# 7. Monitor database access and query performance
# 8. Use Supabase's built-in rate limiting
# 9. Implement proper error handling and logging
# 10. Keep database migrations version controlled
#
# FRONTEND INTEGRATION:
# - Use ANON_KEY for client-side Supabase client
# - Set SUPABASE_URL for connection endpoint
# - Configure authentication flow properly
# - Handle token refresh automatically
# - Implement proper error boundaries
#
# BACKEND INTEGRATION:
# - Use SERVICE_ROLE_KEY for admin operations
# - Implement row-level security policies
# - Handle database transactions properly
# - Use webhooks for real-time updates
# - Monitor connection pool usage
#
# ENVIRONMENT SETUP:
# 1. Create Supabase project at https://supabase.com
# 2. Get your project URL and API keys from Settings → API
# 3. Set up database schema and RLS policies
# 4. Configure authentication providers if needed
# 5. Set up storage buckets and policies
# 6. Configure webhooks for real-time features
# 7. Test all connections and features
#
# TROUBLESHOOTING:
# - Check project URL format (must be .supabase.co)
# - Verify API keys match your project
# - Ensure RLS policies don't block authorized access
# - Check network connectivity and firewalls
# - Monitor database connection limits
# - Review authentication flow configuration
#
# MONITORING:
# - Set up Supabase dashboard monitoring
# - Configure alerts for connection issues
# - Monitor query performance and slow queries
# - Track API usage and rate limits
# - Monitor storage usage and limits
# - Set up custom metrics if needed
#
# =============================================================================