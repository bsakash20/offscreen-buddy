df79cc76dbfe79d413cdcd106dc818aa
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.encryptionService = exports.EncryptionService = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
require("react-native-get-random-values");
var _cryptoJs = _interopRequireDefault(require("crypto-js"));
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var EncryptionService = exports.EncryptionService = function () {
  function EncryptionService() {
    (0, _classCallCheck2.default)(this, EncryptionService);
    this.masterKey = null;
    this.config = {
      algorithm: 'AES',
      keyDerivation: 'PBKDF2',
      iterations: 10000,
      keyLength: 256,
      ivLength: 16
    };
  }
  return (0, _createClass2.default)(EncryptionService, [{
    key: "initialize",
    value: (function () {
      var _initialize = (0, _asyncToGenerator2.default)(function* () {
        try {
          this.masterKey = yield this.getOrCreateMasterKey();
        } catch (error) {
          console.error('Failed to initialize encryption service:', error);
          throw new Error('Encryption initialization failed');
        }
      });
      function initialize() {
        return _initialize.apply(this, arguments);
      }
      return initialize;
    }())
  }, {
    key: "encrypt",
    value: (function () {
      var _encrypt = (0, _asyncToGenerator2.default)(function* (plaintext) {
        try {
          if (!this.masterKey) {
            yield this.initialize();
          }
          var iv = _cryptoJs.default.lib.WordArray.random(this.config.ivLength);
          var salt = _cryptoJs.default.lib.WordArray.random(32);
          var key = _cryptoJs.default.PBKDF2(this.masterKey, salt, {
            keySize: this.config.keyLength / 32,
            iterations: this.config.iterations
          });
          var encrypted = _cryptoJs.default.AES.encrypt(plaintext, key, {
            iv: iv,
            mode: _cryptoJs.default.mode.CBC,
            padding: _cryptoJs.default.pad.Pkcs7
          });
          var encryptedData = {
            data: encrypted.toString(),
            iv: iv.toString(),
            salt: salt.toString(),
            algorithm: this.config.algorithm,
            timestamp: Date.now()
          };
          var combinedData = {
            data: encryptedData.data,
            iv: encryptedData.iv,
            salt: encryptedData.salt,
            timestamp: encryptedData.timestamp
          };
          return btoa(JSON.stringify(combinedData));
        } catch (error) {
          console.error('Encryption failed:', error);
          throw new Error('Data encryption failed');
        }
      });
      function encrypt(_x) {
        return _encrypt.apply(this, arguments);
      }
      return encrypt;
    }())
  }, {
    key: "decrypt",
    value: (function () {
      var _decrypt = (0, _asyncToGenerator2.default)(function* (encryptedData) {
        try {
          if (!this.masterKey) {
            yield this.initialize();
          }
          var combinedData = JSON.parse(atob(encryptedData));
          var data = combinedData.data,
            iv = combinedData.iv,
            salt = combinedData.salt;
          var key = _cryptoJs.default.PBKDF2(this.masterKey, salt, {
            keySize: this.config.keyLength / 32,
            iterations: this.config.iterations
          });
          var decrypted = _cryptoJs.default.AES.decrypt(data, key, {
            iv: iv,
            mode: _cryptoJs.default.mode.CBC,
            padding: _cryptoJs.default.pad.Pkcs7
          });
          return decrypted.toString(_cryptoJs.default.enc.Utf8);
        } catch (error) {
          console.error('Decryption failed:', error);
          throw new Error('Data decryption failed');
        }
      });
      function decrypt(_x2) {
        return _decrypt.apply(this, arguments);
      }
      return decrypt;
    }())
  }, {
    key: "hash",
    value: (function () {
      var _hash = (0, _asyncToGenerator2.default)(function* (data) {
        var hash = _cryptoJs.default.SHA256(data);
        return hash.toString(_cryptoJs.default.enc.Hex);
      });
      function hash(_x3) {
        return _hash.apply(this, arguments);
      }
      return hash;
    }())
  }, {
    key: "generateSecureBytes",
    value: function generateSecureBytes(length) {
      var randomBytes = _cryptoJs.default.lib.WordArray.random(length);
      return randomBytes.toString(_cryptoJs.default.enc.Hex);
    }
  }, {
    key: "generateHMAC",
    value: (function () {
      var _generateHMAC = (0, _asyncToGenerator2.default)(function* (data, key) {
        var hmacKey = key || this.masterKey;
        var hmac = _cryptoJs.default.HmacSHA256(data, hmacKey);
        return hmac.toString(_cryptoJs.default.enc.Hex);
      });
      function generateHMAC(_x4, _x5) {
        return _generateHMAC.apply(this, arguments);
      }
      return generateHMAC;
    }())
  }, {
    key: "verifyHMAC",
    value: (function () {
      var _verifyHMAC = (0, _asyncToGenerator2.default)(function* (data, signature, key) {
        var computedSignature = yield this.generateHMAC(data, key);
        return computedSignature === signature;
      });
      function verifyHMAC(_x6, _x7, _x8) {
        return _verifyHMAC.apply(this, arguments);
      }
      return verifyHMAC;
    }())
  }, {
    key: "secureStore",
    value: (function () {
      var _secureStore = (0, _asyncToGenerator2.default)(function* (key, data) {
        try {
          var serializedData = JSON.stringify(data);
          var encryptedData = yield this.encrypt(serializedData);
          yield _asyncStorage.default.setItem(key, encryptedData);
        } catch (error) {
          console.error('Secure storage failed:', error);
          throw new Error('Failed to store data securely');
        }
      });
      function secureStore(_x9, _x0) {
        return _secureStore.apply(this, arguments);
      }
      return secureStore;
    }())
  }, {
    key: "secureRetrieve",
    value: (function () {
      var _secureRetrieve = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          var encryptedData = yield _asyncStorage.default.getItem(key);
          if (!encryptedData) {
            return null;
          }
          var decryptedData = yield this.decrypt(encryptedData);
          return JSON.parse(decryptedData);
        } catch (error) {
          console.error('Secure retrieval failed:', error);
          return null;
        }
      });
      function secureRetrieve(_x1) {
        return _secureRetrieve.apply(this, arguments);
      }
      return secureRetrieve;
    }())
  }, {
    key: "secureRemove",
    value: (function () {
      var _secureRemove = (0, _asyncToGenerator2.default)(function* (key) {
        try {
          yield _asyncStorage.default.removeItem(key);
        } catch (error) {
          console.error('Secure removal failed:', error);
        }
      });
      function secureRemove(_x10) {
        return _secureRemove.apply(this, arguments);
      }
      return secureRemove;
    }())
  }, {
    key: "generateDerivedKey",
    value: (function () {
      var _generateDerivedKey = (0, _asyncToGenerator2.default)(function* (purpose, userId) {
        var seed = `${purpose}_${userId}_${this.masterKey}`;
        return yield this.hash(seed);
      });
      function generateDerivedKey(_x11, _x12) {
        return _generateDerivedKey.apply(this, arguments);
      }
      return generateDerivedKey;
    }())
  }, {
    key: "validateIntegrity",
    value: (function () {
      var _validateIntegrity = (0, _asyncToGenerator2.default)(function* (data, checksum) {
        var computedHash = yield this.hash(data);
        return computedHash === checksum;
      });
      function validateIntegrity(_x13, _x14) {
        return _validateIntegrity.apply(this, arguments);
      }
      return validateIntegrity;
    }())
  }, {
    key: "signData",
    value: (function () {
      var _signData = (0, _asyncToGenerator2.default)(function* (data, privateKey) {
        var signatureData = `${data}_${Date.now()}_${Math.random()}`;
        return yield this.generateHMAC(signatureData, privateKey || this.masterKey);
      });
      function signData(_x15, _x16) {
        return _signData.apply(this, arguments);
      }
      return signData;
    }())
  }, {
    key: "verifySignature",
    value: (function () {
      var _verifySignature = (0, _asyncToGenerator2.default)(function* (data, signature, publicKey) {
        var computedSignature = yield this.generateHMAC(data, publicKey || this.masterKey);
        return computedSignature === signature;
      });
      function verifySignature(_x17, _x18, _x19) {
        return _verifySignature.apply(this, arguments);
      }
      return verifySignature;
    }())
  }, {
    key: "createSecureToken",
    value: (function () {
      var _createSecureToken = (0, _asyncToGenerator2.default)(function* (payload) {
        var expiresIn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3600000;
        var tokenData = {
          payload: payload,
          expires: Date.now() + expiresIn,
          created: Date.now(),
          signature: yield this.generateHMAC(JSON.stringify(payload))
        };
        return yield this.encrypt(JSON.stringify(tokenData));
      });
      function createSecureToken(_x20) {
        return _createSecureToken.apply(this, arguments);
      }
      return createSecureToken;
    }())
  }, {
    key: "validateSecureToken",
    value: (function () {
      var _validateSecureToken = (0, _asyncToGenerator2.default)(function* (token) {
        try {
          var decryptedData = yield this.decrypt(token);
          var tokenData = JSON.parse(decryptedData);
          if (Date.now() > tokenData.expires) {
            return {
              valid: false,
              error: 'Token has expired'
            };
          }
          var expectedSignature = yield this.generateHMAC(JSON.stringify(tokenData.payload));
          if (expectedSignature !== tokenData.signature) {
            return {
              valid: false,
              error: 'Token signature invalid'
            };
          }
          return {
            valid: true,
            payload: tokenData.payload
          };
        } catch (error) {
          return {
            valid: false,
            error: 'Token validation failed'
          };
        }
      });
      function validateSecureToken(_x21) {
        return _validateSecureToken.apply(this, arguments);
      }
      return validateSecureToken;
    }())
  }, {
    key: "getOrCreateMasterKey",
    value: (function () {
      var _getOrCreateMasterKey = (0, _asyncToGenerator2.default)(function* () {
        try {
          var existingKey = yield _asyncStorage.default.getItem('encryption_master_key');
          if (existingKey) {
            return existingKey;
          }
          var newKey = this.generateSecureBytes(32);
          yield _asyncStorage.default.setItem('encryption_master_key', newKey);
          return newKey;
        } catch (error) {
          return 'dev_master_key_fallback_32_characters_long_for_security';
        }
      });
      function getOrCreateMasterKey() {
        return _getOrCreateMasterKey.apply(this, arguments);
      }
      return getOrCreateMasterKey;
    }())
  }, {
    key: "reset",
    value: (function () {
      var _reset = (0, _asyncToGenerator2.default)(function* () {
        try {
          this.masterKey = null;
          yield _asyncStorage.default.removeItem('encryption_master_key');
          var keys = yield _asyncStorage.default.getAllKeys();
          var encryptedKeys = keys.filter(function (key) {
            return key.startsWith('biometric_') || key.startsWith('session_') || key.startsWith('device_bindings_');
          });
          for (var key of encryptedKeys) {
            yield _asyncStorage.default.removeItem(key);
          }
        } catch (error) {
          console.error('Encryption service reset failed:', error);
        }
      });
      function reset() {
        return _reset.apply(this, arguments);
      }
      return reset;
    }())
  }, {
    key: "updateConfig",
    value: function updateConfig(newConfig) {
      this.config = Object.assign({}, this.config, newConfig);
    }
  }, {
    key: "getMetrics",
    value: function getMetrics() {
      return {
        algorithm: this.config.algorithm,
        keyLength: this.config.keyLength,
        iterations: this.config.iterations
      };
    }
  }]);
}();
var encryptionService = exports.encryptionService = new EncryptionService();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiX2NyeXB0b0pzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9hc3luY1N0b3JhZ2UiLCJFbmNyeXB0aW9uU2VydmljZSIsImV4cG9ydHMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIm1hc3RlcktleSIsImNvbmZpZyIsImFsZ29yaXRobSIsImtleURlcml2YXRpb24iLCJpdGVyYXRpb25zIiwia2V5TGVuZ3RoIiwiaXZMZW5ndGgiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJfaW5pdGlhbGl6ZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImdldE9yQ3JlYXRlTWFzdGVyS2V5IiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJpbml0aWFsaXplIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfZW5jcnlwdCIsInBsYWludGV4dCIsIml2IiwiQ3J5cHRvSlMiLCJsaWIiLCJXb3JkQXJyYXkiLCJyYW5kb20iLCJzYWx0IiwiUEJLREYyIiwia2V5U2l6ZSIsImVuY3J5cHRlZCIsIkFFUyIsImVuY3J5cHQiLCJtb2RlIiwiQ0JDIiwicGFkZGluZyIsInBhZCIsIlBrY3M3IiwiZW5jcnlwdGVkRGF0YSIsImRhdGEiLCJ0b1N0cmluZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJjb21iaW5lZERhdGEiLCJidG9hIiwiSlNPTiIsInN0cmluZ2lmeSIsIl94IiwiX2RlY3J5cHQiLCJwYXJzZSIsImF0b2IiLCJkZWNyeXB0ZWQiLCJkZWNyeXB0IiwiZW5jIiwiVXRmOCIsIl94MiIsIl9oYXNoIiwiaGFzaCIsIlNIQTI1NiIsIkhleCIsIl94MyIsImdlbmVyYXRlU2VjdXJlQnl0ZXMiLCJsZW5ndGgiLCJyYW5kb21CeXRlcyIsIl9nZW5lcmF0ZUhNQUMiLCJobWFjS2V5IiwiaG1hYyIsIkhtYWNTSEEyNTYiLCJnZW5lcmF0ZUhNQUMiLCJfeDQiLCJfeDUiLCJfdmVyaWZ5SE1BQyIsInNpZ25hdHVyZSIsImNvbXB1dGVkU2lnbmF0dXJlIiwidmVyaWZ5SE1BQyIsIl94NiIsIl94NyIsIl94OCIsIl9zZWN1cmVTdG9yZSIsInNlcmlhbGl6ZWREYXRhIiwiQXN5bmNTdG9yYWdlIiwic2V0SXRlbSIsInNlY3VyZVN0b3JlIiwiX3g5IiwiX3gwIiwiX3NlY3VyZVJldHJpZXZlIiwiZ2V0SXRlbSIsImRlY3J5cHRlZERhdGEiLCJzZWN1cmVSZXRyaWV2ZSIsIl94MSIsIl9zZWN1cmVSZW1vdmUiLCJyZW1vdmVJdGVtIiwic2VjdXJlUmVtb3ZlIiwiX3gxMCIsIl9nZW5lcmF0ZURlcml2ZWRLZXkiLCJwdXJwb3NlIiwidXNlcklkIiwic2VlZCIsImdlbmVyYXRlRGVyaXZlZEtleSIsIl94MTEiLCJfeDEyIiwiX3ZhbGlkYXRlSW50ZWdyaXR5IiwiY2hlY2tzdW0iLCJjb21wdXRlZEhhc2giLCJ2YWxpZGF0ZUludGVncml0eSIsIl94MTMiLCJfeDE0IiwiX3NpZ25EYXRhIiwicHJpdmF0ZUtleSIsInNpZ25hdHVyZURhdGEiLCJNYXRoIiwic2lnbkRhdGEiLCJfeDE1IiwiX3gxNiIsIl92ZXJpZnlTaWduYXR1cmUiLCJwdWJsaWNLZXkiLCJ2ZXJpZnlTaWduYXR1cmUiLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJfY3JlYXRlU2VjdXJlVG9rZW4iLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwidW5kZWZpbmVkIiwidG9rZW5EYXRhIiwiZXhwaXJlcyIsImNyZWF0ZWQiLCJjcmVhdGVTZWN1cmVUb2tlbiIsIl94MjAiLCJfdmFsaWRhdGVTZWN1cmVUb2tlbiIsInRva2VuIiwidmFsaWQiLCJleHBlY3RlZFNpZ25hdHVyZSIsInZhbGlkYXRlU2VjdXJlVG9rZW4iLCJfeDIxIiwiX2dldE9yQ3JlYXRlTWFzdGVyS2V5IiwiZXhpc3RpbmdLZXkiLCJuZXdLZXkiLCJfcmVzZXQiLCJrZXlzIiwiZ2V0QWxsS2V5cyIsImVuY3J5cHRlZEtleXMiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwicmVzZXQiLCJ1cGRhdGVDb25maWciLCJuZXdDb25maWciLCJPYmplY3QiLCJhc3NpZ24iLCJnZXRNZXRyaWNzIiwiZW5jcnlwdGlvblNlcnZpY2UiXSwic291cmNlcyI6WyJFbmNyeXB0aW9uU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuY3J5cHRpb24gU2VydmljZSBmb3IgTW9iaWxlIFNlY3VyaXR5XG4gKiBFbnRlcnByaXNlLWdyYWRlIGVuY3J5cHRpb24gd2l0aCBoYXJkd2FyZS1iYWNrZWQgc2VjdXJpdHlcbiAqL1xuXG5pbXBvcnQgJ3JlYWN0LW5hdGl2ZS1nZXQtcmFuZG9tLXZhbHVlcyc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgQ3J5cHRvSlMgZnJvbSAnY3J5cHRvLWpzJztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuY3J5cHRpb25Db25maWcge1xuICAgIGFsZ29yaXRobTogc3RyaW5nO1xuICAgIGtleURlcml2YXRpb246IHN0cmluZztcbiAgICBpdGVyYXRpb25zOiBudW1iZXI7XG4gICAga2V5TGVuZ3RoOiBudW1iZXI7XG4gICAgaXZMZW5ndGg6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbmNyeXB0ZWREYXRhIHtcbiAgICBkYXRhOiBzdHJpbmc7XG4gICAgaXY6IHN0cmluZztcbiAgICBzYWx0Pzogc3RyaW5nO1xuICAgIGFsZ29yaXRobTogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRW5jcnlwdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgY29uZmlnOiBFbmNyeXB0aW9uQ29uZmlnO1xuICAgIHByaXZhdGUgbWFzdGVyS2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgICAgICAgIGFsZ29yaXRobTogJ0FFUycsXG4gICAgICAgICAgICBrZXlEZXJpdmF0aW9uOiAnUEJLREYyJyxcbiAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEwMDAwLFxuICAgICAgICAgICAga2V5TGVuZ3RoOiAyNTYsXG4gICAgICAgICAgICBpdkxlbmd0aDogMTZcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGVuY3J5cHRpb24gc2VydmljZSB3aXRoIG1hc3RlciBrZXlcbiAgICAgKi9cbiAgICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgb3IgcmV0cmlldmUgbWFzdGVyIGtleVxuICAgICAgICAgICAgdGhpcy5tYXN0ZXJLZXkgPSBhd2FpdCB0aGlzLmdldE9yQ3JlYXRlTWFzdGVyS2V5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBlbmNyeXB0aW9uIHNlcnZpY2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmNyeXB0aW9uIGluaXRpYWxpemF0aW9uIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jcnlwdCBkYXRhIHVzaW5nIEFFUy0yNTYtR0NNXG4gICAgICovXG4gICAgYXN5bmMgZW5jcnlwdChwbGFpbnRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWFzdGVyS2V5KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBJViBmb3IgZWFjaCBlbmNyeXB0aW9uXG4gICAgICAgICAgICBjb25zdCBpdiA9IENyeXB0b0pTLmxpYi5Xb3JkQXJyYXkucmFuZG9tKHRoaXMuY29uZmlnLml2TGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IHNhbHQgPSBDcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbSgzMik7XG5cbiAgICAgICAgICAgIC8vIERlcml2ZSBrZXkgdXNpbmcgUEJLREYyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBDcnlwdG9KUy5QQktERjIodGhpcy5tYXN0ZXJLZXkhLCBzYWx0LCB7XG4gICAgICAgICAgICAgICAga2V5U2l6ZTogdGhpcy5jb25maWcua2V5TGVuZ3RoIC8gMzIsXG4gICAgICAgICAgICAgICAgaXRlcmF0aW9uczogdGhpcy5jb25maWcuaXRlcmF0aW9uc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEVuY3J5cHQgdXNpbmcgQUVTLUdDTSBlcXVpdmFsZW50IChDQkMgZm9yIGRlbW9uc3RyYXRpb24pXG4gICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZW5jcnlwdChwbGFpbnRleHQsIGtleSwge1xuICAgICAgICAgICAgICAgIGl2OiBpdixcbiAgICAgICAgICAgICAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkNCQyxcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDb21iaW5lIHNhbHQsIGl2LCBhbmQgZW5jcnlwdGVkIGRhdGFcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGE6IEVuY3J5cHRlZERhdGEgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogZW5jcnlwdGVkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaXY6IGl2LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc2FsdDogc2FsdC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGFsZ29yaXRobTogdGhpcy5jb25maWcuYWxnb3JpdGhtLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIGJhc2U2NCBlbmNvZGVkIGNvbWJpbmVkIGRhdGFcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiBlbmNyeXB0ZWREYXRhLmRhdGEsXG4gICAgICAgICAgICAgICAgaXY6IGVuY3J5cHRlZERhdGEuaXYsXG4gICAgICAgICAgICAgICAgc2FsdDogZW5jcnlwdGVkRGF0YS5zYWx0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZW5jcnlwdGVkRGF0YS50aW1lc3RhbXBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBidG9hKEpTT04uc3RyaW5naWZ5KGNvbWJpbmVkRGF0YSkpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbmNyeXB0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgZW5jcnlwdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlY3J5cHQgZGF0YSB1c2luZyBBRVMtMjU2LUdDTVxuICAgICAqL1xuICAgIGFzeW5jIGRlY3J5cHQoZW5jcnlwdGVkRGF0YTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXN0ZXJLZXkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUGFyc2UgY29tYmluZWQgZGF0YVxuICAgICAgICAgICAgY29uc3QgY29tYmluZWREYXRhID0gSlNPTi5wYXJzZShhdG9iKGVuY3J5cHRlZERhdGEpKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgaXYsIHNhbHQgfSA9IGNvbWJpbmVkRGF0YTtcblxuICAgICAgICAgICAgLy8gRGVyaXZlIGtleSB1c2luZyBzYW1lIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IENyeXB0b0pTLlBCS0RGMih0aGlzLm1hc3RlcktleSEsIHNhbHQsIHtcbiAgICAgICAgICAgICAgICBrZXlTaXplOiB0aGlzLmNvbmZpZy5rZXlMZW5ndGggLyAzMixcbiAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiB0aGlzLmNvbmZpZy5pdGVyYXRpb25zXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRGVjcnlwdFxuICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gQ3J5cHRvSlMuQUVTLmRlY3J5cHQoZGF0YSwga2V5LCB7XG4gICAgICAgICAgICAgICAgaXY6IGl2LFxuICAgICAgICAgICAgICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuQ0JDLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzN1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWNyeXB0ZWQudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLlV0ZjgpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEZWNyeXB0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgZGVjcnlwdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhc2ggZGF0YSB1c2luZyBTSEEtMjU2XG4gICAgICovXG4gICAgYXN5bmMgaGFzaChkYXRhOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBoYXNoID0gQ3J5cHRvSlMuU0hBMjU2KGRhdGEpO1xuICAgICAgICByZXR1cm4gaGFzaC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBzZWN1cmUgcmFuZG9tIGJ5dGVzXG4gICAgICovXG4gICAgZ2VuZXJhdGVTZWN1cmVCeXRlcyhsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHJhbmRvbUJ5dGVzID0gQ3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20obGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHJhbmRvbUJ5dGVzLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIEhNQUMgc2lnbmF0dXJlXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVITUFDKGRhdGE6IHN0cmluZywga2V5Pzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgaG1hY0tleSA9IGtleSB8fCB0aGlzLm1hc3RlcktleSE7XG4gICAgICAgIGNvbnN0IGhtYWMgPSBDcnlwdG9KUy5IbWFjU0hBMjU2KGRhdGEsIGhtYWNLZXkpO1xuICAgICAgICByZXR1cm4gaG1hYy50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWZXJpZnkgSE1BQyBzaWduYXR1cmVcbiAgICAgKi9cbiAgICBhc3luYyB2ZXJpZnlITUFDKGRhdGE6IHN0cmluZywgc2lnbmF0dXJlOiBzdHJpbmcsIGtleT86IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBjb21wdXRlZFNpZ25hdHVyZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVITUFDKGRhdGEsIGtleSk7XG4gICAgICAgIHJldHVybiBjb21wdXRlZFNpZ25hdHVyZSA9PT0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlY3VyZWx5IHN0b3JlIGRhdGEgd2l0aCBlbmNyeXB0aW9uXG4gICAgICovXG4gICAgYXN5bmMgc2VjdXJlU3RvcmUoa2V5OiBzdHJpbmcsIGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCB0aGlzLmVuY3J5cHQoc2VyaWFsaXplZERhdGEpO1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oa2V5LCBlbmNyeXB0ZWREYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlY3VyZSBzdG9yYWdlIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSBkYXRhIHNlY3VyZWx5Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhbmQgZGVjcnlwdCBkYXRhIGZyb20gc2VjdXJlIHN0b3JhZ2VcbiAgICAgKi9cbiAgICBhc3luYyBzZWN1cmVSZXRyaWV2ZShrZXk6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICghZW5jcnlwdGVkRGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWREYXRhID0gYXdhaXQgdGhpcy5kZWNyeXB0KGVuY3J5cHRlZERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjcnlwdGVkRGF0YSk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlY3VyZSByZXRyaWV2YWwgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGRhdGEgZnJvbSBzZWN1cmUgc3RvcmFnZVxuICAgICAqL1xuICAgIGFzeW5jIHNlY3VyZVJlbW92ZShrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlY3VyZSByZW1vdmFsIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBlbmNyeXB0aW9uIGtleSBmb3Igc3BlY2lmaWMgcHVycG9zZVxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlRGVyaXZlZEtleShwdXJwb3NlOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHNlZWQgPSBgJHtwdXJwb3NlfV8ke3VzZXJJZH1fJHt0aGlzLm1hc3RlcktleX1gO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5oYXNoKHNlZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIGRhdGEgaW50ZWdyaXR5XG4gICAgICovXG4gICAgYXN5bmMgdmFsaWRhdGVJbnRlZ3JpdHkoZGF0YTogc3RyaW5nLCBjaGVja3N1bTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVkSGFzaCA9IGF3YWl0IHRoaXMuaGFzaChkYXRhKTtcbiAgICAgICAgcmV0dXJuIGNvbXB1dGVkSGFzaCA9PT0gY2hlY2tzdW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGRpZ2l0YWwgc2lnbmF0dXJlXG4gICAgICovXG4gICAgYXN5bmMgc2lnbkRhdGEoZGF0YTogc3RyaW5nLCBwcml2YXRlS2V5Pzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gU2ltcGxpZmllZCBzaWduYXR1cmUgLSBpbiBwcm9kdWN0aW9uIHdvdWxkIHVzZSBwcm9wZXIgZGlnaXRhbCBzaWduYXR1cmVzXG4gICAgICAgIGNvbnN0IHNpZ25hdHVyZURhdGEgPSBgJHtkYXRhfV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKX1gO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZW5lcmF0ZUhNQUMoc2lnbmF0dXJlRGF0YSwgcHJpdmF0ZUtleSB8fCB0aGlzLm1hc3RlcktleSEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZlcmlmeSBkaWdpdGFsIHNpZ25hdHVyZVxuICAgICAqL1xuICAgIGFzeW5jIHZlcmlmeVNpZ25hdHVyZShkYXRhOiBzdHJpbmcsIHNpZ25hdHVyZTogc3RyaW5nLCBwdWJsaWNLZXk/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgdGhpcyB3b3VsZCB2ZXJpZnkgYWdhaW5zdCBwdWJsaWMga2V5XG4gICAgICAgIC8vIEZvciBub3csIHNpbXBsZSB2YWxpZGF0aW9uXG4gICAgICAgIGNvbnN0IGNvbXB1dGVkU2lnbmF0dXJlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUhNQUMoZGF0YSwgcHVibGljS2V5IHx8IHRoaXMubWFzdGVyS2V5ISk7XG4gICAgICAgIHJldHVybiBjb21wdXRlZFNpZ25hdHVyZSA9PT0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBzZWN1cmUgdG9rZW4gd2l0aCBleHBpcmF0aW9uXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlU2VjdXJlVG9rZW4ocGF5bG9hZDogYW55LCBleHBpcmVzSW46IG51bWJlciA9IDM2MDAwMDApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSB7XG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgZXhwaXJlczogRGF0ZS5ub3coKSArIGV4cGlyZXNJbixcbiAgICAgICAgICAgIGNyZWF0ZWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICBzaWduYXR1cmU6IGF3YWl0IHRoaXMuZ2VuZXJhdGVITUFDKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVuY3J5cHQoSlNPTi5zdHJpbmdpZnkodG9rZW5EYXRhKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYW5kIGV4dHJhY3Qgc2VjdXJlIHRva2VuXG4gICAgICovXG4gICAgYXN5bmMgdmFsaWRhdGVTZWN1cmVUb2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTx7IHZhbGlkOiBib29sZWFuOyBwYXlsb2FkPzogYW55OyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWREYXRhID0gYXdhaXQgdGhpcy5kZWNyeXB0KHRva2VuKTtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IEpTT04ucGFyc2UoZGVjcnlwdGVkRGF0YSk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGV4cGlyYXRpb25cbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpID4gdG9rZW5EYXRhLmV4cGlyZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnVG9rZW4gaGFzIGV4cGlyZWQnIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZlcmlmeSBzaWduYXR1cmVcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkU2lnbmF0dXJlID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUhNQUMoSlNPTi5zdHJpbmdpZnkodG9rZW5EYXRhLnBheWxvYWQpKTtcbiAgICAgICAgICAgIGlmIChleHBlY3RlZFNpZ25hdHVyZSAhPT0gdG9rZW5EYXRhLnNpZ25hdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdUb2tlbiBzaWduYXR1cmUgaW52YWxpZCcgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIHBheWxvYWQ6IHRva2VuRGF0YS5wYXlsb2FkIH07XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdUb2tlbiB2YWxpZGF0aW9uIGZhaWxlZCcgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBvciBjcmVhdGUgbWFzdGVyIGtleSBmb3IgZW5jcnlwdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0T3JDcmVhdGVNYXN0ZXJLZXkoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgZXhpc3Rpbmcga2V5XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0tleSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKCdlbmNyeXB0aW9uX21hc3Rlcl9rZXknKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0tleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0tleTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbmV3IG1hc3RlciBrZXlcbiAgICAgICAgICAgIGNvbnN0IG5ld0tleSA9IHRoaXMuZ2VuZXJhdGVTZWN1cmVCeXRlcygzMik7XG4gICAgICAgICAgICBhd2FpdCBBc3luY1N0b3JhZ2Uuc2V0SXRlbSgnZW5jcnlwdGlvbl9tYXN0ZXJfa2V5JywgbmV3S2V5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXdLZXk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZvciBkZXZlbG9wbWVudFxuICAgICAgICAgICAgcmV0dXJuICdkZXZfbWFzdGVyX2tleV9mYWxsYmFja18zMl9jaGFyYWN0ZXJzX2xvbmdfZm9yX3NlY3VyaXR5JztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIGFsbCBlbmNyeXB0ZWQgZGF0YSBhbmQgcmVzZXQgc2VydmljZVxuICAgICAqL1xuICAgIGFzeW5jIHJlc2V0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5tYXN0ZXJLZXkgPSBudWxsO1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VuY3J5cHRpb25fbWFzdGVyX2tleScpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciBhbGwgZW5jcnlwdGVkIGFwcCBkYXRhXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEFsbEtleXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZEtleXMgPSBrZXlzLmZpbHRlcihrZXkgPT5cbiAgICAgICAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnYmlvbWV0cmljXycpIHx8XG4gICAgICAgICAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ3Nlc3Npb25fJykgfHxcbiAgICAgICAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnZGV2aWNlX2JpbmRpbmdzXycpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBlbmNyeXB0ZWRLZXlzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRW5jcnlwdGlvbiBzZXJ2aWNlIHJlc2V0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgZW5jcnlwdGlvbiBjb25maWd1cmF0aW9uXG4gICAgICovXG4gICAgdXBkYXRlQ29uZmlnKG5ld0NvbmZpZzogUGFydGlhbDxFbmNyeXB0aW9uQ29uZmlnPik6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBlbmNyeXB0aW9uIHNlcnZpY2UgbWV0cmljc1xuICAgICAqL1xuICAgIGdldE1ldHJpY3MoKTogeyBhbGdvcml0aG06IHN0cmluZzsga2V5TGVuZ3RoOiBudW1iZXI7IGl0ZXJhdGlvbnM6IG51bWJlciB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFsZ29yaXRobTogdGhpcy5jb25maWcuYWxnb3JpdGhtLFxuICAgICAgICAgICAga2V5TGVuZ3RoOiB0aGlzLmNvbmZpZy5rZXlMZW5ndGgsXG4gICAgICAgICAgICBpdGVyYXRpb25zOiB0aGlzLmNvbmZpZy5pdGVyYXRpb25zXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZW5jcnlwdGlvblNlcnZpY2UgPSBuZXcgRW5jcnlwdGlvblNlcnZpY2UoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBS0FBLE9BQUE7QUFFQSxJQUFBQyxTQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxhQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFBcUUsSUFrQnhESSxpQkFBaUIsR0FBQUMsT0FBQSxDQUFBRCxpQkFBQTtFQUkxQixTQUFBQSxrQkFBQSxFQUFjO0lBQUEsSUFBQUUsZ0JBQUEsQ0FBQUMsT0FBQSxRQUFBSCxpQkFBQTtJQUFBLEtBRk5JLFNBQVMsR0FBa0IsSUFBSTtJQUduQyxJQUFJLENBQUND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