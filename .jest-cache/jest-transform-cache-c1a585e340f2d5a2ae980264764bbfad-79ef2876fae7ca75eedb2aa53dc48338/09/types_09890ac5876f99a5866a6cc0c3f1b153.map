{"version":3,"names":["NetworkStatus","exports","NetworkQuality","OfflineMode","SyncStatus","SyncDirection","SyncPriority","SyncOperationType","_default","default"],"sources":["types.ts"],"sourcesContent":["/**\n * Core Types for Enhanced Offline System\n * Defines all interfaces and types for the offline-first architecture\n */\n\n// Network and Connectivity Types\nexport enum NetworkStatus {\n    UNKNOWN = 'unknown',\n    CONNECTED = 'connected',\n    DISCONNECTED = 'disconnected',\n    CONNECTING = 'connecting',\n    DISCONNECTING = 'disconnecting',\n}\n\nexport enum NetworkQuality {\n    POOR = 'poor',\n    FAIR = 'fair',\n    GOOD = 'good',\n    EXCELLENT = 'excellent',\n}\n\nexport interface NetworkState {\n    isConnected: boolean;\n    isInternetReachable: boolean;\n    type: string;\n    quality: NetworkQuality;\n    status: NetworkStatus;\n    downloadSpeed?: number;\n    uploadSpeed?: number;\n    latency?: number;\n    lastChecked: Date;\n}\n\nexport interface ValidationResult {\n    isValid: boolean;\n    latency?: number;\n    downloadSpeed?: number;\n    error?: string;\n    timestamp: Date;\n}\n\n// Offline State Management Types\nexport enum OfflineMode {\n    AUTO = 'auto',\n    FORCE_OFFLINE = 'force_offline',\n    FORCE_ONLINE = 'force_online',\n}\n\nexport interface OfflineState {\n    isOffline: boolean;\n    mode: OfflineMode;\n    queuedOperationsCount: number;\n    cachedDataSize: number;\n    lastOnlineTime?: Date;\n    offlineDuration?: number;\n    storageUsed: number;\n    storageLimit: number;\n}\n\nexport interface OfflineOperation {\n    id: string;\n    type: 'create' | 'update' | 'delete' | 'query';\n    table: string;\n    data: any;\n    timestamp: Date;\n    priority: number;\n    maxRetries: number;\n    retryCount: number;\n    requiresAuth: boolean;\n    metadata?: Record<string, any>;\n    dependencies?: string[]; // Operation IDs this depends on\n    conflictResolution?: ConflictResolutionStrategy;\n}\n\n// Sync and Data Synchronization Types\nexport enum SyncStatus {\n    IDLE = 'idle',\n    SYNCING = 'syncing',\n    PAUSED = 'paused',\n    FAILED = 'failed',\n    CONFLICT = 'conflict',\n}\n\nexport enum SyncDirection {\n    PULL = 'pull',\n    PUSH = 'push',\n    BIDIRECTIONAL = 'bidirectional',\n}\n\nexport enum SyncPriority {\n    CRITICAL = 1,\n    HIGH = 2,\n    NORMAL = 3,\n    LOW = 4,\n}\n\nexport interface SyncProgress {\n    status: SyncStatus;\n    percentage: number;\n    currentOperation?: string;\n    totalOperations: number;\n    completedOperations: number;\n    failedOperations: number;\n    bytesTransferred: number;\n    estimatedTimeRemaining?: number;\n    lastSyncTime?: Date;\n    nextSyncTime?: Date;\n}\n\nexport interface SyncConfig {\n    batchSize: number;\n    maxRetries: number;\n    retryDelay: number;\n    timeoutMs: number;\n    enableCompression: boolean;\n    enableEncryption: boolean;\n    conflictResolutionStrategy: ConflictResolutionStrategy;\n    backgroundSyncEnabled: boolean;\n    syncOnConnect: boolean;\n    syncOnForeground: boolean;\n    priorityWeights: Record<SyncPriority, number>;\n}\n\nexport interface SyncOperation {\n    id: string;\n    direction: SyncDirection;\n    priority: SyncPriority;\n    table: string;\n    data: any;\n    localVersion?: number;\n    remoteVersion?: number;\n    timestamp: Date;\n    metadata?: Record<string, any>;\n}\n\nexport interface ConflictResolutionStrategy {\n    type: 'last_write_wins' | 'merge' | 'user_intervention' | 'server_authority';\n    mergeRules?: Record<string, MergeRule>;\n    customResolver?: string;\n}\n\nexport interface MergeRule {\n    field: string;\n    strategy: 'take_local' | 'take_remote' | 'merge' | 'custom';\n    customMerge?: string;\n}\n\n// Database and Storage Types\nexport interface DatabaseConfig {\n    name: string;\n    version: number;\n    size: number;\n    encryptionKey?: string;\n    enableWAL: boolean;\n    enableForeignKeys: boolean;\n    tempStore: 'memory' | 'file';\n    cacheSize: number;\n    pageSize: number;\n}\n\nexport interface DatabaseStats {\n    totalSize: number;\n    usedSize: number;\n    freeSize: number;\n    tableCount: number;\n    indexCount: number;\n    lastVacuum: Date;\n    fragmentationPercentage: number;\n}\n\nexport interface StorageItem {\n    key: string;\n    value: any;\n    size: number;\n    createdAt: Date;\n    expiresAt?: Date;\n    tags: string[];\n    compressionRatio?: number;\n}\n\nexport interface CacheConfig {\n    maxSize: number;\n    ttl: number;\n    compressionEnabled: boolean;\n    evictionPolicy: 'lru' | 'lfu' | 'ttl';\n    backgroundCleanup: boolean;\n}\n\n// Conflict Management Types\nexport interface SyncConflict {\n    id: string;\n    operationId: string;\n    table: string;\n    recordId: string;\n    localData: any;\n    remoteData: any;\n    conflictType: 'field_level' | 'record_level' | 'concurrent_delete';\n    fields: string[];\n    timestamp: Date;\n    resolved: boolean;\n    resolution?: ConflictResolution;\n    priority: SyncPriority;\n}\n\nexport interface ConflictResolution {\n    strategy: ConflictResolutionStrategy;\n    userChoice?: Record<string, any>;\n    resolvedData: any;\n    resolvedAt: Date;\n    resolvedBy: string;\n}\n\n// Background Sync Types\nexport interface BackgroundSyncConfig {\n    enabled: boolean;\n    interval: number; // seconds\n    batteryLevelThreshold: number; // 0-1\n    requireCharging: boolean;\n    requireWifi: boolean;\n    maxSyncTime: number; // seconds\n    retryAttempts: number;\n    exponentialBackoff: boolean;\n}\n\nexport interface BackgroundTaskStatus {\n    isRunning: boolean;\n    isScheduled: boolean;\n    lastRun?: Date;\n    nextRun?: Date;\n    error?: string;\n    progress: SyncProgress;\n}\n\n// User Preferences and Settings Types\nexport interface OfflinePreferences {\n    enableOfflineMode: boolean;\n    backgroundSync: boolean;\n    syncOnWifiOnly: boolean;\n    dataCompression: boolean;\n    storageLimit: number; // MB\n    conflictResolution: ConflictResolutionStrategy;\n    notificationSettings: OfflineNotificationSettings;\n}\n\nexport interface OfflineNotificationSettings {\n    syncStatus: boolean;\n    conflicts: boolean;\n    storageWarning: boolean;\n    completion: boolean;\n    errors: boolean;\n}\n\n// Analytics and Monitoring Types\nexport interface SyncAnalytics {\n    totalSyncs: number;\n    successfulSyncs: number;\n    failedSyncs: number;\n    averageSyncTime: number;\n    dataTransferred: number;\n    conflictsResolved: number;\n    lastSyncDuration?: number;\n    storageEfficiency: number;\n}\n\nexport interface OfflineMetrics {\n    timeSpentOffline: number;\n    operationsQueued: number;\n    operationsExecuted: number;\n    cacheHitRate: number;\n    storageUtilization: number;\n    syncEfficiency: number;\n}\n\n// Service Status Types\nexport interface OfflineServiceStatus {\n    database: DatabaseStatus;\n    sync: SyncServiceStatus;\n    network: NetworkServiceStatus;\n    storage: StorageServiceStatus;\n    background: BackgroundServiceStatus;\n}\n\nexport interface DatabaseStatus {\n    initialized: boolean;\n    connected: boolean;\n    encrypted: boolean;\n    stats: DatabaseStats;\n    lastBackup?: Date;\n}\n\nexport interface SyncServiceStatus {\n    initialized: boolean;\n    active: boolean;\n    queueSize: number;\n    conflictsCount: number;\n    lastSync?: Date;\n}\n\nexport interface NetworkServiceStatus {\n    initialized: boolean;\n    connected: boolean;\n    quality: NetworkQuality;\n    lastCheck: Date;\n}\n\nexport interface StorageServiceStatus {\n    initialized: boolean;\n    used: number;\n    limit: number;\n    cacheSize: number;\n}\n\nexport interface BackgroundServiceStatus {\n    enabled: boolean;\n    scheduled: boolean;\n    running: boolean;\n    lastRun?: Date;\n}\n\n// Error Types\nexport interface OfflineError {\n    code: string;\n    message: string;\n    details?: any;\n    timestamp: Date;\n    operationId?: string;\n    recoverable: boolean;\n    suggestedAction?: string;\n}\n\nexport interface SyncError extends OfflineError {\n    operationType: SyncOperationType;\n    retryable: boolean;\n    nextRetryAt?: Date;\n}\n\nexport enum SyncOperationType {\n    CONNECTIVITY_CHECK = 'connectivity_check',\n    DATA_PULL = 'data_pull',\n    DATA_PUSH = 'data_push',\n    CONFLICT_RESOLUTION = 'conflict_resolution',\n    CLEANUP = 'cleanup',\n    BACKUP = 'backup',\n}\n\n// Utility Types\nexport type Listener<T> = (data: T) => void;\nexport type ErrorHandler = (error: OfflineError) => void;\n\nexport interface EventEmitter {\n    on<T = any>(event: string, listener: Listener<T>): () => void;\n    emit<T = any>(event: string, data: T): void;\n    off(event: string, listener: Listener<any>): void;\n}\n\n// Enhanced Timer Integration Types\nexport interface OfflineTimerSession {\n    id: string;\n    timerId: string;\n    startTime: Date;\n    endTime?: Date;\n    duration: number; // in seconds\n    type: 'focus' | 'break' | 'long_break';\n    paused: boolean;\n    pauseDuration: number;\n    completed: boolean;\n    milestones: string[];\n    synced: boolean;\n}\n\nexport interface OfflineMilestoneProgress {\n    id: string;\n    milestoneId: string;\n    userId: string;\n    progress: number;\n    completed: boolean;\n    lastUpdated: Date;\n    unlockedAt?: Date;\n    synced: boolean;\n}\n\n// Configuration and Environment Types\nexport interface OfflineEnvironmentConfig {\n    databaseUrl?: string;\n    encryptionKey: string;\n    debugMode: boolean;\n    logLevel: 'error' | 'warn' | 'info' | 'debug';\n    featureFlags: Record<string, boolean>;\n    limits: {\n        maxStorageSize: number;\n        maxCacheSize: number;\n        maxSyncRetries: number;\n        maxBackgroundTime: number;\n    };\n}\n\nexport default {};"],"mappings":";;;;IAMYA,aAAa,GAAAC,OAAA,CAAAD,aAAA,aAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAA,OAAbA,aAAa;AAAA;AAAA,IAQbE,cAAc,GAAAD,OAAA,CAAAC,cAAA,aAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAA,OAAdA,cAAc;AAAA;AAAA,IA4BdC,WAAW,GAAAF,OAAA,CAAAE,WAAA,aAAXA,WAAW;EAAXA,WAAW;EAAXA,WAAW;EAAXA,WAAW;EAAA,OAAXA,WAAW;AAAA;AAAA,IAiCXC,UAAU,GAAAH,OAAA,CAAAG,UAAA,aAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAA,OAAVA,UAAU;AAAA;AAAA,IAQVC,aAAa,GAAAJ,OAAA,CAAAI,aAAA,aAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAA,OAAbA,aAAa;AAAA;AAAA,IAMbC,YAAY,GAAAL,OAAA,CAAAK,YAAA,aAAZA,YAAY;EAAZA,YAAY,CAAZA,YAAY;EAAZA,YAAY,CAAZA,YAAY;EAAZA,YAAY,CAAZA,YAAY;EAAZA,YAAY,CAAZA,YAAY;EAAA,OAAZA,YAAY;AAAA;AAAA,IAuPZC,iBAAiB,GAAAN,OAAA,CAAAM,iBAAA,aAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAA,OAAjBA,iBAAiB;AAAA;AAAA,IAAAC,QAAA,GAAAP,OAAA,CAAAQ,OAAA,GA4Dd,CAAC,CAAC","ignoreList":[]}