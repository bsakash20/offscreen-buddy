{"version":3,"names":["_types","require","_Logger","NotificationScheduler","exports","notificationService","_classCallCheck2","default","scheduledNotifications","Map","isInitialized","_createClass2","key","value","_initialize","_asyncToGenerator2","logger","info","error","initialize","apply","arguments","_getSmartSchedule","notification","context","now","Date","priority","NotificationPriority","URGENT","scheduledTime","reason","shouldSend","isInDoNotDisturb","preferences","doNotDisturb","HIGH","endTime","getDoNotDisturbEndTime","userActivity","isFocused","smartScheduling","skipDuringFocus","endFocusTime","lastActivity","getTime","isInMeeting","skipDuringMeetings","afterMeetingTime","recentNotifications","notificationHistory","filter","timestamp","categoryPrefs","categories","category","frequency","maxPerDay","todayNotifications","toDateString","length","scheduledFor","getSmartSchedule","_x","_x2","_scheduleTimerNotifications","timerId","duration","completionTime","completionNotification","id","type","title","message","userId","sessionId","createdAt","updatedAt","scheduleNotification","scheduleTimerNotifications","_x3","_x4","_scheduleMilestoneNotification","milestoneId","milestoneType","milestoneNotification","data","sendImmediateNotification","scheduleMilestoneNotification","_x5","_x6","_scheduleBreakReminder","breakDuration","breakTime","breakNotification","NORMAL","scheduleBreakReminder","_x7","_x8","_x9","_cancelScheduledNotification","notificationId","timeout","get","clearTimeout","delete","cancelScheduledNotification","_x0","_getScheduledNotifications","Array","from","keys","getScheduledNotifications","_dispose","forEach","clear","dispose","dnd","currentTime","enabled","currentMinutes","getHours","getMinutes","_dnd$startTime$split$","startTime","split","map","Number","_dnd$startTime$split$2","_slicedToArray2","startHour","startMinute","_dnd$endTime$split$ma","_dnd$endTime$split$ma2","endHour","endMinute","startMinutes","endMinutes","_dnd$endTime$split$ma3","_dnd$endTime$split$ma4","setHours","setDate","getDate"],"sources":["NotificationScheduler.ts"],"sourcesContent":["/**\n * Notification Scheduler for OffScreen Buddy\n * Handles intelligent notification timing and smart scheduling\n */\n\nimport { NotificationData, SmartScheduleContext, ScheduleResult, NotificationPriority } from './types';\nimport { NotificationService } from './NotificationService';\nimport { logger } from '../../utils/Logger';\n\nexport class NotificationScheduler {\n    private notificationService: NotificationService;\n    private scheduledNotifications = new Map<string, NodeJS.Timeout>();\n    private isInitialized = false;\n\n    constructor(notificationService: NotificationService) {\n        this.notificationService = notificationService;\n    }\n\n    async initialize(): Promise<void> {\n        try {\n            this.isInitialized = true;\n            logger.info('NotificationScheduler initialized');\n        } catch (error) {\n            logger.error('Failed to initialize NotificationScheduler:', error);\n            throw error;\n        }\n    }\n\n    async getSmartSchedule(\n        notification: NotificationData,\n        context: SmartScheduleContext\n    ): Promise<ScheduleResult> {\n        try {\n            const now = new Date();\n\n            // Check if notification is urgent - send immediately\n            if (notification.priority === NotificationPriority.URGENT) {\n                return {\n                    scheduledTime: now,\n                    priority: notification.priority,\n                    reason: 'Urgent notification - immediate delivery',\n                    shouldSend: true,\n                };\n            }\n\n            // Check do not disturb hours\n            if (this.isInDoNotDisturb(context.preferences.doNotDisturb, now)) {\n                if (notification.priority === NotificationPriority.HIGH) {\n                    // Send at end of do not disturb period\n                    const endTime = this.getDoNotDisturbEndTime(context.preferences.doNotDisturb, now);\n                    return {\n                        scheduledTime: endTime,\n                        priority: notification.priority,\n                        reason: 'Scheduled for after do-not-disturb hours',\n                        shouldSend: true,\n                    };\n                } else {\n                    return {\n                        scheduledTime: now,\n                        priority: notification.priority,\n                        reason: 'Skipped due to do-not-disturb',\n                        shouldSend: false,\n                    };\n                }\n            }\n\n            // Check user's focus state\n            if (context.userActivity.isFocused && context.preferences.smartScheduling.skipDuringFocus) {\n                if (notification.priority === NotificationPriority.HIGH) {\n                    const endFocusTime = new Date(context.userActivity.lastActivity.getTime() + 60000); // 1 minute after last activity\n                    return {\n                        scheduledTime: endFocusTime,\n                        priority: notification.priority,\n                        reason: 'Scheduled for after focus period',\n                        shouldSend: true,\n                    };\n                } else {\n                    return {\n                        scheduledTime: now,\n                        priority: notification.priority,\n                        reason: 'Skipped during focus session',\n                        shouldSend: false,\n                    };\n                }\n            }\n\n            // Check meeting status\n            if (context.userActivity.isInMeeting && context.preferences.smartScheduling.skipDuringMeetings) {\n                if (notification.priority === NotificationPriority.HIGH) {\n                    const afterMeetingTime = new Date(now.getTime() + 300000); // 5 minutes from now\n                    return {\n                        scheduledTime: afterMeetingTime,\n                        priority: notification.priority,\n                        reason: 'Scheduled for after meeting',\n                        shouldSend: true,\n                    };\n                } else {\n                    return {\n                        scheduledTime: now,\n                        priority: notification.priority,\n                        reason: 'Skipped during meeting',\n                        shouldSend: false,\n                    };\n                }\n            }\n\n            // Check notification frequency limits\n            const recentNotifications = context.notificationHistory.filter(\n                notification =>\n                    notification.timestamp.getTime() > now.getTime() - 300000 // Last 5 minutes\n            );\n\n            const categoryPrefs = context.preferences.categories[notification.category];\n            if (categoryPrefs?.frequency.maxPerDay) {\n                const todayNotifications = context.notificationHistory.filter(\n                    notification => notification.timestamp.toDateString() === now.toDateString()\n                );\n\n                if (todayNotifications.length >= categoryPrefs.frequency.maxPerDay) {\n                    return {\n                        scheduledTime: now,\n                        priority: notification.priority,\n                        reason: 'Daily limit reached for this category',\n                        shouldSend: false,\n                    };\n                }\n            }\n\n            // Default to immediate scheduling\n            return {\n                scheduledTime: notification.scheduledFor || now,\n                priority: notification.priority,\n                reason: 'Default scheduling - no restrictions',\n                shouldSend: true,\n            };\n        } catch (error) {\n            logger.error('Failed to get smart schedule:', error);\n            // Fallback to immediate scheduling\n            return {\n                scheduledTime: notification.scheduledFor || new Date(),\n                priority: notification.priority,\n                reason: 'Fallback to immediate scheduling due to error',\n                shouldSend: true,\n            };\n        }\n    }\n\n    async scheduleTimerNotifications(timerId: string, duration: number): Promise<void> {\n        try {\n            // Schedule completion notification\n            const completionTime = new Date(Date.now() + duration * 1000);\n\n            // Create completion notification\n            const completionNotification: NotificationData = {\n                id: `timer_complete_${timerId}`,\n                type: 'timer_complete' as any,\n                category: 'timers' as any,\n                title: 'Focus Session Complete',\n                message: 'Great job! Your focus session has ended.',\n                priority: NotificationPriority.HIGH,\n                userId: 'current_user', // Would be actual user ID\n                sessionId: timerId,\n                scheduledFor: completionTime,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n            };\n\n            await this.notificationService.scheduleNotification(completionNotification);\n\n            logger.info('Timer notifications scheduled', { timerId, duration, completionTime });\n        } catch (error) {\n            logger.error('Failed to schedule timer notifications:', error);\n        }\n    }\n\n    async scheduleMilestoneNotification(milestoneId: string, milestoneType: string): Promise<void> {\n        try {\n            const milestoneNotification: NotificationData = {\n                id: `milestone_${milestoneId}`,\n                type: 'milestone_achievement' as any,\n                category: 'achievements' as any,\n                title: 'Milestone Achieved!',\n                message: `Congratulations! You've achieved a new ${milestoneType} milestone.`,\n                priority: NotificationPriority.HIGH,\n                userId: 'current_user',\n                data: { milestoneId, milestoneType },\n                createdAt: new Date(),\n                updatedAt: new Date(),\n            };\n\n            await this.notificationService.sendImmediateNotification(milestoneNotification);\n\n            logger.info('Milestone notification sent', { milestoneId, milestoneType });\n        } catch (error) {\n            logger.error('Failed to schedule milestone notification:', error);\n        }\n    }\n\n    async scheduleBreakReminder(\n        sessionId: string,\n        breakDuration: number,\n        breakTime: Date\n    ): Promise<void> {\n        try {\n            const breakNotification: NotificationData = {\n                id: `break_${sessionId}`,\n                type: 'break_reminder' as any,\n                category: 'reminders' as any,\n                title: 'Break Time!',\n                message: `Time to take a ${breakDuration}-minute break. You've earned it!`,\n                priority: NotificationPriority.NORMAL,\n                userId: 'current_user',\n                sessionId,\n                scheduledFor: breakTime,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n            };\n\n            await this.notificationService.scheduleNotification(breakNotification);\n\n            logger.info('Break reminder scheduled', { sessionId, breakDuration, breakTime });\n        } catch (error) {\n            logger.error('Failed to schedule break reminder:', error);\n        }\n    }\n\n    async cancelScheduledNotification(notificationId: string): Promise<void> {\n        try {\n            const timeout = this.scheduledNotifications.get(notificationId);\n            if (timeout) {\n                clearTimeout(timeout);\n                this.scheduledNotifications.delete(notificationId);\n                logger.info('Scheduled notification cancelled', { notificationId });\n            }\n        } catch (error) {\n            logger.error('Failed to cancel scheduled notification:', error);\n        }\n    }\n\n    async getScheduledNotifications(): Promise<string[]> {\n        return Array.from(this.scheduledNotifications.keys());\n    }\n\n    async dispose(): Promise<void> {\n        try {\n            // Clear all timeouts\n            this.scheduledNotifications.forEach((timeout) => {\n                clearTimeout(timeout);\n            });\n            this.scheduledNotifications.clear();\n            this.isInitialized = false;\n            logger.info('NotificationScheduler disposed');\n        } catch (error) {\n            logger.error('Error disposing NotificationScheduler:', error);\n        }\n    }\n\n    private isInDoNotDisturb(dnd: any, currentTime: Date): boolean {\n        if (!dnd.enabled) return false;\n\n        const now = currentTime;\n        const currentMinutes = now.getHours() * 60 + now.getMinutes();\n\n        const [startHour, startMinute] = dnd.startTime.split(':').map(Number);\n        const [endHour, endMinute] = dnd.endTime.split(':').map(Number);\n\n        const startMinutes = startHour * 60 + startMinute;\n        const endMinutes = endHour * 60 + endMinute;\n\n        // Handle overnight DND (e.g., 22:00 to 07:00)\n        if (startMinutes > endMinutes) {\n            return currentMinutes >= startMinutes || currentMinutes <= endMinutes;\n        }\n\n        return currentMinutes >= startMinutes && currentMinutes <= endMinutes;\n    }\n\n    private getDoNotDisturbEndTime(dnd: any, currentTime: Date): Date {\n        const [endHour, endMinute] = dnd.endTime.split(':').map(Number);\n        const endTime = new Date(currentTime);\n        endTime.setHours(endHour, endMinute, 0, 0);\n\n        // If end time is earlier than current time, schedule for next day\n        if (endTime <= currentTime) {\n            endTime.setDate(endTime.getDate() + 1);\n        }\n\n        return endTime;\n    }\n}"],"mappings":";;;;;;;;;AAKA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAA4C,IAE/BE,qBAAqB,GAAAC,OAAA,CAAAD,qBAAA;EAK9B,SAAAA,sBAAYE,mBAAwC,EAAE;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAJ,qBAAA;IAAA,KAH9CK,sBAAsB,GAAG,IAAIC,GAAG,CAAyB,CAAC;IAAA,KAC1DC,aAAa,GAAG,KAAK;IAGzB,IAAI,CAACL,mBAAmB,GAAGA,mBAAmB;EAClD;EAAC,WAAAM,aAAA,CAAAJ,OAAA,EAAAJ,qBAAA;IAAAS,GAAA;IAAAC,KAAA;MAAA,IAAAC,WAAA,OAAAC,kBAAA,CAAAR,OAAA,EAED,aAAkC;QAC9B,IAAI;UACA,IAAI,CAACG,aAAa,GAAG,IAAI;UACzBM,cAAM,CAACC,IAAI,CAAC,mCAAmC,CAAC;QACpD,CAAC,CAAC,OAAOC,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,6CAA6C,EAAEA,KAAK,CAAC;UAClE,MAAMA,KAAK;QACf;MACJ,CAAC;MAAA,SARKC,UAAUA,CAAA;QAAA,OAAAL,WAAA,CAAAM,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAVF,UAAU;IAAA;EAAA;IAAAP,GAAA;IAAAC,KAAA;MAAA,IAAAS,iBAAA,OAAAP,kBAAA,CAAAR,OAAA,EAUhB,WACIgB,YAA8B,EAC9BC,OAA6B,EACN;QACvB,IAAI;UACA,IAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;UAGtB,IAAIH,YAAY,CAACI,QAAQ,KAAKC,2BAAoB,CAACC,MAAM,EAAE;YACvD,OAAO;cACHC,aAAa,EAAEL,GAAG;cAClBE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;cAC/BI,MAAM,EAAE,0CAA0C;cAClDC,UAAU,EAAE;YAChB,CAAC;UACL;UAGA,IAAI,IAAI,CAACC,gBAAgB,CAACT,OAAO,CAACU,WAAW,CAACC,YAAY,EAAEV,GAAG,CAAC,EAAE;YAC9D,IAAIF,YAAY,CAACI,QAAQ,KAAKC,2BAAoB,CAACQ,IAAI,EAAE;cAErD,IAAMC,OAAO,GAAG,IAAI,CAACC,sBAAsB,CAACd,OAAO,CAACU,WAAW,CAACC,YAAY,EAAEV,GAAG,CAAC;cAClF,OAAO;gBACHK,aAAa,EAAEO,OAAO;gBACtBV,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,0CAA0C;gBAClDC,UAAU,EAAE;cAChB,CAAC;YACL,CAAC,MAAM;cACH,OAAO;gBACHF,aAAa,EAAEL,GAAG;gBAClBE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,+BAA+B;gBACvCC,UAAU,EAAE;cAChB,CAAC;YACL;UACJ;UAGA,IAAIR,OAAO,CAACe,YAAY,CAACC,SAAS,IAAIhB,OAAO,CAACU,WAAW,CAACO,eAAe,CAACC,eAAe,EAAE;YACvF,IAAInB,YAAY,CAACI,QAAQ,KAAKC,2BAAoB,CAACQ,IAAI,EAAE;cACrD,IAAMO,YAAY,GAAG,IAAIjB,IAAI,CAACF,OAAO,CAACe,YAAY,CAACK,YAAY,CAACC,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC;cAClF,OAAO;gBACHf,aAAa,EAAEa,YAAY;gBAC3BhB,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,kCAAkC;gBAC1CC,UAAU,EAAE;cAChB,CAAC;YACL,CAAC,MAAM;cACH,OAAO;gBACHF,aAAa,EAAEL,GAAG;gBAClBE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,8BAA8B;gBACtCC,UAAU,EAAE;cAChB,CAAC;YACL;UACJ;UAGA,IAAIR,OAAO,CAACe,YAAY,CAACO,WAAW,IAAItB,OAAO,CAACU,WAAW,CAACO,eAAe,CAACM,kBAAkB,EAAE;YAC5F,IAAIxB,YAAY,CAACI,QAAQ,KAAKC,2BAAoB,CAACQ,IAAI,EAAE;cACrD,IAAMY,gBAAgB,GAAG,IAAItB,IAAI,CAACD,GAAG,CAACoB,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC;cACzD,OAAO;gBACHf,aAAa,EAAEkB,gBAAgB;gBAC/BrB,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,6BAA6B;gBACrCC,UAAU,EAAE;cAChB,CAAC;YACL,CAAC,MAAM;cACH,OAAO;gBACHF,aAAa,EAAEL,GAAG;gBAClBE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,wBAAwB;gBAChCC,UAAU,EAAE;cAChB,CAAC;YACL;UACJ;UAGA,IAAMiB,mBAAmB,GAAGzB,OAAO,CAAC0B,mBAAmB,CAACC,MAAM,CAC1D,UAAA5B,YAAY;YAAA,OACRA,YAAY,CAAC6B,SAAS,CAACP,OAAO,CAAC,CAAC,GAAGpB,GAAG,CAACoB,OAAO,CAAC,CAAC,GAAG,MAAM;UAAA,CACjE,CAAC;UAED,IAAMQ,aAAa,GAAG7B,OAAO,CAACU,WAAW,CAACoB,UAAU,CAAC/B,YAAY,CAACgC,QAAQ,CAAC;UAC3E,IAAIF,aAAa,YAAbA,aAAa,CAAEG,SAAS,CAACC,SAAS,EAAE;YACpC,IAAMC,kBAAkB,GAAGlC,OAAO,CAAC0B,mBAAmB,CAACC,MAAM,CACzD,UAAA5B,YAAY;cAAA,OAAIA,YAAY,CAAC6B,SAAS,CAACO,YAAY,CAAC,CAAC,KAAKlC,GAAG,CAACkC,YAAY,CAAC,CAAC;YAAA,CAChF,CAAC;YAED,IAAID,kBAAkB,CAACE,MAAM,IAAIP,aAAa,CAACG,SAAS,CAACC,SAAS,EAAE;cAChE,OAAO;gBACH3B,aAAa,EAAEL,GAAG;gBAClBE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;gBAC/BI,MAAM,EAAE,uCAAuC;gBAC/CC,UAAU,EAAE;cAChB,CAAC;YACL;UACJ;UAGA,OAAO;YACHF,aAAa,EAAEP,YAAY,CAACsC,YAAY,IAAIpC,GAAG;YAC/CE,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;YAC/BI,MAAM,EAAE,sCAAsC;YAC9CC,UAAU,EAAE;UAChB,CAAC;QACL,CAAC,CAAC,OAAOd,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;UAEpD,OAAO;YACHY,aAAa,EAAEP,YAAY,CAACsC,YAAY,IAAI,IAAInC,IAAI,CAAC,CAAC;YACtDC,QAAQ,EAAEJ,YAAY,CAACI,QAAQ;YAC/BI,MAAM,EAAE,+CAA+C;YACvDC,UAAU,EAAE;UAChB,CAAC;QACL;MACJ,CAAC;MAAA,SArHK8B,gBAAgBA,CAAAC,EAAA,EAAAC,GAAA;QAAA,OAAA1C,iBAAA,CAAAF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAhByC,gBAAgB;IAAA;EAAA;IAAAlD,GAAA;IAAAC,KAAA;MAAA,IAAAoD,2BAAA,OAAAlD,kBAAA,CAAAR,OAAA,EAuHtB,WAAiC2D,OAAe,EAAEC,QAAgB,EAAiB;QAC/E,IAAI;UAEA,IAAMC,cAAc,GAAG,IAAI1C,IAAI,CAACA,IAAI,CAACD,GAAG,CAAC,CAAC,GAAG0C,QAAQ,GAAG,IAAI,CAAC;UAG7D,IAAME,sBAAwC,GAAG;YAC7CC,EAAE,EAAE,kBAAkBJ,OAAO,EAAE;YAC/BK,IAAI,EAAE,gBAAuB;YAC7BhB,QAAQ,EAAE,QAAe;YACzBiB,KAAK,EAAE,wBAAwB;YAC/BC,OAAO,EAAE,0CAA0C;YACnD9C,QAAQ,EAAEC,2BAAoB,CAACQ,IAAI;YACnCsC,MAAM,EAAE,cAAc;YACtBC,SAAS,EAAET,OAAO;YAClBL,YAAY,EAAEO,cAAc;YAC5BQ,SAAS,EAAE,IAAIlD,IAAI,CAAC,CAAC;YACrBmD,SAAS,EAAE,IAAInD,IAAI,CAAC;UACxB,CAAC;UAED,MAAM,IAAI,CAACrB,mBAAmB,CAACyE,oBAAoB,CAACT,sBAAsB,CAAC;UAE3ErD,cAAM,CAACC,IAAI,CAAC,+BAA+B,EAAE;YAAEiD,OAAO,EAAPA,OAAO;YAAEC,QAAQ,EAARA,QAAQ;YAAEC,cAAc,EAAdA;UAAe,CAAC,CAAC;QACvF,CAAC,CAAC,OAAOlD,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;QAClE;MACJ,CAAC;MAAA,SA1BK6D,0BAA0BA,CAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAhB,2BAAA,CAAA7C,KAAA,OAAAC,SAAA;MAAA;MAAA,OAA1B0D,0BAA0B;IAAA;EAAA;IAAAnE,GAAA;IAAAC,KAAA;MAAA,IAAAqE,8BAAA,OAAAnE,kBAAA,CAAAR,OAAA,EA4BhC,WAAoC4E,WAAmB,EAAEC,aAAqB,EAAiB;QAC3F,IAAI;UACA,IAAMC,qBAAuC,GAAG;YAC5Cf,EAAE,EAAE,aAAaa,WAAW,EAAE;YAC9BZ,IAAI,EAAE,uBAA8B;YACpChB,QAAQ,EAAE,cAAqB;YAC/BiB,KAAK,EAAE,qBAAqB;YAC5BC,OAAO,EAAE,0CAA0CW,aAAa,aAAa;YAC7EzD,QAAQ,EAAEC,2BAAoB,CAACQ,IAAI;YACnCsC,MAAM,EAAE,cAAc;YACtBY,IAAI,EAAE;cAAEH,WAAW,EAAXA,WAAW;cAAEC,aAAa,EAAbA;YAAc,CAAC;YACpCR,SAAS,EAAE,IAAIlD,IAAI,CAAC,CAAC;YACrBmD,SAAS,EAAE,IAAInD,IAAI,CAAC;UACxB,CAAC;UAED,MAAM,IAAI,CAACrB,mBAAmB,CAACkF,yBAAyB,CAACF,qBAAqB,CAAC;UAE/ErE,cAAM,CAACC,IAAI,CAAC,6BAA6B,EAAE;YAAEkE,WAAW,EAAXA,WAAW;YAAEC,aAAa,EAAbA;UAAc,CAAC,CAAC;QAC9E,CAAC,CAAC,OAAOlE,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;QACrE;MACJ,CAAC;MAAA,SArBKsE,6BAA6BA,CAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAR,8BAAA,CAAA9D,KAAA,OAAAC,SAAA;MAAA;MAAA,OAA7BmE,6BAA6B;IAAA;EAAA;IAAA5E,GAAA;IAAAC,KAAA;MAAA,IAAA8E,sBAAA,OAAA5E,kBAAA,CAAAR,OAAA,EAuBnC,WACIoE,SAAiB,EACjBiB,aAAqB,EACrBC,SAAe,EACF;QACb,IAAI;UACA,IAAMC,iBAAmC,GAAG;YACxCxB,EAAE,EAAE,SAASK,SAAS,EAAE;YACxBJ,IAAI,EAAE,gBAAuB;YAC7BhB,QAAQ,EAAE,WAAkB;YAC5BiB,KAAK,EAAE,aAAa;YACpBC,OAAO,EAAE,kBAAkBmB,aAAa,kCAAkC;YAC1EjE,QAAQ,EAAEC,2BAAoB,CAACmE,MAAM;YACrCrB,MAAM,EAAE,cAAc;YACtBC,SAAS,EAATA,SAAS;YACTd,YAAY,EAAEgC,SAAS;YACvBjB,SAAS,EAAE,IAAIlD,IAAI,CAAC,CAAC;YACrBmD,SAAS,EAAE,IAAInD,IAAI,CAAC;UACxB,CAAC;UAED,MAAM,IAAI,CAACrB,mBAAmB,CAACyE,oBAAoB,CAACgB,iBAAiB,CAAC;UAEtE9E,cAAM,CAACC,IAAI,CAAC,0BAA0B,EAAE;YAAE0D,SAAS,EAATA,SAAS;YAAEiB,aAAa,EAAbA,aAAa;YAAEC,SAAS,EAATA;UAAU,CAAC,CAAC;QACpF,CAAC,CAAC,OAAO3E,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;QAC7D;MACJ,CAAC;MAAA,SA1BK8E,qBAAqBA,CAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAR,sBAAA,CAAAvE,KAAA,OAAAC,SAAA;MAAA;MAAA,OAArB2E,qBAAqB;IAAA;EAAA;IAAApF,GAAA;IAAAC,KAAA;MAAA,IAAAuF,4BAAA,OAAArF,kBAAA,CAAAR,OAAA,EA4B3B,WAAkC8F,cAAsB,EAAiB;QACrE,IAAI;UACA,IAAMC,OAAO,GAAG,IAAI,CAAC9F,sBAAsB,CAAC+F,GAAG,CAACF,cAAc,CAAC;UAC/D,IAAIC,OAAO,EAAE;YACTE,YAAY,CAACF,OAAO,CAAC;YACrB,IAAI,CAAC9F,sBAAsB,CAACiG,MAAM,CAACJ,cAAc,CAAC;YAClDrF,cAAM,CAACC,IAAI,CAAC,kCAAkC,EAAE;cAAEoF,cAAc,EAAdA;YAAe,CAAC,CAAC;UACvE;QACJ,CAAC,CAAC,OAAOnF,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,0CAA0C,EAAEA,KAAK,CAAC;QACnE;MACJ,CAAC;MAAA,SAXKwF,2BAA2BA,CAAAC,GAAA;QAAA,OAAAP,4BAAA,CAAAhF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAA3BqF,2BAA2B;IAAA;EAAA;IAAA9F,GAAA;IAAAC,KAAA;MAAA,IAAA+F,0BAAA,OAAA7F,kBAAA,CAAAR,OAAA,EAajC,aAAqD;QACjD,OAAOsG,KAAK,CAACC,IAAI,CAAC,IAAI,CAACtG,sBAAsB,CAACuG,IAAI,CAAC,CAAC,CAAC;MACzD,CAAC;MAAA,SAFKC,yBAAyBA,CAAA;QAAA,OAAAJ,0BAAA,CAAAxF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAzB2F,yBAAyB;IAAA;EAAA;IAAApG,GAAA;IAAAC,KAAA;MAAA,IAAAoG,QAAA,OAAAlG,kBAAA,CAAAR,OAAA,EAI/B,aAA+B;QAC3B,IAAI;UAEA,IAAI,CAACC,sBAAsB,CAAC0G,OAAO,CAAC,UAACZ,OAAO,EAAK;YAC7CE,YAAY,CAACF,OAAO,CAAC;UACzB,CAAC,CAAC;UACF,IAAI,CAAC9F,sBAAsB,CAAC2G,KAAK,CAAC,CAAC;UACnC,IAAI,CAACzG,aAAa,GAAG,KAAK;UAC1BM,cAAM,CAACC,IAAI,CAAC,gCAAgC,CAAC;QACjD,CAAC,CAAC,OAAOC,KAAK,EAAE;UACZF,cAAM,CAACE,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;QACjE;MACJ,CAAC;MAAA,SAZKkG,OAAOA,CAAA;QAAA,OAAAH,QAAA,CAAA7F,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAP+F,OAAO;IAAA;EAAA;IAAAxG,GAAA;IAAAC,KAAA,EAcb,SAAQoB,gBAAgBA,CAACoF,GAAQ,EAAEC,WAAiB,EAAW;MAC3D,IAAI,CAACD,GAAG,CAACE,OAAO,EAAE,OAAO,KAAK;MAE9B,IAAM9F,GAAG,GAAG6F,WAAW;MACvB,IAAME,cAAc,GAAG/F,GAAG,CAACgG,QAAQ,CAAC,CAAC,GAAG,EAAE,GAAGhG,GAAG,CAACiG,UAAU,CAAC,CAAC;MAE7D,IAAAC,qBAAA,GAAiCN,GAAG,CAACO,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;QAAAC,sBAAA,OAAAC,eAAA,CAAA1H,OAAA,EAAAoH,qBAAA;QAA9DO,SAAS,GAAAF,sBAAA;QAAEG,WAAW,GAAAH,sBAAA;MAC7B,IAAAI,qBAAA,GAA6Bf,GAAG,CAAChF,OAAO,CAACwF,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;QAAAM,sBAAA,OAAAJ,eAAA,CAAA1H,OAAA,EAAA6H,qBAAA;QAAxDE,OAAO,GAAAD,sBAAA;QAAEE,SAAS,GAAAF,sBAAA;MAEzB,IAAMG,YAAY,GAAGN,SAAS,GAAG,EAAE,GAAGC,WAAW;MACjD,IAAMM,UAAU,GAAGH,OAAO,GAAG,EAAE,GAAGC,SAAS;MAG3C,IAAIC,YAAY,GAAGC,UAAU,EAAE;QAC3B,OAAOjB,cAAc,IAAIgB,YAAY,IAAIhB,cAAc,IAAIiB,UAAU;MACzE;MAEA,OAAOjB,cAAc,IAAIgB,YAAY,IAAIhB,cAAc,IAAIiB,UAAU;IACzE;EAAC;IAAA7H,GAAA;IAAAC,KAAA,EAED,SAAQyB,sBAAsBA,CAAC+E,GAAQ,EAAEC,WAAiB,EAAQ;MAC9D,IAAAoB,sBAAA,GAA6BrB,GAAG,CAAChF,OAAO,CAACwF,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;QAAAY,sBAAA,OAAAV,eAAA,CAAA1H,OAAA,EAAAmI,sBAAA;QAAxDJ,OAAO,GAAAK,sBAAA;QAAEJ,SAAS,GAAAI,sBAAA;MACzB,IAAMtG,OAAO,GAAG,IAAIX,IAAI,CAAC4F,WAAW,CAAC;MACrCjF,OAAO,CAACuG,QAAQ,CAACN,OAAO,EAAEC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;MAG1C,IAAIlG,OAAO,IAAIiF,WAAW,EAAE;QACxBjF,OAAO,CAACwG,OAAO,CAACxG,OAAO,CAACyG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;MAC1C;MAEA,OAAOzG,OAAO;IAClB;EAAC;AAAA","ignoreList":[]}