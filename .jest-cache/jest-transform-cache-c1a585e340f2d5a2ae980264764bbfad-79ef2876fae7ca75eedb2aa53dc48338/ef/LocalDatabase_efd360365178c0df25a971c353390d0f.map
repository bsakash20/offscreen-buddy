{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_uuid","LocalDatabase","exports","config","_classCallCheck2","default","db","isInitialized","encryptionKey","cache","Map","CACHE_PREFIX","METADATA_KEY","_createClass2","key","value","_initialize","_asyncToGenerator2","setupEncryption","createMockDatabase","createSchema","initializeCache","loadCache","console","log","error","Error","initialize","apply","arguments","_executeQuery","query","_this","params","length","undefined","encryptFields","decryptFields","Promise","resolve","reject","transaction","tx","encryptedParams","encryptParameters","executeSql","_tx","_ref","rows","results","i","row","item","decryptRow","push","executeQuery","_x","_insert","table","data","options","_this2","id","uuidv4","timestamp","Date","toISOString","encryptedData","encryptData","columns","Object","keys","values","placeholders","map","join","concat","_ref2","insertId","updateCache","cacheExpiry","returnId","String","insert","_x2","_x3","_x4","_update","_this3","setClause","col","_result","update","_x5","_x6","_x7","_x8","_delete2","_this4","removeFromCache","delete","_x9","_x0","_select","_options$columns","cachedData","getFromCache","where","conditions","_toConsumableArray2","orderBy","orderDirection","limit","offset","cacheResults","select","_x1","_x10","_getTimerSessions","userId","sessions","user_id","session","assign","synced","getTimerSessions","_x11","_saveTimerSession","sessionData","saveTimerSession","_x12","_getMilestoneProgress","progress","p","getMilestoneProgress","_x13","_saveMilestoneProgress","progressData","saveMilestoneProgress","_x14","_getStats","dbSize","getDatabaseSize","tableCount","getTableCount","indexCount","getIndexCount","fragmentation","getFragmentation","totalSize","total","usedSize","used","freeSize","free","lastVacuum","fragmentationPercentage","getStats","_cleanupCache","_this5","cleaned","now","_ref3","entries","_ref4","_slicedToArray2","expiresAt","getTime","AsyncStorage","getAllKeys","cacheKeys","filter","startsWith","getItem","JSON","parse","removeItem","warn","cleanupCache","_vacuum","vacuum","getStatus","initialized","connected","encrypted","stats","_dispose","close","clear","dispose","callback","sql","success","Math","floor","random","rowsAffected","index","_setupEncryption","existingKey","keyArray","btoa","toString","setItem","_createSchema","schema","statements","split","stmt","trim","statement","_initializeCache","_loadCache","_this6","set","fields","field","stringify","decrypted","atob","expiry","size","createdAt","tags","catch","cacheSize","firstKey","next","get","_getDatabaseSize","_getTableCount","_result$","result","count","_unused","_getIndexCount","_result$2","_unused2","_getFragmentation","getInstance","instance","defaultConfig","name","version","enableWAL","enableForeignKeys","tempStore","pageSize","localDatabase","_default"],"sources":["LocalDatabase.ts"],"sourcesContent":["/**\n * Local Database Service with SQLite\n * Provides encrypted, fast local storage with full CRUD operations\n */\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n    DatabaseConfig,\n    DatabaseStats,\n    StorageItem,\n    OfflineOperation,\n    OfflineTimerSession,\n    OfflineMilestoneProgress,\n    CacheConfig,\n    DatabaseStatus,\n    OfflineError,\n} from './types';\n\n// Mock SQLite types for development\ninterface SQLiteWebSQLDatabase {\n    transaction(callback: (tx: any) => void): void;\n    close(): void;\n}\n\ninterface SQLiteWebSQLTransaction {\n    executeSql(\n        sql: string,\n        args?: any[],\n        success?: (tx: any, results: any) => void,\n        error?: (tx: any, error: any) => boolean\n    ): void;\n}\n\ninterface SQLiteWebSQLResultSet {\n    insertId: number;\n    rowsAffected: number;\n    rows: {\n        length: number;\n        item(index: number): any;\n    };\n}\n\nexport class LocalDatabase {\n    private static instance: LocalDatabase;\n    private db: SQLiteWebSQLDatabase | null = null;\n    private config: DatabaseConfig;\n    private isInitialized = false;\n    private encryptionKey: string | null = null;\n    private cache = new Map<string, StorageItem>();\n    private readonly CACHE_PREFIX = 'offline_cache_';\n    private readonly METADATA_KEY = 'offline_db_metadata';\n\n    private constructor(config: DatabaseConfig) {\n        this.config = config;\n    }\n\n    public static getInstance(config?: DatabaseConfig): LocalDatabase {\n        if (!LocalDatabase.instance) {\n            const defaultConfig: DatabaseConfig = {\n                name: 'offscreen_buddy_offline',\n                version: 1,\n                size: 50 * 1024 * 1024, // 50MB\n                enableWAL: true,\n                enableForeignKeys: true,\n                tempStore: 'file',\n                cacheSize: 1000,\n                pageSize: 4096,\n            };\n            LocalDatabase.instance = new LocalDatabase(config || defaultConfig);\n        }\n        return LocalDatabase.instance;\n    }\n\n    /**\n     * Initialize the database with encryption and schema\n     */\n    public async initialize(): Promise<void> {\n        if (this.isInitialized) return;\n\n        try {\n            // Generate or retrieve encryption key\n            await this.setupEncryption();\n\n            // Mock database connection for now - in real implementation would use expo-sqlite\n            this.db = this.createMockDatabase();\n\n            // Initialize schema\n            await this.createSchema();\n\n            // Setup cache\n            await this.initializeCache();\n\n            // Load cached items\n            await this.loadCache();\n\n            this.isInitialized = true;\n            console.log('✅ LocalDatabase initialized successfully');\n        } catch (error) {\n            console.error('❌ Failed to initialize LocalDatabase:', error);\n            throw new Error(`Database initialization failed: ${error}`);\n        }\n    }\n\n    /**\n     * Execute a SQL query with optional encryption/decryption\n     */\n    public async executeQuery<T = any>(\n        query: string,\n        params: any[] = [],\n        encryptFields?: string[],\n        decryptFields?: string[]\n    ): Promise<T[]> {\n        if (!this.db || !this.isInitialized) {\n            throw new Error('Database not initialized');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db!.transaction((tx: SQLiteWebSQLTransaction) => {\n                // Encrypt parameters if needed\n                const encryptedParams = encryptFields\n                    ? this.encryptParameters(params, encryptFields)\n                    : params;\n\n                tx.executeSql(\n                    query,\n                    encryptedParams,\n                    (_tx: SQLiteWebSQLTransaction, { rows }: SQLiteWebSQLResultSet) => {\n                        const results: T[] = [];\n                        for (let i = 0; i < rows.length; i++) {\n                            let row = rows.item(i) as T;\n\n                            // Decrypt fields if needed\n                            if (decryptFields) {\n                                row = this.decryptRow(row, decryptFields);\n                            }\n\n                            results.push(row);\n                        }\n                        resolve(results);\n                    },\n                    (_tx: SQLiteWebSQLTransaction, error: any) => {\n                        console.error('SQL Error:', error);\n                        reject(new Error(`SQL execution failed: ${error}`));\n                        return true; // rollback\n                    }\n                );\n            });\n        });\n    }\n\n    /**\n     * Insert a record into the database\n     */\n    public async insert(\n        table: string,\n        data: Record<string, any>,\n        options?: {\n            encryptFields?: string[];\n            returnId?: boolean;\n            cache?: boolean;\n            cacheExpiry?: number;\n        }\n    ): Promise<string> {\n        try {\n            if (!this.db || !this.isInitialized) {\n                throw new Error('Database not initialized');\n            }\n\n            const id = uuidv4();\n            const timestamp = new Date().toISOString();\n            const encryptedData = options?.encryptFields\n                ? this.encryptData(data, options.encryptFields)\n                : data;\n\n            const columns = Object.keys(encryptedData);\n            const values = Object.values(encryptedData);\n            const placeholders = columns.map(() => '?').join(', ');\n\n            const query = `\n                INSERT INTO ${table} (id, ${columns.join(', ')}, created_at, updated_at)\n                VALUES (?, ${placeholders}, ?, ?)\n            `;\n\n            return new Promise((resolve, reject) => {\n                this.db!.transaction((tx: SQLiteWebSQLTransaction) => {\n                    tx.executeSql(\n                        query,\n                        [id, ...values, timestamp, timestamp],\n                        (_tx: SQLiteWebSQLTransaction, { insertId }: SQLiteWebSQLResultSet) => {\n                            // Update cache if enabled\n                            if (options?.cache) {\n                                this.updateCache(table, id, data, options.cacheExpiry);\n                            }\n\n                            resolve(options?.returnId ? String(insertId) : id);\n                        },\n                        (_tx: SQLiteWebSQLTransaction, error: any) => {\n                            console.error('Insert error:', error);\n                            reject(new Error(`Insert failed: ${error}`));\n                            return true;\n                        }\n                    );\n                });\n            });\n        } catch (error) {\n            console.error('Insert operation failed:', error);\n            throw new Error(`Failed to insert into ${table}: ${error}`);\n        }\n    }\n\n    /**\n     * Update a record in the database\n     */\n    public async update(\n        table: string,\n        id: string,\n        data: Record<string, any>,\n        options?: {\n            encryptFields?: string[];\n            cache?: boolean;\n            cacheExpiry?: number;\n        }\n    ): Promise<void> {\n        try {\n            if (!this.db || !this.isInitialized) {\n                throw new Error('Database not initialized');\n            }\n\n            const timestamp = new Date().toISOString();\n            const encryptedData = options?.encryptFields\n                ? this.encryptData(data, options.encryptFields)\n                : data;\n\n            const columns = Object.keys(encryptedData);\n            const values = Object.values(encryptedData);\n            const setClause = columns.map(col => `${col} = ?`).join(', ');\n\n            const query = `\n                UPDATE ${table} \n                SET ${setClause}, updated_at = ?\n                WHERE id = ?\n            `;\n\n            return new Promise((resolve, reject) => {\n                this.db!.transaction((tx: SQLiteWebSQLTransaction) => {\n                    tx.executeSql(\n                        query,\n                        [...values, timestamp, id],\n                        (_tx: SQLiteWebSQLTransaction, _result: SQLiteWebSQLResultSet) => {\n                            // Update cache if enabled\n                            if (options?.cache) {\n                                this.updateCache(table, id, data, options.cacheExpiry);\n                            }\n\n                            resolve();\n                        },\n                        (_tx: SQLiteWebSQLTransaction, error: any) => {\n                            console.error('Update error:', error);\n                            reject(new Error(`Update failed: ${error}`));\n                            return true;\n                        }\n                    );\n                });\n            });\n        } catch (error) {\n            console.error('Update operation failed:', error);\n            throw new Error(`Failed to update ${table}:${id}: ${error}`);\n        }\n    }\n\n    /**\n     * Delete a record from the database\n     */\n    public async delete(table: string, id: string): Promise<void> {\n        try {\n            if (!this.db || !this.isInitialized) {\n                throw new Error('Database not initialized');\n            }\n\n            const query = `DELETE FROM ${table} WHERE id = ?`;\n\n            return new Promise((resolve, reject) => {\n                this.db!.transaction((tx: SQLiteWebSQLTransaction) => {\n                    tx.executeSql(\n                        query,\n                        [id],\n                        (_tx: SQLiteWebSQLTransaction, _result: SQLiteWebSQLResultSet) => {\n                            // Remove from cache\n                            this.removeFromCache(table, id);\n                            resolve();\n                        },\n                        (_tx: SQLiteWebSQLTransaction, error: any) => {\n                            console.error('Delete error:', error);\n                            reject(new Error(`Delete failed: ${error}`));\n                            return true;\n                        }\n                    );\n                });\n            });\n        } catch (error) {\n            console.error('Delete operation failed:', error);\n            throw new Error(`Failed to delete from ${table}:${id}: ${error}`);\n        }\n    }\n\n    /**\n     * Select records from the database with caching\n     */\n    public async select<T = any>(\n        table: string,\n        options?: {\n            where?: Record<string, any>;\n            columns?: string[];\n            limit?: number;\n            offset?: number;\n            orderBy?: string;\n            orderDirection?: 'ASC' | 'DESC';\n            cache?: boolean;\n            cacheExpiry?: number;\n            decryptFields?: string[];\n        }\n    ): Promise<T[]> {\n        try {\n            // Check cache first if enabled\n            if (options?.cache) {\n                const cachedData = this.getFromCache(table, options);\n                if (cachedData) {\n                    return cachedData as T[];\n                }\n            }\n\n            let query = `SELECT ${options?.columns?.join(', ') || '*'} FROM ${table}`;\n            const params: any[] = [];\n\n            if (options?.where) {\n                const conditions = Object.keys(options.where).map(key => `${key} = ?`);\n                query += ` WHERE ${conditions.join(' AND ')}`;\n                params.push(...Object.values(options.where));\n            }\n\n            if (options?.orderBy) {\n                query += ` ORDER BY ${options.orderBy} ${options.orderDirection || 'ASC'}`;\n            }\n\n            if (options?.limit) {\n                query += ` LIMIT ${options.limit}`;\n                if (options?.offset) {\n                    query += ` OFFSET ${options.offset}`;\n                }\n            }\n\n            const results = await this.executeQuery<T>(query, params, undefined, options?.decryptFields);\n\n            // Cache results if enabled\n            if (options?.cache) {\n                this.cacheResults(table, options, results, options.cacheExpiry);\n            }\n\n            return results;\n        } catch (error) {\n            console.error('Select operation failed:', error);\n            throw new Error(`Failed to select from ${table}: ${error}`);\n        }\n    }\n\n    /**\n     * Get timer sessions with offline support\n     */\n    public async getTimerSessions(userId: string): Promise<OfflineTimerSession[]> {\n        const sessions = await this.select<OfflineTimerSession>('timer_sessions', {\n            where: { user_id: userId },\n            orderBy: 'start_time',\n            orderDirection: 'DESC',\n            cache: true,\n            cacheExpiry: 300000, // 5 minutes\n        });\n\n        return sessions.map(session => ({\n            ...session,\n            synced: true, // Mark as synced since it's from local DB\n        }));\n    }\n\n    /**\n     * Save timer session offline\n     */\n    public async saveTimerSession(session: Omit<OfflineTimerSession, 'id' | 'synced'>): Promise<string> {\n        const sessionData = {\n            ...session,\n            id: uuidv4(),\n            synced: false, // Will be synced later\n        };\n\n        return await this.insert('timer_sessions', sessionData, {\n            cache: true,\n            returnId: true,\n        });\n    }\n\n    /**\n     * Get milestone progress with offline support\n     */\n    public async getMilestoneProgress(userId: string): Promise<OfflineMilestoneProgress[]> {\n        const progress = await this.select<OfflineMilestoneProgress>('milestone_progress', {\n            where: { user_id: userId },\n            orderBy: 'last_updated',\n            orderDirection: 'DESC',\n            cache: true,\n            cacheExpiry: 600000, // 10 minutes\n        });\n\n        return progress.map(p => ({\n            ...p,\n            synced: true, // Mark as synced since it's from local DB\n        }));\n    }\n\n    /**\n     * Save milestone progress offline\n     */\n    public async saveMilestoneProgress(progress: Omit<OfflineMilestoneProgress, 'id' | 'synced'>): Promise<string> {\n        const progressData = {\n            ...progress,\n            id: uuidv4(),\n            synced: false, // Will be synced later\n        };\n\n        return await this.insert('milestone_progress', progressData, {\n            cache: true,\n            returnId: true,\n        });\n    }\n\n    /**\n     * Get database statistics\n     */\n    public async getStats(): Promise<DatabaseStats> {\n        try {\n            const dbSize = await this.getDatabaseSize();\n            const tableCount = await this.getTableCount();\n            const indexCount = await this.getIndexCount();\n            const fragmentation = await this.getFragmentation();\n\n            return {\n                totalSize: dbSize.total,\n                usedSize: dbSize.used,\n                freeSize: dbSize.free,\n                tableCount,\n                indexCount,\n                lastVacuum: new Date(), // Simplified\n                fragmentationPercentage: fragmentation,\n            };\n        } catch (error) {\n            console.error('Failed to get database stats:', error);\n            throw new Error(`Database stats failed: ${error}`);\n        }\n    }\n\n    /**\n     * Clean up expired cache entries\n     */\n    public async cleanupCache(): Promise<number> {\n        let cleaned = 0;\n        const now = Date.now();\n\n        for (const [key, item] of this.cache.entries()) {\n            if (item.expiresAt && now > item.expiresAt.getTime()) {\n                this.cache.delete(key);\n                cleaned++;\n            }\n        }\n\n        // Also clean AsyncStorage cache\n        try {\n            const keys = await AsyncStorage.getAllKeys();\n            const cacheKeys = keys.filter(key => key.startsWith(this.CACHE_PREFIX));\n\n            for (const key of cacheKeys) {\n                const value = await AsyncStorage.getItem(key);\n                if (value) {\n                    const item: StorageItem = JSON.parse(value);\n                    if (item.expiresAt && now > new Date(item.expiresAt).getTime()) {\n                        await AsyncStorage.removeItem(key);\n                        cleaned++;\n                    }\n                }\n            }\n        } catch (error) {\n            console.warn('Failed to clean AsyncStorage cache:', error);\n        }\n\n        return cleaned;\n    }\n\n    /**\n     * Vacuum the database to reclaim space\n     */\n    public async vacuum(): Promise<void> {\n        try {\n            await this.executeQuery('VACUUM');\n            console.log('Database vacuumed successfully');\n        } catch (error) {\n            console.error('Failed to vacuum database:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Get service status\n     */\n    public getStatus(): DatabaseStatus {\n        return {\n            initialized: this.isInitialized,\n            connected: this.db !== null,\n            encrypted: !!this.encryptionKey,\n            stats: {\n                totalSize: 0,\n                usedSize: 0,\n                freeSize: 0,\n                tableCount: 0,\n                indexCount: 0,\n                lastVacuum: new Date(),\n                fragmentationPercentage: 0,\n            },\n        };\n    }\n\n    /**\n     * Close database connection\n     */\n    public async dispose(): Promise<void> {\n        if (this.db) {\n            this.db.close();\n            this.db = null;\n        }\n        this.cache.clear();\n        this.isInitialized = false;\n        console.log('LocalDatabase disposed');\n    }\n\n    // Private helper methods\n\n    private createMockDatabase(): SQLiteWebSQLDatabase {\n        // Mock database for development - in production would use real expo-sqlite\n        return {\n            transaction(callback: (tx: any) => void): void {\n                callback({\n                    executeSql: (sql: string, params?: any[], success?: (tx: any, result: any) => void, error?: (tx: any, error: any) => boolean) => {\n                        console.log('Mock SQL:', sql, params);\n                        // Mock success response\n                        if (success) {\n                            success({}, {\n                                insertId: Math.floor(Math.random() * 1000),\n                                rowsAffected: 1,\n                                rows: {\n                                    length: 0,\n                                    item: (index: number) => ({})\n                                }\n                            });\n                        }\n                    }\n                });\n            },\n            close(): void {\n                console.log('Database closed');\n            }\n        };\n    }\n\n    private async setupEncryption(): Promise<void> {\n        try {\n            // Try to get existing key from AsyncStorage\n            const existingKey = await AsyncStorage.getItem('db_encryption_key');\n\n            if (existingKey) {\n                this.encryptionKey = existingKey;\n            } else {\n                // Generate new key\n                const keyArray = btoa(uuidv4() + Date.now().toString());\n                this.encryptionKey = keyArray;\n\n                // Store securely\n                await AsyncStorage.setItem('db_encryption_key', keyArray);\n            }\n        } catch (error) {\n            console.warn('Encryption setup failed, using unencrypted mode:', error);\n            this.encryptionKey = null;\n        }\n    }\n\n    private async createSchema(): Promise<void> {\n        const schema = `\n            -- Users table\n            CREATE TABLE IF NOT EXISTS users (\n                id TEXT PRIMARY KEY,\n                email TEXT UNIQUE,\n                name TEXT,\n                preferences TEXT,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Timer sessions table\n            CREATE TABLE IF NOT EXISTS timer_sessions (\n                id TEXT PRIMARY KEY,\n                timer_id TEXT,\n                user_id TEXT,\n                start_time TEXT,\n                end_time TEXT,\n                duration INTEGER,\n                type TEXT,\n                paused BOOLEAN,\n                pause_duration INTEGER,\n                completed BOOLEAN,\n                milestones TEXT,\n                synced BOOLEAN,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Milestone progress table\n            CREATE TABLE IF NOT EXISTS milestone_progress (\n                id TEXT PRIMARY KEY,\n                milestone_id TEXT,\n                user_id TEXT,\n                progress REAL,\n                completed BOOLEAN,\n                last_updated TEXT,\n                unlocked_at TEXT,\n                synced BOOLEAN,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Notifications table\n            CREATE TABLE IF NOT EXISTS notifications (\n                id TEXT PRIMARY KEY,\n                user_id TEXT,\n                type TEXT,\n                title TEXT,\n                message TEXT,\n                data TEXT,\n                scheduled_for TEXT,\n                sent BOOLEAN,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Sync queue table for offline operations\n            CREATE TABLE IF NOT EXISTS sync_queue (\n                id TEXT PRIMARY KEY,\n                operation_type TEXT,\n                table_name TEXT,\n                record_id TEXT,\n                data TEXT,\n                priority INTEGER,\n                retry_count INTEGER,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Settings table\n            CREATE TABLE IF NOT EXISTS settings (\n                id TEXT PRIMARY KEY,\n                user_id TEXT,\n                key TEXT,\n                value TEXT,\n                created_at TEXT,\n                updated_at TEXT\n            );\n\n            -- Create indexes for performance\n            CREATE INDEX IF NOT EXISTS idx_timer_sessions_user_id ON timer_sessions(user_id);\n            CREATE INDEX IF NOT EXISTS idx_timer_sessions_start_time ON timer_sessions(start_time);\n            CREATE INDEX IF NOT EXISTS idx_milestone_progress_user_id ON milestone_progress(user_id);\n            CREATE INDEX IF NOT EXISTS idx_milestone_progress_milestone_id ON milestone_progress(milestone_id);\n            CREATE INDEX IF NOT EXISTS idx_notifications_user_id ON notifications(user_id);\n            CREATE INDEX IF NOT EXISTS idx_sync_queue_priority ON sync_queue(priority);\n            CREATE INDEX IF NOT EXISTS idx_settings_user_key ON settings(user_id, key);\n        `;\n\n        const statements = schema.split(';').filter(stmt => stmt.trim());\n\n        for (const statement of statements) {\n            await this.executeQuery(statement);\n        }\n    }\n\n    private async initializeCache(): Promise<void> {\n        // Initialize in-memory cache with LRU eviction\n        this.cache = new Map();\n    }\n\n    private async loadCache(): Promise<void> {\n        try {\n            const keys = await AsyncStorage.getAllKeys();\n            const cacheKeys = keys.filter(key => key.startsWith(this.CACHE_PREFIX));\n\n            for (const key of cacheKeys) {\n                const value = await AsyncStorage.getItem(key);\n                if (value) {\n                    const item: StorageItem = JSON.parse(value);\n                    if (!item.expiresAt || Date.now() < new Date(item.expiresAt).getTime()) {\n                        this.cache.set(key, item);\n                    } else {\n                        await AsyncStorage.removeItem(key);\n                    }\n                }\n            }\n        } catch (error) {\n            console.warn('Failed to load cache from AsyncStorage:', error);\n        }\n    }\n\n    private encryptData(data: Record<string, any>, fields: string[]): Record<string, any> {\n        if (!this.encryptionKey) return data;\n\n        const encrypted = { ...data };\n        for (const field of fields) {\n            if (encrypted[field]) {\n                // Simple encryption - in production, use proper encryption\n                encrypted[field] = btoa(JSON.stringify(encrypted[field]));\n            }\n        }\n        return encrypted;\n    }\n\n    private decryptRow<T = any>(row: T, fields: string[]): T {\n        if (!this.encryptionKey) return row;\n\n        const decrypted = { ...row } as any;\n        for (const field of fields) {\n            if (decrypted[field]) {\n                try {\n                    decrypted[field] = JSON.parse(atob(decrypted[field]));\n                } catch (error) {\n                    console.warn(`Failed to decrypt field ${field}:`, error);\n                }\n            }\n        }\n        return decrypted;\n    }\n\n    private encryptParameters(params: any[], encryptFields: string[]): any[] {\n        // Simplified parameter encryption\n        return params;\n    }\n\n    private updateCache(table: string, id: string, data: any, expiry?: number): void {\n        const key = `${this.CACHE_PREFIX}${table}_${id}`;\n        const item: StorageItem = {\n            key,\n            value: data,\n            size: JSON.stringify(data).length,\n            createdAt: new Date(),\n            expiresAt: expiry ? new Date(Date.now() + expiry) : undefined,\n            tags: [table],\n        };\n\n        this.cache.set(key, item);\n\n        // Also store in AsyncStorage for persistence\n        AsyncStorage.setItem(key, JSON.stringify(item)).catch(error => {\n            console.warn('Failed to cache item in AsyncStorage:', error);\n        });\n\n        // LRU eviction if cache is full\n        if (this.cache.size > this.config.cacheSize) {\n            const firstKey = this.cache.keys().next().value;\n            if (firstKey) {\n                this.cache.delete(firstKey);\n                AsyncStorage.removeItem(firstKey).catch(console.warn);\n            }\n        }\n    }\n\n    private getFromCache(table: string, options: any): any | null {\n        // Simplified cache key generation\n        const key = `${this.CACHE_PREFIX}${table}_${JSON.stringify(options.where || {})}`;\n        const item = this.cache.get(key);\n\n        if (item && (!item.expiresAt || Date.now() < item.expiresAt.getTime())) {\n            return item.value;\n        }\n\n        return null;\n    }\n\n    private cacheResults(table: string, options: any, results: any[], expiry?: number): void {\n        if (!results.length) return;\n\n        const key = `${this.CACHE_PREFIX}${table}_${JSON.stringify(options.where || {})}`;\n        const item: StorageItem = {\n            key,\n            value: results,\n            size: JSON.stringify(results).length,\n            createdAt: new Date(),\n            expiresAt: expiry ? new Date(Date.now() + expiry) : undefined,\n            tags: [table],\n        };\n\n        this.cache.set(key, item);\n        AsyncStorage.setItem(key, JSON.stringify(item)).catch(console.warn);\n    }\n\n    private removeFromCache(table: string, id: string): void {\n        const key = `${this.CACHE_PREFIX}${table}_${id}`;\n        this.cache.delete(key);\n        AsyncStorage.removeItem(key).catch(console.warn);\n    }\n\n    private async getDatabaseSize(): Promise<{ total: number; used: number; free: number }> {\n        // Simplified size calculation\n        return { total: this.config.size, used: 0, free: this.config.size };\n    }\n\n    private async getTableCount(): Promise<number> {\n        try {\n            const result = await this.executeQuery(\"SELECT COUNT(*) as count FROM sqlite_master WHERE type='table'\");\n            return result[0]?.count || 0;\n        } catch {\n            return 0;\n        }\n    }\n\n    private async getIndexCount(): Promise<number> {\n        try {\n            const result = await this.executeQuery(\"SELECT COUNT(*) as count FROM sqlite_master WHERE type='index'\");\n            return result[0]?.count || 0;\n        } catch {\n            return 0;\n        }\n    }\n\n    private async getFragmentation(): Promise<number> {\n        // Simplified fragmentation calculation\n        return 0;\n    }\n}\n\n// Export singleton instance\nexport const localDatabase = LocalDatabase.getInstance();\nexport default LocalDatabase;"],"mappings":"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","ignoreList":[]}