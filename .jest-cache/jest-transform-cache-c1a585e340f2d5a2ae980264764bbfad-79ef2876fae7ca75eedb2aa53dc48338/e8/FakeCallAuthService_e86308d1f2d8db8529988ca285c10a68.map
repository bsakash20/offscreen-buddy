{"version":3,"names":["_reactNative","require","_asyncStorage","_interopRequireDefault","_SecurityMonitor","_PrivacyManager","_types","FakeCallAuthenticationService","exports","config","_classCallCheck2","default","activeSessions","Map","subscriptionMonitors","auditLogs","Object","assign","enableProTierValidation","enableSubscriptionMonitoring","enableUsageQuotas","enableAuditLogging","maxDailyCalls","maxMonthlyCalls","proTierGracePeriod","subscriptionCheckInterval","_createClass2","key","value","_initialize","_asyncToGenerator2","loadActiveSessions","startSubscriptionMonitoring","initializePrivacyCompliance","securityMonitor","logSecurityEvent","size","console","log","error","initialize","apply","arguments","_validateProTierAccess","userId","session","getOrCreateAuthSession","isValid","validateSubscriptionStatus","subscriptionStatus","reason","quotaExceeded","checkUsageQuotas","dailyUsage","usageQuota","daily","used","monthlyUsage","monthly","validateProTierAccess","_x","_getSubscriptionStatus","updateSubscriptionStatus","isActive","tier","autoRenew","paymentMethod","trialUsed","getSubscriptionStatus","_x2","_logFeatureUsage","feature","metadata","auditEntry","timestamp","Date","action","usageAfter","addToAuditLog","shouldCountTowardsQuota","incrementUsageCount","subscriptionTier","logFeatureUsage","_x3","_x4","_x5","_checkFeatureLimit","_this","limits","getFeatureLimits","currentUsage","limit","auditLog","getAuditLog","featureUsage","filter","entry","isWithinCurrentPeriod","length","allowed","resetAt","getNextResetTime","overageAllowed","checkFeatureLimit","_x6","_x7","_validateCallConfiguration","request","startTime","now","hasProAccess","success","createCallError","CallErrorType","PRO_TIER_REQUIRED","requestId","generateRequestId","duration","platform","callerValidation","validateCallerIDSafety","callConfig","callerInfo","proFeatures","getAvailableProFeatures","riskLevel","assessCallRisk","warnings","needsReview","push","result","isSafe","callId","id","data","UNKNOWN_ERROR","validateCallConfiguration","_x8","_getUsageStatistics","_this2","startOfDay","getFullYear","getMonth","getDate","startOfMonth","totalUsage","usageEntries","remainingQuota","Math","max","Platform","OS","getUsageStatistics","_x9","_dispose","forEach","interval","clearInterval","clear","saveActiveSessions","sessionsClosed","auditLogsCleared","dispose","_getOrCreateAuthSession","get","getSubscriptionFromStorage","createAuthSession","set","saveSessionToStorage","lastValidated","_x0","_createAuthSession","usageLimits","getUsageLimits","sessionId","generateSessionId","isProTier","featureAccess","customCallerId","advancedVoices","extendedScheduling","prioritySupport","analytics","teamCollaboration","permissions","microphone","notifications","calls","background","accessibility","auditEnabled","_x1","_x10","_validateSubscriptionStatus","status","expiresAt","graceEnd","gracePeriod","_x11","base","daily_calls","custom_voice_profiles","scheduled_calls","caller_id_customization","features","_validateCallerIDSafety","isFromSafeDatabase","checkSafeDatabase","name","phoneNumber","suspiciousPatterns","checkSuspiciousPatterns","phoneValidation","validatePhoneNumber","reasons","join","_x12","riskScore","callerType","autoAnswer","callDuration","quotaFeatures","includes","_incrementUsageCount","_x13","_x14","_checkUsageQuotas","_x15","period","tomorrow","setDate","setHours","nextMonth","setMonth","userLog","splice","_checkSafeDatabase","_x16","_x17","_checkSuspiciousPatterns","patterns","match","_x18","_validatePhoneNumber","phoneRegex","cleaned","replace","test","_x19","_getSubscriptionFromStorage","stored","AsyncStorage","getItem","parsed","JSON","parse","_x20","_updateSubscriptionStatus","_x21","_this3","monitor","setInterval","_initializePrivacyCompliance","privacySettings","privacyManager","getPrivacySettings","random","toString","substring","type","message","code","recoverable","suggestedAction","_loadActiveSessions","map","_ref2","_ref3","_slicedToArray2","_saveActiveSessions","sessionsArray","Array","from","entries","serializable","_ref4","_ref5","toISOString","setItem","stringify","_saveSessionToStorage","_x22","fakeCallAuthService"],"sources":["FakeCallAuthService.ts"],"sourcesContent":["/**\n * Fake Call Authentication Service\n * Pro tier authentication and security integration for fake call notification system\n * \n * Extends existing AuthenticationService and integrates with AuthContext for Pro tier validation\n * Provides feature gating, subscription monitoring, and audit logging for fake call usage\n */\n\nimport { Platform } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { authenticationService } from '../security/AuthenticationService';\nimport { securityMonitor } from '../security/SecurityMonitor';\nimport { privacyManager } from '../security/PrivacyManager';\nimport { CallError, CallErrorType, FakeCallResult, ProTierSecurity, SubscriptionStatus, FeatureLimitStatus, FakeCallConfig, CallerInfo } from './types';\n\nexport interface FakeCallAuthConfig {\n    enableProTierValidation: boolean;\n    enableSubscriptionMonitoring: boolean;\n    enableUsageQuotas: boolean;\n    enableAuditLogging: boolean;\n    maxDailyCalls: number;\n    maxMonthlyCalls: number;\n    proTierGracePeriod: number; // hours\n    subscriptionCheckInterval: number; // minutes\n}\n\nexport interface FakeCallAuthSession {\n    sessionId: string;\n    userId: string;\n    isProTier: boolean;\n    subscriptionStatus: SubscriptionStatus;\n    usageQuota: {\n        daily: { used: number; limit: number; resetAt: Date };\n        monthly: { used: number; limit: number; resetAt: Date };\n    };\n    featureAccess: {\n        customCallerId: boolean;\n        advancedVoices: boolean;\n        extendedScheduling: boolean;\n        prioritySupport: boolean;\n        analytics: boolean;\n        teamCollaboration: boolean;\n    };\n    permissions: {\n        microphone: boolean;\n        notifications: boolean;\n        calls: boolean;\n        background: boolean;\n        accessibility: boolean;\n    };\n    lastValidated: Date;\n    auditEnabled: boolean;\n}\n\nexport interface FakeCallAuthResult extends FakeCallResult<FakeCallAuthSession> {\n    data?: FakeCallAuthSession;\n}\n\nexport interface ProTierValidationRequest {\n    userId: string;\n    featuresRequested: string[];\n    callConfig: FakeCallConfig;\n    platform: Platform;\n}\n\nexport interface UsageLimitCheck {\n    userId: string;\n    action: 'schedule' | 'start' | 'modify';\n    feature: string;\n    metadata?: Record<string, any>;\n}\n\nexport class FakeCallAuthenticationService implements ProTierSecurity {\n    private config: FakeCallAuthConfig;\n    private activeSessions: Map<string, FakeCallAuthSession> = new Map();\n    private subscriptionMonitors: Map<string, any> = new Map();\n    private auditLogs: Map<string, any[]> = new Map();\n\n    constructor(config?: Partial<FakeCallAuthConfig>) {\n        this.config = {\n            enableProTierValidation: true,\n            enableSubscriptionMonitoring: true,\n            enableUsageQuotas: true,\n            enableAuditLogging: true,\n            maxDailyCalls: 100,\n            maxMonthlyCalls: 2000,\n            proTierGracePeriod: 24,\n            subscriptionCheckInterval: 15,\n            ...config\n        };\n    }\n\n    /**\n     * Initialize fake call authentication service\n     */\n    async initialize(): Promise<void> {\n        try {\n            // Load existing sessions from storage\n            await this.loadActiveSessions();\n\n            // Start subscription monitoring for active Pro users\n            this.startSubscriptionMonitoring();\n\n            // Initialize privacy compliance\n            await this.initializePrivacyCompliance();\n\n            // Log initialization\n            await securityMonitor.logSecurityEvent('fake_call_auth_initialized', {\n                config: this.config,\n                activeSessions: this.activeSessions.size\n            });\n\n            console.log('üîê FakeCall Authentication Service initialized');\n        } catch (error) {\n            console.error('Failed to initialize FakeCall Authentication Service:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Validate Pro tier access for fake call features\n     */\n    async validateProTierAccess(userId: string): Promise<boolean> {\n        try {\n            const session = await this.getOrCreateAuthSession(userId);\n\n            // Check subscription status\n            const isValid = await this.validateSubscriptionStatus(session.subscriptionStatus);\n\n            if (!isValid) {\n                await securityMonitor.logSecurityEvent('fake_call_pro_tier_validation_failed', {\n                    userId,\n                    reason: 'invalid_subscription',\n                    subscriptionStatus: session.subscriptionStatus\n                });\n                return false;\n            }\n\n            // Check usage quotas\n            if (this.config.enableUsageQuotas) {\n                const quotaExceeded = await this.checkUsageQuotas(session);\n                if (quotaExceeded) {\n                    await securityMonitor.logSecurityEvent('fake_call_quota_exceeded', {\n                        userId,\n                        dailyUsage: session.usageQuota.daily.used,\n                        monthlyUsage: session.usageQuota.monthly.used\n                    });\n                    return false;\n                }\n            }\n\n            await securityMonitor.logSecurityEvent('fake_call_pro_tier_validated', {\n                userId,\n                subscriptionStatus: session.subscriptionStatus\n            });\n\n            return true;\n\n        } catch (error) {\n            console.error('Pro tier validation error:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Get subscription status for user\n     */\n    async getSubscriptionStatus(userId: string): Promise<SubscriptionStatus> {\n        try {\n            const session = await this.getOrCreateAuthSession(userId);\n\n            // Update subscription status if monitoring is enabled\n            if (this.config.enableSubscriptionMonitoring) {\n                await this.updateSubscriptionStatus(session);\n            }\n\n            return session.subscriptionStatus;\n        } catch (error) {\n            console.error('Failed to get subscription status:', error);\n            return {\n                isActive: false,\n                tier: 'free',\n                autoRenew: false,\n                paymentMethod: 'unknown',\n                trialUsed: false\n            };\n        }\n    }\n\n    /**\n     * Log feature usage for analytics and quota management\n     */\n    async logFeatureUsage(userId: string, feature: string, metadata?: Record<string, any>): Promise<void> {\n        try {\n            if (!this.config.enableAuditLogging) return;\n\n            const session = await this.getOrCreateAuthSession(userId);\n\n            // Add to audit log\n            const auditEntry = {\n                timestamp: new Date(),\n                feature,\n                action: 'usage',\n                metadata: metadata || {},\n                subscriptionStatus: session.subscriptionStatus,\n                usageAfter: {\n                    daily: session.usageQuota.daily.used + 1,\n                    monthly: session.usageQuota.monthly.used + 1\n                }\n            };\n\n            this.addToAuditLog(userId, auditEntry);\n\n            // Update usage quotas if applicable\n            if (this.config.enableUsageQuotas && this.shouldCountTowardsQuota(feature)) {\n                await this.incrementUsageCount(session, feature);\n            }\n\n            // Log to security monitor\n            await securityMonitor.logSecurityEvent('fake_call_feature_used', {\n                userId,\n                feature,\n                metadata,\n                subscriptionTier: session.subscriptionStatus.tier\n            });\n\n        } catch (error) {\n            console.error('Failed to log feature usage:', error);\n        }\n    }\n\n    /**\n     * Check feature limits and quotas\n     */\n    async checkFeatureLimit(userId: string, feature: string): Promise<FeatureLimitStatus> {\n        try {\n            const session = await this.getOrCreateAuthSession(userId);\n\n            // Determine limits based on subscription tier\n            const limits = this.getFeatureLimits(session.subscriptionStatus.tier);\n\n            let currentUsage = 0;\n            let limit = limits[feature] || 0;\n\n            // Get current usage from audit logs\n            const auditLog = this.getAuditLog(userId);\n            const featureUsage = auditLog.filter(entry =>\n                entry.feature === feature &&\n                entry.action === 'usage' &&\n                this.isWithinCurrentPeriod(entry.timestamp, 'daily')\n            );\n            currentUsage = featureUsage.length;\n\n            return {\n                allowed: currentUsage < limit,\n                currentUsage,\n                limit,\n                resetAt: this.getNextResetTime('daily'),\n                overageAllowed: session.subscriptionStatus.tier === 'enterprise'\n            };\n\n        } catch (error) {\n            console.error('Failed to check feature limit:', error);\n            return {\n                allowed: false,\n                currentUsage: 0,\n                limit: 0,\n                resetAt: new Date(),\n                overageAllowed: false\n            };\n        }\n    }\n\n    /**\n     * Validate call configuration and caller ID for Pro tier\n     */\n    async validateCallConfiguration(request: ProTierValidationRequest): Promise<FakeCallResult<{\n        isValid: boolean;\n        riskLevel: 'low' | 'medium' | 'high';\n        warnings: string[];\n        proFeatures: string[];\n    }>> {\n        try {\n            const startTime = Date.now();\n            const session = await this.getOrCreateAuthSession(request.userId);\n\n            // Check Pro tier access\n            const hasProAccess = await this.validateProTierAccess(request.userId);\n            if (!hasProAccess) {\n                return {\n                    success: false,\n                    error: this.createCallError(\n                        CallErrorType.PRO_TIER_REQUIRED,\n                        'Pro tier subscription required for this feature'\n                    ),\n                    metadata: {\n                        timestamp: new Date(),\n                        requestId: this.generateRequestId(),\n                        duration: Date.now() - startTime,\n                        platform: request.platform\n                    }\n                };\n            }\n\n            // Validate caller ID safety\n            const callerValidation = await this.validateCallerIDSafety(request.callConfig.callerInfo);\n\n            // Check Pro tier features availability\n            const proFeatures = this.getAvailableProFeatures(session.subscriptionStatus);\n\n            // Risk assessment\n            const riskLevel = this.assessCallRisk(request.callConfig, session);\n\n            const warnings: string[] = [];\n            if (callerValidation.needsReview) {\n                warnings.push('Caller ID requires manual review');\n            }\n            if (riskLevel === 'high') {\n                warnings.push('High risk call configuration detected');\n            }\n\n            const result = {\n                isValid: callerValidation.isSafe && riskLevel !== 'high',\n                riskLevel,\n                warnings,\n                proFeatures\n            };\n\n            // Log validation\n            await securityMonitor.logSecurityEvent('fake_call_config_validated', {\n                userId: request.userId,\n                callId: request.callConfig.callerInfo.id,\n                riskLevel,\n                proFeatures: proFeatures.length,\n                warnings: warnings.length\n            });\n\n            return {\n                success: true,\n                data: result,\n                metadata: {\n                    timestamp: new Date(),\n                    requestId: this.generateRequestId(),\n                    duration: Date.now() - startTime,\n                    platform: request.platform\n                }\n            };\n\n        } catch (error) {\n            console.error('Call configuration validation error:', error);\n            return {\n                success: false,\n                error: this.createCallError(\n                    CallErrorType.UNKNOWN_ERROR,\n                    'Configuration validation failed'\n                ),\n                metadata: {\n                    timestamp: new Date(),\n                    requestId: this.generateRequestId(),\n                    duration: Date.now() - Date.now(),\n                    platform: request.platform\n                }\n            };\n        }\n    }\n\n    /**\n     * Get current usage statistics for user\n     */\n    async getUsageStatistics(userId: string): Promise<FakeCallResult<{\n        dailyUsage: number;\n        monthlyUsage: number;\n        totalUsage: number;\n        featureUsage: Record<string, number>;\n        remainingQuota: {\n            daily: number;\n            monthly: number;\n        };\n    }>> {\n        try {\n            const session = await this.getOrCreateAuthSession(userId);\n            const auditLog = this.getAuditLog(userId);\n\n            const now = new Date();\n            const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n            const dailyUsage = auditLog.filter(entry =>\n                entry.timestamp >= startOfDay && this.shouldCountTowardsQuota(entry.feature)\n            ).length;\n\n            const monthlyUsage = auditLog.filter(entry =>\n                entry.timestamp >= startOfMonth && this.shouldCountTowardsQuota(entry.feature)\n            ).length;\n\n            const totalUsage = auditLog.filter(entry =>\n                this.shouldCountTowardsQuota(entry.feature)\n            ).length;\n\n            // Calculate feature usage breakdown\n            const featureUsage: Record<string, number> = {};\n            const usageEntries = auditLog.filter(entry =>\n                this.shouldCountTowardsQuota(entry.feature) &&\n                entry.timestamp >= startOfDay\n            );\n\n            for (const entry of usageEntries) {\n                featureUsage[entry.feature] = (featureUsage[entry.feature] || 0) + 1;\n            }\n\n            return {\n                success: true,\n                data: {\n                    dailyUsage,\n                    monthlyUsage,\n                    totalUsage,\n                    featureUsage,\n                    remainingQuota: {\n                        daily: Math.max(0, session.usageQuota.daily.limit - dailyUsage),\n                        monthly: Math.max(0, session.usageQuota.monthly.limit - monthlyUsage)\n                    }\n                },\n                metadata: {\n                    timestamp: new Date(),\n                    requestId: this.generateRequestId(),\n                    duration: 0,\n                    platform: Platform.OS\n                }\n            };\n\n        } catch (error) {\n            console.error('Failed to get usage statistics:', error);\n            return {\n                success: false,\n                error: this.createCallError(\n                    CallErrorType.UNKNOWN_ERROR,\n                    'Failed to get usage statistics'\n                ),\n                metadata: {\n                    timestamp: new Date(),\n                    requestId: this.generateRequestId(),\n                    duration: 0,\n                    platform: Platform.OS\n                }\n            };\n        }\n    }\n\n    /**\n     * Dispose of authentication service\n     */\n    async dispose(): Promise<void> {\n        try {\n            // Clear subscription monitors\n            this.subscriptionMonitors.forEach(interval => clearInterval(interval));\n            this.subscriptionMonitors.clear();\n\n            // Save active sessions\n            await this.saveActiveSessions();\n\n            // Clear memory\n            this.activeSessions.clear();\n            this.auditLogs.clear();\n\n            await securityMonitor.logSecurityEvent('fake_call_auth_disposed', {\n                sessionsClosed: this.activeSessions.size,\n                auditLogsCleared: this.auditLogs.size\n            });\n\n            console.log('üîê FakeCall Authentication Service disposed');\n        } catch (error) {\n            console.error('Error disposing FakeCall Authentication Service:', error);\n        }\n    }\n\n    /**\n     * Private helper methods\n     */\n    private async getOrCreateAuthSession(userId: string): Promise<FakeCallAuthSession> {\n        let session = this.activeSessions.get(userId);\n\n        if (!session) {\n            // Create new session\n            const subscriptionStatus = await this.getSubscriptionFromStorage(userId);\n            session = await this.createAuthSession(userId, subscriptionStatus);\n\n            this.activeSessions.set(userId, session);\n            await this.saveSessionToStorage(session);\n        }\n\n        // Update last validated time\n        session.lastValidated = new Date();\n\n        return session;\n    }\n\n    private async createAuthSession(userId: string, subscriptionStatus: SubscriptionStatus): Promise<FakeCallAuthSession> {\n        const usageLimits = this.getUsageLimits(subscriptionStatus.tier);\n\n        return {\n            sessionId: this.generateSessionId(),\n            userId,\n            isProTier: subscriptionStatus.tier !== 'free',\n            subscriptionStatus,\n            usageQuota: {\n                daily: {\n                    used: 0,\n                    limit: usageLimits.daily,\n                    resetAt: this.getNextResetTime('daily')\n                },\n                monthly: {\n                    used: 0,\n                    limit: usageLimits.monthly,\n                    resetAt: this.getNextResetTime('monthly')\n                }\n            },\n            featureAccess: {\n                customCallerId: subscriptionStatus.tier !== 'free',\n                advancedVoices: subscriptionStatus.tier === 'pro' || subscriptionStatus.tier === 'enterprise',\n                extendedScheduling: subscriptionStatus.tier === 'pro' || subscriptionStatus.tier === 'enterprise',\n                prioritySupport: subscriptionStatus.tier === 'pro' || subscriptionStatus.tier === 'enterprise',\n                analytics: subscriptionStatus.tier === 'enterprise',\n                teamCollaboration: subscriptionStatus.tier === 'enterprise'\n            },\n            permissions: {\n                microphone: true,\n                notifications: true,\n                calls: true,\n                background: true,\n                accessibility: true\n            },\n            lastValidated: new Date(),\n            auditEnabled: this.config.enableAuditLogging\n        };\n    }\n\n    private async validateSubscriptionStatus(status: SubscriptionStatus): Promise<boolean> {\n        // Check if subscription is active\n        if (!status.isActive) {\n            return false;\n        }\n\n        // Check expiration\n        if (status.expiresAt && new Date() > status.expiresAt) {\n            // Check grace period\n            const now = new Date();\n            const graceEnd = new Date(status.gracePeriod || now);\n            return now <= graceEnd;\n        }\n\n        return true;\n    }\n\n    private getUsageLimits(tier: 'free' | 'pro' | 'enterprise'): { daily: number; monthly: number } {\n        switch (tier) {\n            case 'pro':\n                return {\n                    daily: 50,\n                    monthly: 1000\n                };\n            case 'enterprise':\n                return {\n                    daily: 200,\n                    monthly: 5000\n                };\n            default:\n                return {\n                    daily: 5,\n                    monthly: 50\n                };\n        }\n    }\n\n    private getFeatureLimits(tier: 'free' | 'pro' | 'enterprise'): Record<string, number> {\n        const base = {\n            daily_calls: this.getUsageLimits(tier).daily,\n            custom_voice_profiles: tier === 'free' ? 1 : tier === 'pro' ? 5 : -1, // unlimited\n            scheduled_calls: this.getUsageLimits(tier).daily,\n            caller_id_customization: tier === 'free' ? 0 : 1\n        };\n\n        return base;\n    }\n\n    private getAvailableProFeatures(status: SubscriptionStatus): string[] {\n        const features: string[] = [];\n\n        if (status.tier !== 'free') {\n            features.push('custom_caller_id');\n            features.push('voice_profiles');\n            features.push('advanced_scheduling');\n        }\n\n        if (status.tier === 'pro' || status.tier === 'enterprise') {\n            features.push('extended_limits');\n            features.push('priority_support');\n            features.push('analytics');\n        }\n\n        if (status.tier === 'enterprise') {\n            features.push('team_collaboration');\n            features.push('custom_integrations');\n            features.push('white_label');\n        }\n\n        return features;\n    }\n\n    private async validateCallerIDSafety(callerInfo: CallerInfo): Promise<{\n        isSafe: boolean;\n        needsReview: boolean;\n        riskLevel: 'low' | 'medium' | 'high';\n        reasons: string[];\n    }> {\n        // Check if caller ID is from safe database\n        const isFromSafeDatabase = await this.checkSafeDatabase(callerInfo.name, callerInfo.phoneNumber);\n\n        // Check for suspicious patterns\n        const suspiciousPatterns = await this.checkSuspiciousPatterns(callerInfo);\n\n        // Validate phone number format\n        const phoneValidation = await this.validatePhoneNumber(callerInfo.phoneNumber);\n\n        const reasons: string[] = [];\n        let riskLevel: 'low' | 'medium' | 'high' = 'low';\n        let needsReview = false;\n\n        if (!isFromSafeDatabase) {\n            reasons.push('Caller ID not in verified database');\n            riskLevel = 'medium';\n        }\n\n        if (suspiciousPatterns.length > 0) {\n            reasons.push(`Suspicious patterns detected: ${suspiciousPatterns.join(', ')}`);\n            riskLevel = 'high';\n            needsReview = true;\n        }\n\n        if (!phoneValidation.isValid) {\n            reasons.push('Invalid phone number format');\n            riskLevel = 'high';\n        }\n\n        return {\n            isSafe: riskLevel !== 'high' && phoneValidation.isValid,\n            needsReview,\n            riskLevel,\n            reasons\n        };\n    }\n\n    private assessCallRisk(config: FakeCallConfig, session: FakeCallAuthSession): 'low' | 'medium' | 'high' {\n        let riskScore = 0;\n\n        // Check caller type\n        if (config.callerInfo.callerType === 'emergency') {\n            riskScore += 30;\n        }\n\n        // Check auto-answer setting\n        if (config.autoAnswer) {\n            riskScore += 20;\n        }\n\n        // Check duration\n        if (config.callDuration > 300) { // 5 minutes\n            riskScore += 15;\n        }\n\n        // Check for custom caller ID\n        if (!session.featureAccess.customCallerId) {\n            riskScore += 25;\n        }\n\n        // Convert score to risk level\n        if (riskScore >= 50) return 'high';\n        if (riskScore >= 25) return 'medium';\n        return 'low';\n    }\n\n    private shouldCountTowardsQuota(feature: string): boolean {\n        const quotaFeatures = [\n            'schedule_call',\n            'answer_call',\n            'custom_caller_id',\n            'voice_synthesis',\n            'advanced_scheduling'\n        ];\n        return quotaFeatures.includes(feature);\n    }\n\n    private async incrementUsageCount(session: FakeCallAuthSession, feature: string): Promise<void> {\n        if (!this.shouldCountTowardsQuota(feature)) return;\n\n        session.usageQuota.daily.used++;\n        session.usageQuota.monthly.used++;\n    }\n\n    private async checkUsageQuotas(session: FakeCallAuthSession): Promise<boolean> {\n        return session.usageQuota.daily.used >= session.usageQuota.daily.limit ||\n            session.usageQuota.monthly.used >= session.usageQuota.monthly.limit;\n    }\n\n    private getNextResetTime(period: 'daily' | 'monthly'): Date {\n        const now = new Date();\n\n        if (period === 'daily') {\n            const tomorrow = new Date(now);\n            tomorrow.setDate(tomorrow.getDate() + 1);\n            tomorrow.setHours(0, 0, 0, 0);\n            return tomorrow;\n        } else {\n            const nextMonth = new Date(now);\n            nextMonth.setMonth(nextMonth.getMonth() + 1);\n            nextMonth.setDate(1);\n            nextMonth.setHours(0, 0, 0, 0);\n            return nextMonth;\n        }\n    }\n\n    private isWithinCurrentPeriod(timestamp: Date, period: 'daily' | 'monthly'): boolean {\n        const now = new Date();\n\n        if (period === 'daily') {\n            const startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n            return timestamp >= startOfDay;\n        } else {\n            const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n            return timestamp >= startOfMonth;\n        }\n    }\n\n    private addToAuditLog(userId: string, entry: any): void {\n        const userLog = this.auditLogs.get(userId) || [];\n        userLog.push(entry);\n\n        // Keep only last 1000 entries per user\n        if (userLog.length > 1000) {\n            userLog.splice(0, userLog.length - 1000);\n        }\n\n        this.auditLogs.set(userId, userLog);\n    }\n\n    private getAuditLog(userId: string): any[] {\n        return this.auditLogs.get(userId) || [];\n    }\n\n    private async checkSafeDatabase(name: string, phoneNumber: string): Promise<boolean> {\n        // In production, would check against comprehensive safe database\n        // For now, basic validation\n        return name.length > 0 && phoneNumber.length > 0;\n    }\n\n    private async checkSuspiciousPatterns(callerInfo: CallerInfo): Promise<string[]> {\n        const patterns: string[] = [];\n\n        // Check for obviously fake patterns\n        if (callerInfo.name.match(/\\d/)) {\n            patterns.push('name_contains_numbers');\n        }\n\n        if (callerInfo.phoneNumber.match(/(\\d)\\1{6,}/)) {\n            patterns.push('repeated_digits');\n        }\n\n        return patterns;\n    }\n\n    private async validatePhoneNumber(phoneNumber: string): Promise<{ isValid: boolean }> {\n        // Basic phone number validation\n        const phoneRegex = /^[\\+]?[1-9][\\d]{0,15}$/;\n        const cleaned = phoneNumber.replace(/[\\s\\-\\(\\)]/g, '');\n\n        return {\n            isValid: phoneRegex.test(cleaned) && cleaned.length >= 7\n        };\n    }\n\n    private async getSubscriptionFromStorage(userId: string): Promise<SubscriptionStatus> {\n        try {\n            const stored = await AsyncStorage.getItem(`subscription_${userId}`);\n            if (stored) {\n                const parsed = JSON.parse(stored);\n                // Convert date strings back to Date objects\n                if (parsed.expiresAt) parsed.expiresAt = new Date(parsed.expiresAt);\n                if (parsed.gracePeriod) parsed.gracePeriod = new Date(parsed.gracePeriod);\n                return parsed;\n            }\n        } catch (error) {\n            console.error('Failed to load subscription from storage:', error);\n        }\n\n        // Default subscription (free tier)\n        return {\n            isActive: false,\n            tier: 'free',\n            autoRenew: false,\n            paymentMethod: 'unknown',\n            trialUsed: false\n        };\n    }\n\n    private async updateSubscriptionStatus(session: FakeCallAuthSession): Promise<void> {\n        // In production, would fetch fresh status from subscription service\n        // For now, just validate existing status\n        session.isProTier = await this.validateSubscriptionStatus(session.subscriptionStatus);\n    }\n\n    private startSubscriptionMonitoring(): void {\n        // Monitor all active Pro users for subscription changes\n        this.activeSessions.forEach((session, userId) => {\n            if (session.subscriptionStatus.isActive && session.subscriptionStatus.tier !== 'free') {\n                const monitor = setInterval(async () => {\n                    await this.updateSubscriptionStatus(session);\n\n                    if (!session.isProTier) {\n                        await securityMonitor.logSecurityEvent('fake_call_subscription_expired', {\n                            userId,\n                            subscriptionStatus: session.subscriptionStatus\n                        });\n                    }\n                }, this.config.subscriptionCheckInterval * 60 * 1000);\n\n                this.subscriptionMonitors.set(userId, monitor);\n            }\n        });\n    }\n\n    private async initializePrivacyCompliance(): Promise<void> {\n        // Initialize privacy manager for GDPR/CCPA compliance\n        try {\n            const privacySettings = privacyManager.getPrivacySettings();\n            console.log('üîí Privacy settings loaded:', privacySettings);\n        } catch (error) {\n            console.error('Failed to initialize privacy compliance:', error);\n        }\n    }\n\n    private generateRequestId(): string {\n        return `req_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n    }\n\n    private generateSessionId(): string {\n        return `session_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n    }\n\n    private createCallError(type: CallErrorType, message: string): CallError {\n        return {\n            type,\n            code: type,\n            message,\n            recoverable: false,\n            suggestedAction: 'Contact support if issue persists',\n            timestamp: new Date(),\n            callId: '',\n            userId: ''\n        };\n    }\n\n    private async loadActiveSessions(): Promise<void> {\n        try {\n            const stored = await AsyncStorage.getItem('fake_call_active_sessions');\n            if (stored) {\n                const parsed = JSON.parse(stored);\n                this.activeSessions = new Map(parsed.map(([userId, session]: [string, any]) => [\n                    userId,\n                    {\n                        ...session,\n                        lastValidated: new Date(session.lastValidated),\n                        usageQuota: {\n                            daily: { ...session.usageQuota.daily, resetAt: new Date(session.usageQuota.daily.resetAt) },\n                            monthly: { ...session.usageQuota.monthly, resetAt: new Date(session.usageQuota.monthly.resetAt) }\n                        }\n                    }\n                ]));\n            }\n        } catch (error) {\n            console.error('Failed to load active sessions:', error);\n        }\n    }\n\n    private async saveActiveSessions(): Promise<void> {\n        try {\n            const sessionsArray = Array.from(this.activeSessions.entries());\n            const serializable = sessionsArray.map(([userId, session]) => [\n                userId,\n                {\n                    ...session,\n                    lastValidated: session.lastValidated.toISOString(),\n                    usageQuota: {\n                        daily: { ...session.usageQuota.daily, resetAt: session.usageQuota.daily.resetAt.toISOString() },\n                        monthly: { ...session.usageQuota.monthly, resetAt: session.usageQuota.monthly.resetAt.toISOString() }\n                    }\n                }\n            ]);\n\n            await AsyncStorage.setItem('fake_call_active_sessions', JSON.stringify(serializable));\n        } catch (error) {\n            console.error('Failed to save active sessions:', error);\n        }\n    }\n\n    private async saveSessionToStorage(session: FakeCallAuthSession): Promise<void> {\n        try {\n            const key = `fake_call_session_${session.userId}`;\n            const serializable = {\n                ...session,\n                lastValidated: session.lastValidated.toISOString(),\n                usageQuota: {\n                    daily: { ...session.usageQuota.daily, resetAt: session.usageQuota.daily.resetAt.toISOString() },\n                    monthly: { ...session.usageQuota.monthly, resetAt: session.usageQuota.monthly.resetAt.toISOString() }\n                }\n            };\n\n            await AsyncStorage.setItem(key, JSON.stringify(serializable));\n        } catch (error) {\n            console.error('Failed to save session to storage:', error);\n        }\n    }\n}\n\n// Export singleton instance\nexport const fakeCallAuthService = new FakeCallAuthenticationService();"],"mappings":"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","ignoreList":[]}