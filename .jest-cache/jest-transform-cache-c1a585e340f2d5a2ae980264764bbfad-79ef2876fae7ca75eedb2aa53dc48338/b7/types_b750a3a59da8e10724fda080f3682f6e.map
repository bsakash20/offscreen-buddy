{"version":3,"names":["FakeCallType","exports","CallState","CallAction","CallPriority","CallErrorType","FakeCallNotificationType","FakeCallNotificationAction","FakeCallEventType"],"sources":["types.ts"],"sourcesContent":["/**\n * TypeScript Interface Definitions for Fake Call Notification System\n * Extends existing notification infrastructure for Pro tier fake call features\n */\n\nimport { Platform } from 'react-native';\nimport {\n    NotificationType,\n    NotificationCategory,\n    NotificationPriority,\n    NotificationAction,\n    NotificationData,\n    PlatformNotificationData\n} from '../notifications/types';\n\n// ===========================================\n// CORE FAKE CALL TYPES\n// ===========================================\n\n// Main fake call types extending notification system\nexport enum FakeCallType {\n    INCOMING = 'incoming',\n    OUTGOING = 'outgoing',\n    SCHEDULED = 'scheduled',\n    EMERGENCY = 'emergency'\n}\n\n// Call states for lifecycle management\nexport enum CallState {\n    SCHEDULED = 'scheduled',\n    INCOMING = 'incoming',\n    ACTIVE = 'active',\n    CONNECTED = 'connected',\n    PAUSED = 'paused',\n    ENDED = 'ended',\n    DISMISSED = 'dismissed',\n    FAILED = 'failed'\n}\n\n// User interaction types during calls\nexport enum CallAction {\n    ANSWER = 'answer',\n    DECLINE = 'decline',\n    END = 'end',\n    MUTE = 'mute',\n    UNMUTE = 'unmute',\n    SPEAKER = 'speaker',\n    PAUSE = 'pause',\n    RESUME = 'resume'\n}\n\n// Call priorities for scheduling\nexport enum CallPriority {\n    LOW = 'low',\n    NORMAL = 'normal',\n    HIGH = 'high',\n    URGENT = 'urgent'\n}\n\n// ===========================================\n// CORE DATA STRUCTURES\n// ===========================================\n\n// Caller information with safety validation\nexport interface CallerInfo {\n    id: string;\n    name: string;\n    phoneNumber: string; // Always safe/generated, never real\n    avatarUrl?: string;\n    callerType: 'safe' | 'emergency' | 'business' | 'personal';\n    location?: string;\n    riskLevel: 'low' | 'medium' | 'high';\n    isVerified: boolean;\n    displayName: string; // What user sees\n}\n\n// Voice profile for synthesis\nexport interface VoiceProfile {\n    id: string;\n    name: string;\n    language: string;\n    region: string;\n    gender: 'male' | 'female' | 'neutral';\n    ageRange: 'young' | 'adult' | 'mature';\n    accent: string;\n    personality: 'professional' | 'casual' | 'friendly' | 'formal';\n    quality: 'premium' | 'standard' | 'basic';\n    sampleText: string;\n    isAvailable: boolean;\n    fileSize: number; // bytes\n}\n\n// Call configuration from user\nexport interface FakeCallConfig {\n    callerInfo: CallerInfo;\n    voiceProfileId: string;\n    callType: FakeCallType;\n    priority: CallPriority;\n    autoAnswer: boolean;\n    callDuration: number; // seconds\n    audioMessage?: string; // Text for voice synthesis\n    customRingtone?: string;\n    vibratePattern?: number[];\n    backgroundImage?: string;\n    emergencyOverride: boolean; // Allow emergency scenarios\n}\n\n// Call scheduling configuration\nexport interface CallSchedule {\n    id: string;\n    userId: string;\n    config: FakeCallConfig;\n    scheduledFor: Date;\n    timezone: string;\n    recurring?: RecurringPattern;\n    smartScheduling: {\n        enabled: boolean;\n        skipDuringFocus: boolean;\n        skipDuringMeetings: boolean;\n        respectDoNotDisturb: boolean;\n        contextAware: boolean;\n    };\n    notification: {\n        advanceWarning: number; // minutes before call\n        reminderEnabled: boolean;\n        reminderMessage: string;\n    };\n}\n\n// Recurring call pattern\nexport interface RecurringPattern {\n    type: 'daily' | 'weekly' | 'monthly' | 'custom';\n    interval: number; // every N units\n    daysOfWeek?: number[]; // 0-6 for weekly\n    endDate?: Date;\n    maxOccurrences?: number;\n    skipHolidays: boolean;\n}\n\n// ===========================================\n// CALL STATE MANAGEMENT\n// ===========================================\n\n// Complete call state object\nexport interface CallStateData {\n    callId: string;\n    userId: string;\n    config: FakeCallConfig;\n    state: CallState;\n    startTime?: Date;\n    endTime?: Date;\n    duration?: number;\n    interactionHistory: CallInteraction[];\n    audioData?: AudioBufferInfo;\n    error?: CallError;\n    metadata: {\n        platform: Platform;\n        appVersion: string;\n        deviceInfo: DeviceInfo;\n        sessionId: string;\n    };\n}\n\n// User interaction tracking\nexport interface CallInteraction {\n    timestamp: Date;\n    action: CallAction;\n    userAgent: 'auto' | 'user' | 'system';\n    duration?: number; // For pause/resume actions\n    details?: Record<string, any>;\n}\n\n// Audio buffer information\nexport interface AudioBufferInfo {\n    format: 'mp3' | 'wav' | 'aac';\n    sampleRate: number;\n    channels: number;\n    bitRate: number;\n    duration: number;\n    size: number; // bytes\n    voiceProfileId: string;\n    quality: 'low' | 'medium' | 'high';\n}\n\n// Device information for platform-specific handling\nexport interface DeviceInfo {\n    platform: Platform;\n    osVersion: string;\n    deviceModel: string;\n    hasCallKit: boolean; // iOS\n    hasInCallService: boolean; // Android\n    audioSessionAvailable: boolean;\n    notificationCapabilities: NotificationCapabilities;\n}\n\n// Notification capabilities\nexport interface NotificationCapabilities {\n    canSchedule: boolean;\n    canBadge: boolean;\n    canSound: boolean;\n    canVibrate: boolean;\n    canCriticalAlerts: boolean; // iOS\n    canFullScreenIntent: boolean; // Android\n}\n\n// ===========================================\n// ERROR HANDLING\n// ===========================================\n\n// Call-specific error types\nexport enum CallErrorType {\n    PLATFORM_UNSUPPORTED = 'PLATFORM_UNSUPPORTED',\n    CALLKIT_NOT_AVAILABLE = 'CALLKIT_NOT_AVAILABLE',\n    AUDIO_SESSION_ERROR = 'AUDIO_SESSION_ERROR',\n    VOICE_SYNTHESIS_FAILED = 'VOICE_SYNTHESIS_FAILED',\n    AUDIO_PLAYBACK_ERROR = 'AUDIO_PLAYBACK_ERROR',\n    VOICE_PROFILE_MISSING = 'VOICE_PROFILE_MISSING',\n    PRO_TIER_REQUIRED = 'PRO_TIER_REQUIRED',\n    SUBSCRIPTION_EXPIRED = 'SUBSCRIPTION_EXPIRED',\n    ACCESS_DENIED = 'ACCESS_DENIED',\n    INVALID_CALLER_ID = 'INVALID_CALLER_ID',\n    RESOURCE_EXHAUSTED = 'RESOURCE_EXHAUSTED',\n    TIMEOUT_ERROR = 'TIMEOUT_ERROR',\n    NETWORK_ERROR = 'NETWORK_ERROR',\n    UNKNOWN_ERROR = 'UNKNOWN_ERROR'\n}\n\n// Call error with recovery information\nexport interface CallError {\n    type: CallErrorType;\n    code: string;\n    message: string;\n    details?: Record<string, any>;\n    recoverable: boolean;\n    suggestedAction: string;\n    technicalDetails?: Record<string, any>;\n    timestamp: Date;\n    callId: string;\n    userId: string;\n}\n\n// ===========================================\n// SERVICE INTERFACES\n// ===========================================\n\n// Platform call interface\nexport interface PlatformCallInterface {\n    // Initialization\n    initialize(): Promise<boolean>;\n    isSupported(): boolean;\n    getCapabilities(): PlatformCapabilities;\n\n    // Call lifecycle\n    displayIncomingCall(callInfo: CallerInfo): Promise<boolean>;\n    dismissCallInterface(): Promise<void>;\n    updateCallState(state: CallState): Promise<void>;\n\n    // Audio management\n    configureAudioSession(config: AudioSessionConfig): Promise<void>;\n    startAudioPlayback(audioData: AudioBufferInfo): Promise<void>;\n    stopAudioPlayback(): Promise<void>;\n    setAudioVolume(volume: number): Promise<void>;\n\n    // Platform-specific features\n    getPlatformFeatures(): string[];\n    handlePlatformError(error: any): Promise<void>;\n}\n\n// Platform capabilities\nexport interface PlatformCapabilities {\n    canUseNativeCallUI: boolean;\n    canUseCallKit: boolean; // iOS\n    canSimulatePhoneCall: boolean; // Android\n    canFullScreenCall: boolean;\n    canBackgroundAudio: boolean;\n    canHapticFeedback: boolean;\n    supportedAudioFormats: string[];\n    maxCallDuration: number; // seconds\n}\n\n// Audio session configuration\nexport interface AudioSessionConfig {\n    category: 'ambient' | 'solo' | 'playback' | 'record' | 'multiRoute';\n    mode: 'default' | 'gameChat' | 'moviePlayback' | 'measurement' | 'spokenAudio';\n    options: string[]; // AudioSession options\n    sampleRate: number;\n    channels: number;\n    bufferSize: number;\n}\n\n// Voice synthesis service interface\nexport interface VoiceSynthesisService {\n    // Voice management\n    getAvailableVoices(): Promise<VoiceProfile[]>;\n    loadVoiceProfile(voiceId: string): Promise<boolean>;\n    preloadVoices(voiceIds: string[]): Promise<boolean>;\n\n    // Synthesis\n    synthesizeSpeech(text: string, voiceId: string): Promise<AudioBufferInfo>;\n    synthesizeCallMessage(message: CallMessage): Promise<AudioBufferInfo>;\n\n    // Voice quality\n    getVoiceQuality(voiceId: string): Promise<VoiceQuality>;\n    setSynthesisRate(rate: number): Promise<void>;\n    setSynthesisPitch(pitch: number): Promise<void>;\n}\n\n// Voice quality metrics\nexport interface VoiceQuality {\n    latency: number; // ms\n    quality: 'low' | 'medium' | 'high';\n    naturalness: number; // 0-1 scale\n    intelligibility: number; // 0-1 scale\n    fileSize: number;\n}\n\n// Call message for synthesis\nexport interface CallMessage {\n    type: 'greeting' | 'script' | 'custom';\n    text: string;\n    language: string;\n    voiceId: string;\n    emotion?: 'neutral' | 'happy' | 'sad' | 'angry' | 'excited';\n    speed: 'slow' | 'normal' | 'fast';\n    emphasis?: {\n        word: string;\n        level: 'low' | 'medium' | 'high';\n    }[];\n}\n\n// ===========================================\n// SECURITY AND PRO TIER\n// ===========================================\n\n// Pro tier validation\nexport interface ProTierSecurity {\n    validateProTierAccess(userId: string): Promise<boolean>;\n    getSubscriptionStatus(userId: string): Promise<SubscriptionStatus>;\n    logFeatureUsage(userId: string, feature: string, metadata?: Record<string, any>): Promise<void>;\n    checkFeatureLimit(userId: string, feature: string): Promise<FeatureLimitStatus>;\n}\n\n// Subscription status\nexport interface SubscriptionStatus {\n    isActive: boolean;\n    tier: 'free' | 'pro' | 'enterprise';\n    expiresAt?: Date;\n    autoRenew: boolean;\n    paymentMethod: string;\n    trialUsed: boolean;\n    gracePeriod?: Date;\n}\n\n// Feature limit status\nexport interface FeatureLimitStatus {\n    allowed: boolean;\n    currentUsage: number;\n    limit: number;\n    resetAt: Date;\n    overageAllowed: boolean;\n}\n\n// Caller ID safety validation\nexport interface CallerIDSafety {\n    validateCallerID(callerInfo: CallerInfo): SafetyValidation;\n    generateSafeCallerID(): Promise<CallerInfo>;\n    getSafeNameDatabase(): SafeNameDatabase;\n    validatePhoneNumber(number: string): PhoneNumberValidation;\n}\n\n// Safety validation result\nexport interface SafetyValidation {\n    isSafe: boolean;\n    riskLevel: 'low' | 'medium' | 'high';\n    reasons: string[];\n    suggestions: string[];\n    needsReview: boolean;\n}\n\n// Safe name database\nexport interface SafeNameDatabase {\n    firstNames: {\n        male: string[];\n        female: string[];\n        neutral: string[];\n    };\n    lastNames: string[];\n    businessNames: string[];\n    emergencyContacts: {\n        service: string;\n        number: string;\n        description: string;\n    }[];\n    blockedPatterns: string[];\n    suspiciousPatterns: string[];\n}\n\n// Phone number validation\nexport interface PhoneNumberValidation {\n    isValid: boolean;\n    isSafe: boolean;\n    format: 'international' | 'national' | 'local';\n    region: string;\n    isEmergency: boolean;\n    isTollFree: boolean;\n    riskFlags: string[];\n}\n\n// ===========================================\n// USER PREFERENCES AND SETTINGS\n// ===========================================\n\n// Fake call user preferences\nexport interface FakeCallPreferences {\n    userId: string;\n\n    // General settings\n    enabled: boolean;\n    autoAnswer: boolean;\n    defaultCallDuration: number;\n    priority: CallPriority;\n\n    // Voice settings\n    defaultVoiceProfile?: string;\n    voiceSpeed: 'slow' | 'normal' | 'fast';\n    voiceVolume: number;\n    audioQuality: 'low' | 'medium' | 'high';\n\n    // Caller ID settings\n    preferredCallerTypes: CallerType[];\n    allowBusinessCalls: boolean;\n    allowEmergencyCalls: boolean;\n    useRealisticNumbers: boolean;\n\n    // Schedule settings\n    smartScheduling: {\n        enabled: boolean;\n        respectFocusMode: boolean;\n        respectMeetings: boolean;\n        respectDoNotDisturb: boolean;\n    };\n\n    // Notification preferences\n    advanceWarning: number; // minutes\n    reminderEnabled: boolean;\n    soundEnabled: boolean;\n    hapticEnabled: boolean;\n\n    // Accessibility\n    accessibility: {\n        screenReaderEnabled: boolean;\n        highContrast: boolean;\n        largeText: boolean;\n        voiceControl: boolean;\n        simplifiedInterface: boolean;\n    };\n\n    // Privacy\n    privacy: {\n        logCallHistory: boolean;\n        shareAnalytics: boolean;\n        enableEmergencyOverride: boolean;\n    };\n\n    updatedAt: Date;\n}\n\n// Caller type preferences\nexport type CallerType = 'safe' | 'emergency' | 'business' | 'personal';\n\n// ===========================================\n// NOTIFICATION INTEGRATION\n// ===========================================\n\n// Extended notification types for fake calls\nexport enum FakeCallNotificationType {\n    CALL_SCHEDULED = 'call_scheduled',\n    CALL_INCOMING = 'call_incoming',\n    CALL_ANSWERED = 'call_answered',\n    CALL_ENDED = 'call_ended',\n    CALL_MISSED = 'call_missed',\n    CALL_REMINDER = 'call_reminder',\n    CALL_ERROR = 'call_error',\n    PRO_TIER_REQUIRED = 'pro_tier_required'\n}\n\n// Enhanced notification data for fake calls\nexport interface FakeCallNotificationData extends NotificationData {\n    type: FakeCallNotificationType;\n    callId: string;\n    callerInfo: CallerInfo;\n    callConfig: FakeCallConfig;\n    scheduledTime?: Date;\n    estimatedDuration?: number;\n    priority: CallPriority;\n    actions: FakeCallNotificationAction[];\n    category: NotificationCategory.CUSTOM; // Always custom for fake calls\n}\n\n// Enhanced notification actions for fake calls\nexport enum FakeCallNotificationAction {\n    ANSWER_CALL = 'answer_call',\n    DECLINE_CALL = 'decline_call',\n    SCHEDULE_CALL = 'schedule_call',\n    EDIT_CALL_CONFIG = 'edit_call_config',\n    VIEW_CALL_HISTORY = 'view_call_history',\n    UPGRADE_TO_PRO = 'upgrade_to_pro',\n    TEST_CALL_FEATURE = 'test_call_feature'\n}\n\n// ===========================================\n// ANALYTICS AND TRACKING\n// ===========================================\n\n// Call analytics for Pro tier insights\nexport interface CallAnalytics {\n    callId: string;\n    userId: string;\n\n    // Call metrics\n    callType: FakeCallType;\n    state: CallState;\n    duration: number;\n    interactions: CallInteraction[];\n\n    // User engagement\n    answerRate: number;\n    averageCallDuration: number;\n    mostUsedActions: CallAction[];\n\n    // Voice synthesis\n    voiceProfileId: string;\n    synthesisLatency: number;\n    audioQuality: 'low' | 'medium' | 'high';\n\n    // Platform performance\n    platform: Platform;\n    callKitUsed: boolean;\n    backgroundAudioUsed: boolean;\n    hapticFeedbackUsed: boolean;\n\n    // Timing\n    scheduledAt: Date;\n    startedAt?: Date;\n    endedAt: Date;\n    createdAt: Date;\n}\n\n// Call usage analytics for Pro tier\nexport interface CallUsageAnalytics {\n    userId: string;\n    period: 'daily' | 'weekly' | 'monthly';\n    startDate: Date;\n    endDate: Date;\n\n    // Usage metrics\n    totalCalls: number;\n    successfulCalls: number;\n    failedCalls: number;\n    averageDuration: number;\n\n    // Popular features\n    mostUsedVoiceProfiles: string[];\n    mostCommonCallerTypes: CallerType[];\n    preferredCallTimes: string[];\n\n    // Engagement\n    answerRate: number;\n    completionRate: number;\n    userSatisfactionScore: number; // 1-5\n\n    // Pro tier metrics\n    featureAdoptionRate: number;\n    subscriptionValue: number;\n    churnRiskScore: number;\n}\n\n// ===========================================\n// RESULT TYPES\n// ===========================================\n\n// Generic result type for fake call operations\nexport interface FakeCallResult<T = any> {\n    success: boolean;\n    data?: T;\n    error?: CallError;\n    metadata: {\n        timestamp: Date;\n        requestId: string;\n        duration: number;\n        platform: Platform;\n    };\n}\n\n// Call scheduling result\nexport interface CallSchedulingResult extends FakeCallResult<string> {\n    data?: {\n        callId: string;\n        scheduledTime: Date;\n        notificationId?: string;\n    };\n}\n\n// Call initialization result\nexport interface CallInitializationResult extends FakeCallResult<CallStateData> {\n    data?: {\n        call: CallStateData;\n        platformSupport: PlatformCapabilities;\n        audioConfig: AudioSessionConfig;\n    };\n}\n\n// ===========================================\n// UTILITY TYPES\n// ===========================================\n\n// API request/response types\nexport interface ApiRequest<T = any> {\n    data: T;\n    metadata: {\n        userId: string;\n        sessionId: string;\n        timestamp: Date;\n        source: 'app' | 'widget' | 'extension';\n    };\n}\n\nexport interface ApiResponse<T = any> extends FakeCallResult<T> {\n    pagination?: {\n        page: number;\n        limit: number;\n        total: number;\n    };\n}\n\n// Configuration types\nexport interface FakeCallConfigFile {\n    version: string;\n    supportedPlatforms: Platform[];\n    defaultSettings: FakeCallPreferences;\n    voiceProfiles: VoiceProfile[];\n    callerIDDatabase: SafeNameDatabase;\n    safetyRules: {\n        blockedPatterns: string[];\n        emergencyNumbers: string[];\n        maxCallDuration: number;\n        maxDailyCalls: number;\n    };\n}\n\n// Event types for reactive programming\nexport enum FakeCallEventType {\n    CALL_STARTED = 'call_started',\n    CALL_ANSWERED = 'call_answered',\n    CALL_ENDED = 'call_ended',\n    CALL_ERROR = 'call_error',\n    VOICE_SYNTHESIS_COMPLETE = 'voice_synthesis_complete',\n    PLATFORM_ERROR = 'platform_error',\n    PRO_TIER_STATUS_CHANGED = 'pro_tier_status_changed'\n}\n\nexport interface FakeCallEvent {\n    type: FakeCallEventType;\n    data: any;\n    timestamp: Date;\n    userId: string;\n    callId?: string;\n}\n"],"mappings":";;;;IAoBYA,YAAY,GAAAC,OAAA,CAAAD,YAAA,aAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAA,OAAZA,YAAY;AAAA;AAAA,IAQZE,SAAS,GAAAD,OAAA,CAAAC,SAAA,aAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAATA,SAAS;EAAA,OAATA,SAAS;AAAA;AAAA,IAYTC,UAAU,GAAAF,OAAA,CAAAE,UAAA,aAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAVA,UAAU;EAAA,OAAVA,UAAU;AAAA;AAAA,IAYVC,YAAY,GAAAH,OAAA,CAAAG,YAAA,aAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAZA,YAAY;EAAA,OAAZA,YAAY;AAAA;AAAA,IA8JZC,aAAa,GAAAJ,OAAA,CAAAI,aAAA,aAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAbA,aAAa;EAAA,OAAbA,aAAa;AAAA;AAAA,IAyQbC,wBAAwB,GAAAL,OAAA,CAAAK,wBAAA,aAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAxBA,wBAAwB;EAAA,OAAxBA,wBAAwB;AAAA;AAAA,IAyBxBC,0BAA0B,GAAAN,OAAA,CAAAM,0BAAA,aAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAA1BA,0BAA0B;EAAA,OAA1BA,0BAA0B;AAAA;AAAA,IAuJ1BC,iBAAiB,GAAAP,OAAA,CAAAO,iBAAA,aAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAjBA,iBAAiB;EAAA,OAAjBA,iBAAiB;AAAA","ignoreList":[]}