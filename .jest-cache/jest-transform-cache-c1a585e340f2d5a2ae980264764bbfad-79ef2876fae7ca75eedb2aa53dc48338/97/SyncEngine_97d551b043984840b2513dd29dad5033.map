{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_uuid","_types","_LocalDatabase","SyncEngine","exports","config","_classCallCheck2","default","status","SyncStatus","IDLE","syncQueue","conflicts","isInitialized","isRunning","retryCount","progressListeners","Map","conflictListeners","statusListeners","errorHandlers","getDefaultConfig","progress","getInitialProgress","analytics","getInitialAnalytics","_createClass2","key","value","_initialize","_asyncToGenerator2","localDatabase","initialize","loadSyncQueue","loadConflicts","loadAnalytics","console","log","error","Error","apply","arguments","_triggerSync","SYNCING","setStatus","setProgress","Object","assign","percentage","startTime","Date","now","syncLocalToRemote","syncRemoteToLocal","resolveConflicts","cleanupSyncQueue","duration","lastSyncTime","successfulSyncs","lastSyncDuration","saveAnalytics","getProgress","failedSyncs","handleSyncError","triggerSync","_addToSyncQueue","operation","syncOperation","id","uuidv4","direction","SyncDirection","PUSH","priority","table","data","timestamp","metadata","push","saveSyncQueue","type","addToSyncQueue","_x","_addPullOperation","length","undefined","SyncPriority","NORMAL","PULL","addPullOperation","_x2","_x3","_resolveConflictManually","conflictId","resolution","conflictIndex","findIndex","c","conflict","resolved","applyConflictResolution","updateLocalRecord","recordId","resolvedData","splice","saveConflicts","emitConflictEvent","resolveConflictManually","_x4","_x5","getStatus","getConflicts","_toConsumableArray2","getAnalytics","getLastSyncTime","_updateConfig","newConfig","updateConfig","_x6","pauseSync","PAUSED","resumeSync","addProgressListener","listener","_this","set","delete","removeProgressListener","addConflictListener","_this2","removeConflictListener","addStatusListener","_this3","removeStatusListener","addErrorHandler","handler","_this4","index","indexOf","_dispose","clear","dispose","_syncLocalToRemote","pushOperations","filter","op","BIDIRECTIONAL","completed","pushOperation","completedOperations","Math","round","failedOperations","_syncRemoteToLocal","pullOperations","pullOperation","currentProgress","_pushOperation","simulateAPICall","_x7","_pullOperation","_x8","_resolveConflicts","detectedConflicts","detectConflicts","handleDetectedConflict","resolveAutomaticConflicts","_detectConflicts","random","operationId","localData","name","remoteData","conflictType","fields","_handleDetectedConflict","autoResolution","attemptAutomaticResolution","_x9","_resolveAutomaticConflicts","unresolvedConflicts","_attemptAutomaticResolution","strategy","conflictResolutionStrategy","resolveLastWriteWins","resolveWithMerge","resolveServerAuthority","_x0","localTime","updated_at","getTime","remoteTime","resolvedAt","resolvedBy","field","_this$config$conflict","rule","mergeRules","mergeField","localValue","remoteValue","Array","isArray","Set","concat","_applyConflictResolution","operationIndex","_x1","_x10","_updateLocalRecord","update","_x11","_x12","_x13","_cleanupSyncQueue","synced","_loadSyncQueue","stored","AsyncStorage","getItem","JSON","parse","map","warn","_saveSyncQueue","setItem","stringify","_loadConflicts","_saveConflicts","_loadAnalytics","_saveAnalytics","_handleSyncError","_this5","FAILED","handlerError","retryable","maxRetries","delay","min","retryDelay","pow","setTimeout","catch","_x14","forEach","_simulateAPICall","Promise","resolve","overrides","batchSize","timeoutMs","enableCompression","enableEncryption","backgroundSyncEnabled","syncOnConnect","syncOnForeground","priorityWeights","_defineProperty2","CRITICAL","HIGH","LOW","totalOperations","bytesTransferred","totalSyncs","averageSyncTime","dataTransferred","conflictsResolved","storageEfficiency","getInstance","instance","offlineSyncEngine","_default"],"sources":["SyncEngine.ts"],"sourcesContent":["/**\n * Enhanced Sync Engine with Intelligent Conflict Resolution\n * Handles bi-directional synchronization with smart conflict detection\n */\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n    SyncStatus,\n    SyncDirection,\n    SyncPriority,\n    SyncProgress,\n    SyncConfig,\n    SyncOperation,\n    SyncConflict,\n    ConflictResolution,\n    ConflictResolutionStrategy,\n    MergeRule,\n    SyncAnalytics,\n    SyncError,\n    SyncOperationType,\n    OfflineOperation,\n    Listener,\n    ErrorHandler,\n} from './types';\n\nimport { localDatabase } from './LocalDatabase';\n\nexport class SyncEngine {\n    private static instance: SyncEngine;\n    private config: SyncConfig;\n    private status: SyncStatus = SyncStatus.IDLE;\n    private progress: SyncProgress;\n    private analytics: SyncAnalytics;\n    private syncQueue: SyncOperation[] = [];\n    private conflicts: SyncConflict[] = [];\n    private isInitialized = false;\n    private isRunning = false;\n    private lastSyncTime?: Date;\n    private retryCount = 0;\n\n    // Event listeners\n    private progressListeners = new Map<string, Listener<SyncProgress>>();\n    private conflictListeners = new Map<string, Listener<SyncConflict>>();\n    private statusListeners = new Map<string, Listener<SyncStatus>>();\n    private errorHandlers: ErrorHandler[] = [];\n\n    private constructor(config?: Partial<SyncConfig>) {\n        this.config = this.getDefaultConfig(config);\n        this.progress = this.getInitialProgress();\n        this.analytics = this.getInitialAnalytics();\n    }\n\n    public static getInstance(config?: Partial<SyncConfig>): SyncEngine {\n        if (!SyncEngine.instance) {\n            SyncEngine.instance = new SyncEngine(config);\n        }\n        return SyncEngine.instance;\n    }\n\n    /**\n     * Initialize the sync engine\n     */\n    public async initialize(): Promise<void> {\n        if (this.isInitialized) return;\n\n        try {\n            // Initialize local database\n            await localDatabase.initialize();\n\n            // Load pending sync operations\n            await this.loadSyncQueue();\n\n            // Load existing conflicts\n            await this.loadConflicts();\n\n            // Load analytics\n            await this.loadAnalytics();\n\n            this.isInitialized = true;\n            console.log('‚úÖ SyncEngine initialized successfully');\n        } catch (error) {\n            console.error('‚ùå Failed to initialize SyncEngine:', error);\n            throw new Error(`SyncEngine initialization failed: ${error}`);\n        }\n    }\n\n    /**\n     * Trigger a complete sync operation\n     */\n    public async triggerSync(): Promise<SyncProgress> {\n        if (!this.isInitialized) {\n            throw new Error('SyncEngine not initialized');\n        }\n\n        if (this.status === SyncStatus.SYNCING) {\n            throw new Error('Sync already in progress');\n        }\n\n        this.setStatus(SyncStatus.SYNCING);\n        this.setProgress({\n            ...this.progress,\n            status: SyncStatus.SYNCING,\n            percentage: 0,\n        });\n\n        try {\n            console.log('üîÑ Starting sync operation...');\n            const startTime = Date.now();\n\n            // Step 1: Load pending operations\n            await this.loadSyncQueue();\n\n            // Step 2: Push local changes to remote\n            await this.syncLocalToRemote();\n\n            // Step 3: Pull remote changes to local\n            await this.syncRemoteToLocal();\n\n            // Step 4: Resolve any conflicts\n            await this.resolveConflicts();\n\n            // Step 5: Clean up completed operations\n            await this.cleanupSyncQueue();\n\n            const duration = Date.now() - startTime;\n            this.lastSyncTime = new Date();\n            this.analytics.successfulSyncs++;\n            this.analytics.lastSyncDuration = duration;\n\n            // Save analytics\n            await this.saveAnalytics();\n\n            console.log(`‚úÖ Sync completed in ${duration}ms`);\n\n            this.setStatus(SyncStatus.IDLE);\n            this.setProgress({\n                ...this.progress,\n                status: SyncStatus.IDLE,\n                percentage: 100,\n                lastSyncTime: this.lastSyncTime,\n            });\n\n            return this.getProgress();\n        } catch (error) {\n            console.error('‚ùå Sync failed:', error);\n            this.analytics.failedSyncs++;\n            await this.handleSyncError(error as SyncError);\n            throw error;\n        }\n    }\n\n    /**\n     * Add operation to sync queue\n     */\n    public async addToSyncQueue(operation: Omit<OfflineOperation, 'id' | 'timestamp'>): Promise<string> {\n        const syncOperation: SyncOperation = {\n            id: uuidv4(),\n            direction: SyncDirection.PUSH, // Default direction\n            priority: operation.priority,\n            table: operation.table,\n            data: operation.data,\n            timestamp: new Date(),\n            metadata: operation.metadata,\n        };\n\n        this.syncQueue.push(syncOperation);\n        await this.saveSyncQueue();\n\n        console.log(`üì§ Added to sync queue: ${operation.type} on ${operation.table}`);\n        return syncOperation.id;\n    }\n\n    /**\n     * Add operation with pull direction\n     */\n    public async addPullOperation(\n        table: string,\n        data: any,\n        priority: SyncPriority = SyncPriority.NORMAL\n    ): Promise<string> {\n        const syncOperation: SyncOperation = {\n            id: uuidv4(),\n            direction: SyncDirection.PULL,\n            priority,\n            table,\n            data,\n            timestamp: new Date(),\n        };\n\n        this.syncQueue.push(syncOperation);\n        await this.saveSyncQueue();\n\n        return syncOperation.id;\n    }\n\n    /**\n     * Manually resolve a conflict\n     */\n    public async resolveConflictManually(\n        conflictId: string,\n        resolution: ConflictResolution\n    ): Promise<void> {\n        const conflictIndex = this.conflicts.findIndex(c => c.id === conflictId);\n        if (conflictIndex === -1) {\n            throw new Error(`Conflict ${conflictId} not found`);\n        }\n\n        const conflict = this.conflicts[conflictIndex];\n        conflict.resolved = true;\n        conflict.resolution = resolution;\n\n        // Apply the resolution\n        await this.applyConflictResolution(conflict, resolution);\n\n        // Update the local database\n        await this.updateLocalRecord(conflict.table, conflict.recordId, resolution.resolvedData);\n\n        // Remove from conflicts array\n        this.conflicts.splice(conflictIndex, 1);\n\n        await this.saveConflicts();\n\n        console.log(`‚úÖ Conflict ${conflictId} resolved manually`);\n        this.emitConflictEvent(conflict);\n    }\n\n    /**\n     * Get current sync progress\n     */\n    public getProgress(): SyncProgress {\n        return { ...this.progress };\n    }\n\n    /**\n     * Get current sync status\n     */\n    public getStatus(): SyncStatus {\n        return this.status;\n    }\n\n    /**\n     * Get active conflicts\n     */\n    public getConflicts(): SyncConflict[] {\n        return [...this.conflicts];\n    }\n\n    /**\n     * Get sync analytics\n     */\n    public getAnalytics(): SyncAnalytics {\n        return { ...this.analytics };\n    }\n\n    /**\n     * Get last sync time\n     */\n    public getLastSyncTime(): Date | undefined {\n        return this.lastSyncTime;\n    }\n\n    /**\n     * Update sync configuration\n     */\n    public async updateConfig(newConfig: Partial<SyncConfig>): Promise<void> {\n        this.config = { ...this.config, ...newConfig };\n        console.log('‚öôÔ∏è Sync configuration updated');\n    }\n\n    /**\n     * Pause sync operations\n     */\n    public pauseSync(): void {\n        if (this.status === SyncStatus.SYNCING) {\n            this.setStatus(SyncStatus.PAUSED);\n            console.log('‚è∏Ô∏è Sync paused');\n        }\n    }\n\n    /**\n     * Resume sync operations\n     */\n    public resumeSync(): void {\n        if (this.status === SyncStatus.PAUSED) {\n            this.setStatus(SyncStatus.IDLE);\n            console.log('‚ñ∂Ô∏è Sync resumed');\n        }\n    }\n\n    /**\n     * Add progress listener\n     */\n    public addProgressListener(id: string, listener: Listener<SyncProgress>): () => void {\n        this.progressListeners.set(id, listener);\n        return () => this.progressListeners.delete(id);\n    }\n\n    /**\n     * Remove progress listener\n     */\n    public removeProgressListener(id: string): void {\n        this.progressListeners.delete(id);\n    }\n\n    /**\n     * Add conflict listener\n     */\n    public addConflictListener(id: string, listener: Listener<SyncConflict>): () => void {\n        this.conflictListeners.set(id, listener);\n        return () => this.conflictListeners.delete(id);\n    }\n\n    /**\n     * Remove conflict listener\n     */\n    public removeConflictListener(id: string): void {\n        this.conflictListeners.delete(id);\n    }\n\n    /**\n     * Add status listener\n     */\n    public addStatusListener(id: string, listener: Listener<SyncStatus>): () => void {\n        this.statusListeners.set(id, listener);\n        return () => this.statusListeners.delete(id);\n    }\n\n    /**\n     * Remove status listener\n     */\n    public removeStatusListener(id: string): void {\n        this.statusListeners.delete(id);\n    }\n\n    /**\n     * Add error handler\n     */\n    public addErrorHandler(handler: ErrorHandler): () => void {\n        this.errorHandlers.push(handler);\n        return () => {\n            const index = this.errorHandlers.indexOf(handler);\n            if (index > -1) {\n                this.errorHandlers.splice(index, 1);\n            }\n        };\n    }\n\n    /**\n     * Clean up resources\n     */\n    public async dispose(): Promise<void> {\n        this.isRunning = false;\n        this.progressListeners.clear();\n        this.conflictListeners.clear();\n        this.statusListeners.clear();\n        this.errorHandlers.length = 0;\n        console.log('SyncEngine disposed');\n    }\n\n    // Private methods\n\n    private async syncLocalToRemote(): Promise<void> {\n        console.log('üì§ Syncing local changes to remote...');\n\n        const pushOperations = this.syncQueue.filter(\n            op => op.direction === SyncDirection.PUSH || op.direction === SyncDirection.BIDIRECTIONAL\n        );\n\n        let completed = 0;\n        for (const operation of pushOperations) {\n            try {\n                await this.pushOperation(operation);\n                completed++;\n\n                this.setProgress({\n                    ...this.progress,\n                    completedOperations: completed,\n                    percentage: Math.round((completed / pushOperations.length) * 50), // 50% for push phase\n                });\n\n            } catch (error) {\n                console.error(`Failed to push operation ${operation.id}:`, error);\n                // Mark as failed but continue with other operations\n                this.progress.failedOperations++;\n            }\n        }\n\n        console.log(`‚úÖ Pushed ${completed}/${pushOperations.length} operations`);\n    }\n\n    private async syncRemoteToLocal(): Promise<void> {\n        console.log('üì• Syncing remote changes to local...');\n\n        const pullOperations = this.syncQueue.filter(\n            op => op.direction === SyncDirection.PULL || op.direction === SyncDirection.BIDIRECTIONAL\n        );\n\n        let completed = 0;\n        for (const operation of pullOperations) {\n            try {\n                await this.pullOperation(operation);\n                completed++;\n\n                const currentProgress = 50 + Math.round((completed / pullOperations.length) * 30); // 30% for pull phase\n                this.setProgress({\n                    ...this.progress,\n                    completedOperations: completed + this.progress.completedOperations,\n                    percentage: currentProgress,\n                });\n\n            } catch (error) {\n                console.error(`Failed to pull operation ${operation.id}:`, error);\n                this.progress.failedOperations++;\n            }\n        }\n\n        console.log(`‚úÖ Pulled ${completed}/${pullOperations.length} operations`);\n    }\n\n    private async pushOperation(operation: SyncOperation): Promise<void> {\n        // In a real implementation, this would sync to Supabase\n        console.log(`Pushing operation ${operation.id} to remote`);\n\n        // Simulate API call\n        await this.simulateAPICall();\n\n        // Update local database to mark as synced\n        // await localDatabase.update(operation.table, operation.data.id, { synced: true });\n    }\n\n    private async pullOperation(operation: SyncOperation): Promise<void> {\n        // In a real implementation, this would fetch from Supabase\n        console.log(`Pulling operation ${operation.id} from remote`);\n\n        // Simulate API call\n        await this.simulateAPICall();\n\n        // Apply pulled data to local database\n        // await localDatabase.insert(operation.table, operation.data, { returnId: true });\n    }\n\n    private async resolveConflicts(): Promise<void> {\n        console.log('üîç Checking for conflicts...');\n\n        // In a real implementation, this would detect conflicts between local and remote data\n        // For now, we'll simulate conflict detection\n        const detectedConflicts = await this.detectConflicts();\n\n        for (const conflict of detectedConflicts) {\n            await this.handleDetectedConflict(conflict);\n        }\n\n        // Resolve automatically resolvable conflicts\n        await this.resolveAutomaticConflicts();\n    }\n\n    private async detectConflicts(): Promise<SyncConflict[]> {\n        // Simplified conflict detection\n        // In production, this would compare local and remote versions\n        const conflicts: SyncConflict[] = [];\n\n        // Simulate finding conflicts\n        if (Math.random() > 0.8) { // 20% chance of conflicts\n            const conflict: SyncConflict = {\n                id: uuidv4(),\n                operationId: uuidv4(),\n                table: 'timer_sessions',\n                recordId: uuidv4(),\n                localData: { name: 'Local Name' },\n                remoteData: { name: 'Remote Name' },\n                conflictType: 'field_level',\n                fields: ['name'],\n                timestamp: new Date(),\n                resolved: false,\n                priority: SyncPriority.NORMAL,\n            };\n            conflicts.push(conflict);\n        }\n\n        return conflicts;\n    }\n\n    private async handleDetectedConflict(conflict: SyncConflict): Promise<void> {\n        this.conflicts.push(conflict);\n        await this.saveConflicts();\n\n        console.log(`üö® Conflict detected: ${conflict.id}`);\n        this.emitConflictEvent(conflict);\n\n        // Try automatic resolution first\n        const autoResolution = await this.attemptAutomaticResolution(conflict);\n        if (autoResolution) {\n            await this.resolveConflictManually(conflict.id, autoResolution);\n        }\n    }\n\n    private async resolveAutomaticConflicts(): Promise<void> {\n        const unresolvedConflicts = this.conflicts.filter(c => !c.resolved);\n\n        for (const conflict of unresolvedConflicts) {\n            const autoResolution = await this.attemptAutomaticResolution(conflict);\n            if (autoResolution) {\n                await this.resolveConflictManually(conflict.id, autoResolution);\n            }\n        }\n    }\n\n    private async attemptAutomaticResolution(conflict: SyncConflict): Promise<ConflictResolution | null> {\n        const strategy = this.config.conflictResolutionStrategy;\n\n        switch (strategy.type) {\n            case 'last_write_wins':\n                return this.resolveLastWriteWins(conflict);\n\n            case 'merge':\n                return this.resolveWithMerge(conflict);\n\n            case 'server_authority':\n                return this.resolveServerAuthority(conflict);\n\n            default:\n                return null; // Requires user intervention\n        }\n    }\n\n    private resolveLastWriteWins(conflict: SyncConflict): ConflictResolution {\n        // Use timestamp to determine winner\n        const localTime = conflict.localData.updated_at ? new Date(conflict.localData.updated_at).getTime() : 0;\n        const remoteTime = conflict.remoteData.updated_at ? new Date(conflict.remoteData.updated_at).getTime() : 0;\n\n        const resolvedData = localTime > remoteTime ? conflict.localData : conflict.remoteData;\n\n        return {\n            strategy: this.config.conflictResolutionStrategy,\n            resolvedData,\n            resolvedAt: new Date(),\n            resolvedBy: 'automatic_last_write_wins',\n        };\n    }\n\n    private resolveWithMerge(conflict: SyncConflict): ConflictResolution {\n        const resolvedData = { ...conflict.localData };\n\n        // Apply merge rules\n        for (const field of conflict.fields) {\n            const rule = this.config.conflictResolutionStrategy.mergeRules?.[field];\n            if (rule) {\n                switch (rule.strategy) {\n                    case 'take_local':\n                        resolvedData[field] = conflict.localData[field];\n                        break;\n                    case 'take_remote':\n                        resolvedData[field] = conflict.remoteData[field];\n                        break;\n                    case 'merge':\n                        // Custom merge logic\n                        resolvedData[field] = this.mergeField(field, conflict.localData[field], conflict.remoteData[field]);\n                        break;\n                }\n            }\n        }\n\n        return {\n            strategy: this.config.conflictResolutionStrategy,\n            resolvedData,\n            resolvedAt: new Date(),\n            resolvedBy: 'automatic_merge',\n        };\n    }\n\n    private resolveServerAuthority(conflict: SyncConflict): ConflictResolution {\n        // Always favor remote data\n        return {\n            strategy: this.config.conflictResolutionStrategy,\n            resolvedData: conflict.remoteData,\n            resolvedAt: new Date(),\n            resolvedBy: 'automatic_server_authority',\n        };\n    }\n\n    private mergeField(field: string, localValue: any, remoteValue: any): any {\n        // Simplified merge logic - in production this would be more sophisticated\n        if (Array.isArray(localValue) && Array.isArray(remoteValue)) {\n            // Merge arrays (avoiding duplicates)\n            return [...new Set([...localValue, ...remoteValue])];\n        }\n\n        if (typeof localValue === 'object' && typeof remoteValue === 'object') {\n            // Merge objects\n            return { ...remoteValue, ...localValue };\n        }\n\n        // Default to remote value\n        return remoteValue || localValue;\n    }\n\n    private async applyConflictResolution(conflict: SyncConflict, resolution: ConflictResolution): Promise<void> {\n        // Update the operation in sync queue to mark as resolved\n        const operationIndex = this.syncQueue.findIndex(op => op.id === conflict.operationId);\n        if (operationIndex > -1) {\n            this.syncQueue[operationIndex].data = resolution.resolvedData;\n        }\n    }\n\n    private async updateLocalRecord(table: string, recordId: string, data: any): Promise<void> {\n        try {\n            await localDatabase.update(table, recordId, data);\n            console.log(`Updated local record ${table}:${recordId}`);\n        } catch (error) {\n            console.error(`Failed to update local record ${table}:${recordId}:`, error);\n        }\n    }\n\n    private async cleanupSyncQueue(): Promise<void> {\n        // Remove successfully synced operations\n        this.syncQueue = this.syncQueue.filter(op => !op.data.synced);\n        await this.saveSyncQueue();\n        console.log(`Cleaned up sync queue, ${this.syncQueue.length} operations remaining`);\n    }\n\n    private async loadSyncQueue(): Promise<void> {\n        try {\n            const stored = await AsyncStorage.getItem('sync_queue');\n            if (stored) {\n                this.syncQueue = JSON.parse(stored).map((op: any) => ({\n                    ...op,\n                    timestamp: new Date(op.timestamp),\n                }));\n            }\n        } catch (error) {\n            console.warn('Failed to load sync queue:', error);\n            this.syncQueue = [];\n        }\n    }\n\n    private async saveSyncQueue(): Promise<void> {\n        try {\n            await AsyncStorage.setItem('sync_queue', JSON.stringify(this.syncQueue));\n        } catch (error) {\n            console.warn('Failed to save sync queue:', error);\n        }\n    }\n\n    private async loadConflicts(): Promise<void> {\n        try {\n            const stored = await AsyncStorage.getItem('sync_conflicts');\n            if (stored) {\n                this.conflicts = JSON.parse(stored).map((conflict: any) => ({\n                    ...conflict,\n                    timestamp: new Date(conflict.timestamp),\n                    resolvedAt: conflict.resolvedAt ? new Date(conflict.resolvedAt) : undefined,\n                }));\n            }\n        } catch (error) {\n            console.warn('Failed to load conflicts:', error);\n            this.conflicts = [];\n        }\n    }\n\n    private async saveConflicts(): Promise<void> {\n        try {\n            await AsyncStorage.setItem('sync_conflicts', JSON.stringify(this.conflicts));\n        } catch (error) {\n            console.warn('Failed to save conflicts:', error);\n        }\n    }\n\n    private async loadAnalytics(): Promise<void> {\n        try {\n            const stored = await AsyncStorage.getItem('sync_analytics');\n            if (stored) {\n                this.analytics = JSON.parse(stored);\n            }\n        } catch (error) {\n            console.warn('Failed to load analytics:', error);\n        }\n    }\n\n    private async saveAnalytics(): Promise<void> {\n        try {\n            await AsyncStorage.setItem('sync_analytics', JSON.stringify(this.analytics));\n        } catch (error) {\n            console.warn('Failed to save analytics:', error);\n        }\n    }\n\n    private async handleSyncError(error: SyncError): Promise<void> {\n        this.setStatus(SyncStatus.FAILED);\n\n        // Emit to error handlers\n        for (const handler of this.errorHandlers) {\n            try {\n                handler(error);\n            } catch (handlerError) {\n                console.warn('Error in error handler:', handlerError);\n            }\n        }\n\n        // Implement retry logic\n        if (error.retryable && this.retryCount < this.config.maxRetries) {\n            this.retryCount++;\n            const delay = Math.min(this.config.retryDelay * Math.pow(2, this.retryCount), 30000);\n\n            setTimeout(() => {\n                console.log(`Retrying sync in ${delay}ms (attempt ${this.retryCount})`);\n                this.triggerSync().catch(console.error);\n            }, delay);\n        }\n    }\n\n    private setStatus(status: SyncStatus): void {\n        this.status = status;\n        this.statusListeners.forEach(listener => listener(status));\n    }\n\n    private setProgress(progress: SyncProgress): void {\n        this.progress = progress;\n        this.progressListeners.forEach(listener => listener(progress));\n    }\n\n    private emitConflictEvent(conflict: SyncConflict): void {\n        this.conflictListeners.forEach(listener => listener(conflict));\n    }\n\n    private async simulateAPICall(): Promise<void> {\n        // Simulate network delay\n        await new Promise(resolve => setTimeout(resolve, Math.random() * 500 + 100));\n    }\n\n    private getDefaultConfig(overrides?: Partial<SyncConfig>): SyncConfig {\n        return {\n            batchSize: 50,\n            maxRetries: 3,\n            retryDelay: 1000,\n            timeoutMs: 30000,\n            enableCompression: true,\n            enableEncryption: false,\n            conflictResolutionStrategy: {\n                type: 'last_write_wins',\n                mergeRules: {},\n            },\n            backgroundSyncEnabled: true,\n            syncOnConnect: true,\n            syncOnForeground: true,\n            priorityWeights: {\n                [SyncPriority.CRITICAL]: 4,\n                [SyncPriority.HIGH]: 3,\n                [SyncPriority.NORMAL]: 2,\n                [SyncPriority.LOW]: 1,\n            },\n            ...overrides,\n        };\n    }\n\n    private getInitialProgress(): SyncProgress {\n        return {\n            status: SyncStatus.IDLE,\n            percentage: 0,\n            totalOperations: 0,\n            completedOperations: 0,\n            failedOperations: 0,\n            bytesTransferred: 0,\n        };\n    }\n\n    private getInitialAnalytics(): SyncAnalytics {\n        return {\n            totalSyncs: 0,\n            successfulSyncs: 0,\n            failedSyncs: 0,\n            averageSyncTime: 0,\n            dataTransferred: 0,\n            conflictsResolved: 0,\n            storageEfficiency: 1,\n        };\n    }\n}\n\n// Export singleton instance\nexport const offlineSyncEngine = SyncEngine.getInstance();\nexport default SyncEngine;"],"mappings":"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","ignoreList":[]}