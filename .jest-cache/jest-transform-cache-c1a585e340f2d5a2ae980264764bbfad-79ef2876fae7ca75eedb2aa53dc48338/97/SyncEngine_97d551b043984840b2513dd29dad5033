65d4e4a0a57bdcc0797aaae88bd3c65a
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.offlineSyncEngine = exports.default = exports.SyncEngine = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _uuid = require("uuid");
var _types = require("./types");
var _LocalDatabase = require("./LocalDatabase");
var SyncEngine = exports.SyncEngine = function () {
  function SyncEngine(config) {
    (0, _classCallCheck2.default)(this, SyncEngine);
    this.status = _types.SyncStatus.IDLE;
    this.syncQueue = [];
    this.conflicts = [];
    this.isInitialized = false;
    this.isRunning = false;
    this.retryCount = 0;
    this.progressListeners = new Map();
    this.conflictListeners = new Map();
    this.statusListeners = new Map();
    this.errorHandlers = [];
    this.config = this.getDefaultConfig(config);
    this.progress = this.getInitialProgress();
    this.analytics = this.getInitialAnalytics();
  }
  return (0, _createClass2.default)(SyncEngine, [{
    key: "initialize",
    value: (function () {
      var _initialize = (0, _asyncToGenerator2.default)(function* () {
        if (this.isInitialized) return;
        try {
          yield _LocalDatabase.localDatabase.initialize();
          yield this.loadSyncQueue();
          yield this.loadConflicts();
          yield this.loadAnalytics();
          this.isInitialized = true;
          console.log('âœ… SyncEngine initialized successfully');
        } catch (error) {
          console.error('âŒ Failed to initialize SyncEngine:', error);
          throw new Error(`SyncEngine initialization failed: ${error}`);
        }
      });
      function initialize() {
        return _initialize.apply(this, arguments);
      }
      return initialize;
    }())
  }, {
    key: "triggerSync",
    value: (function () {
      var _triggerSync = (0, _asyncToGenerator2.default)(function* () {
        if (!this.isInitialized) {
          throw new Error('SyncEngine not initialized');
        }
        if (this.status === _types.SyncStatus.SYNCING) {
          throw new Error('Sync already in progress');
        }
        this.setStatus(_types.SyncStatus.SYNCING);
        this.setProgress(Object.assign({}, this.progress, {
          status: _types.SyncStatus.SYNCING,
          percentage: 0
        }));
        try {
          console.log('ðŸ”„ Starting sync operation...');
          var startTime = Date.now();
          yield this.loadSyncQueue();
          yield this.syncLocalToRemote();
          yield this.syncRemoteToLocal();
          yield this.resolveConflicts();
          yield this.cleanupSyncQueue();
          var duration = Date.now() - startTime;
          this.lastSyncTime = new Date();
          this.analytics.successfulSyncs++;
          this.analytics.lastSyncDuration = duration;
          yield this.saveAnalytics();
          console.log(`âœ… Sync completed in ${duration}ms`);
          this.setStatus(_types.SyncStatus.IDLE);
          this.setProgress(Object.assign({}, this.progress, {
            status: _types.SyncStatus.IDLE,
            percentage: 100,
            lastSyncTime: this.lastSyncTime
          }));
          return this.getProgress();
        } catch (error) {
          console.error('âŒ Sync failed:', error);
          this.analytics.failedSyncs++;
          yield this.handleSyncError(error);
          throw error;
        }
      });
      function triggerSync() {
        return _triggerSync.apply(this, arguments);
      }
      return triggerSync;
    }())
  }, {
    key: "addToSyncQueue",
    value: (function () {
      var _addToSyncQueue = (0, _asyncToGenerator2.default)(function* (operation) {
        var syncOperation = {
          id: (0, _uuid.v4)(),
          direction: _types.SyncDirection.PUSH,
          priority: operation.priority,
          table: operation.table,
          data: operation.data,
          timestamp: new Date(),
          metadata: operation.metadata
        };
        this.syncQueue.push(syncOperation);
        yield this.saveSyncQueue();
        console.log(`ðŸ“¤ Added to sync queue: ${operation.type} on ${operation.table}`);
        return syncOperation.id;
      });
      function addToSyncQueue(_x) {
        return _addToSyncQueue.apply(this, arguments);
      }
      return addToSyncQueue;
    }())
  }, {
    key: "addPullOperation",
    value: (function () {
      var _addPullOperation = (0, _asyncToGenerator2.default)(function* (table, data) {
        var priority = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _types.SyncPriority.NORMAL;
        var syncOperation = {
          id: (0, _uuid.v4)(),
          direction: _types.SyncDirection.PULL,
          priority: priority,
          table: table,
          data: data,
          timestamp: new Date()
        };
        this.syncQueue.push(syncOperation);
        yield this.saveSyncQueue();
        return syncOperation.id;
      });
      function addPullOperation(_x2, _x3) {
        return _addPullOperation.apply(this, arguments);
      }
      return addPullOperation;
    }())
  }, {
    key: "resolveConflictManually",
    value: (function () {
      var _resolveConflictManually = (0, _asyncToGenerator2.default)(function* (conflictId, resolution) {
        var conflictIndex = this.conflicts.findIndex(function (c) {
          return c.id === conflictId;
        });
        if (conflictIndex === -1) {
          throw new Error(`Conflict ${conflictId} not found`);
        }
        var conflict = this.conflicts[conflictIndex];
        conflict.resolved = true;
        conflict.resolution = resolution;
        yield this.applyConflictResolution(conflict, resolution);
        yield this.updateLocalRecord(conflict.table, conflict.recordId, resolution.resolvedData);
        this.conflicts.splice(conflictIndex, 1);
        yield this.saveConflicts();
        console.log(`âœ… Conflict ${conflictId} resolved manually`);
        this.emitConflictEvent(conflict);
      });
      function resolveConflictManually(_x4, _x5) {
        return _resolveConflictManually.apply(this, arguments);
      }
      return resolveConflictManually;
    }())
  }, {
    key: "getProgress",
    value: function getProgress() {
      return Object.assign({}, this.progress);
    }
  }, {
    key: "getStatus",
    value: function getStatus() {
      return this.status;
    }
  }, {
    key: "getConflicts",
    value: function getConflicts() {
      return (0, _toConsumableArray2.default)(this.conflicts);
    }
  }, {
    key: "getAnalytics",
    value: function getAnalytics() {
      return Object.assign({}, this.analytics);
    }
  }, {
    key: "getLastSyncTime",
    value: function getLastSyncTime() {
      return this.lastSyncTime;
    }
  }, {
    key: "updateConfig",
    value: (function () {
      var _updateConfig = (0, _asyncToGenerator2.default)(function* (newConfig) {
        this.config = Object.assign({}, this.config, newConfig);
        console.log('âš™ï¸ Sync configuration updated');
      });
      function updateConfig(_x6) {
        return _updateConfig.apply(this, arguments);
      }
      return updateConfig;
    }())
  }, {
    key: "pauseSync",
    value: function pauseSync() {
      if (this.status === _types.SyncStatus.SYNCING) {
        this.setStatus(_types.SyncStatus.PAUSED);
        console.log('â¸ï¸ Sync paused');
      }
    }
  }, {
    key: "resumeSync",
    value: function resumeSync() {
      if (this.status === _types.SyncStatus.PAUSED) {
        this.setStatus(_types.SyncStatus.IDLE);
        console.log('â–¶ï¸ Sync resumed');
      }
    }
  }, {
    key: "addProgressListener",
    value: function addProgressListener(id, listener) {
      var _this = this;
      this.progressListeners.set(id, listener);
      return function () {
        return _this.progressListeners.delete(id);
      };
    }
  }, {
    key: "removeProgressListener",
    value: function removeProgressListener(id) {
      this.progressListeners.delete(id);
    }
  }, {
    key: "addConflictListener",
    value: function addConflictListener(id, listener) {
      var _this2 = this;
      this.conflictListeners.set(id, listener);
      return function () {
        return _this2.conflictListeners.delete(id);
      };
    }
  }, {
    key: "removeConflictListener",
    value: function removeConflictListener(id) {
      this.conflictListeners.delete(id);
    }
  }, {
    key: "addStatusListener",
    value: function addStatusListener(id, listener) {
      var _this3 = this;
      this.statusListeners.set(id, listener);
      return function () {
        return _this3.statusListeners.delete(id);
      };
    }
  }, {
    key: "removeStatusListener",
    value: function removeStatusListener(id) {
      this.statusListeners.delete(id);
    }
  }, {
    key: "addErrorHandler",
    value: function addErrorHandler(handler) {
      var _this4 = this;
      this.errorHandlers.push(handler);
      return function () {
        var index = _this4.errorHandlers.indexOf(handler);
        if (index > -1) {
          _this4.errorHandlers.splice(index, 1);
        }
      };
    }
  }, {
    key: "dispose",
    value: (function () {
      var _dispose = (0, _asyncToGenerator2.default)(function* () {
        this.isRunning = false;
        this.progressListeners.clear();
        this.conflictListeners.clear();
        this.statusListeners.clear();
        this.errorHandlers.length = 0;
        console.log('SyncEngine disposed');
      });
      function dispose() {
        return _dispose.apply(this, arguments);
      }
      return dispose;
    }())
  }, {
    key: "syncLocalToRemote",
    value: function () {
      var _syncLocalToRemote = (0, _asyncToGenerator2.default)(function* () {
        console.log('ðŸ“¤ Syncing local changes to remote...');
        var pushOperations = this.syncQueue.filter(function (op) {
          return op.direction === _types.SyncDirection.PUSH || op.direction === _types.SyncDirection.BIDIRECTIONAL;
        });
        var completed = 0;
        for (var operation of pushOperations) {
          try {
            yield this.pushOperation(operation);
            completed++;
            this.setProgress(Object.assign({}, this.progress, {
              completedOperations: completed,
              percentage: Math.round(completed / pushOperations.length * 50)
            }));
          } catch (error) {
            console.error(`Failed to push operation ${operation.id}:`, error);
            this.progress.failedOperations++;
          }
        }
        console.log(`âœ… Pushed ${completed}/${pushOperations.length} operations`);
      });
      function syncLocalToRemote() {
        return _syncLocalToRemote.apply(this, arguments);
      }
      return syncLocalToRemote;
    }()
  }, {
    key: "syncRemoteToLocal",
    value: function () {
      var _syncRemoteToLocal = (0, _asyncToGenerator2.default)(function* () {
        console.log('ðŸ“¥ Syncing remote changes to local...');
        var pullOperations = this.syncQueue.filter(function (op) {
          return op.direction === _types.SyncDirection.PULL || op.direction === _types.SyncDirection.BIDIRECTIONAL;
        });
        var completed = 0;
        for (var operation of pullOperations) {
          try {
            yield this.pullOperation(operation);
            completed++;
            var currentProgress = 50 + Math.round(completed / pullOperations.length * 30);
            this.setProgress(Object.assign({}, this.progress, {
              completedOperations: completed + this.progress.completedOperations,
              percentage: currentProgress
            }));
          } catch (error) {
            console.error(`Failed to pull operation ${operation.id}:`, error);
            this.progress.failedOperations++;
          }
        }
        console.log(`âœ… Pulled ${completed}/${pullOperations.length} operations`);
      });
      function syncRemoteToLocal() {
        return _syncRemoteToLocal.apply(this, arguments);
      }
      return syncRemoteToLocal;
    }()
  }, {
    key: "pushOperation",
    value: function () {
      var _pushOperation = (0, _asyncToGenerator2.default)(function* (operation) {
        console.log(`Pushing operation ${operation.id} to remote`);
        yield this.simulateAPICall();
      });
      function pushOperation(_x7) {
        return _pushOperation.apply(this, arguments);
      }
      return pushOperation;
    }()
  }, {
    key: "pullOperation",
    value: function () {
      var _pullOperation = (0, _asyncToGenerator2.default)(function* (operation) {
        console.log(`Pulling operation ${operation.id} from remote`);
        yield this.simulateAPICall();
      });
      function pullOperation(_x8) {
        return _pullOperation.apply(this, arguments);
      }
      return pullOperation;
    }()
  }, {
    key: "resolveConflicts",
    value: function () {
      var _resolveConflicts = (0, _asyncToGenerator2.default)(function* () {
        console.log('ðŸ” Checking for conflicts...');
        var detectedConflicts = yield this.detectConflicts();
        for (var conflict of detectedConflicts) {
          yield this.handleDetectedConflict(conflict);
        }
        yield this.resolveAutomaticConflicts();
      });
      function resolveConflicts() {
        return _resolveConflicts.apply(this, arguments);
      }
      return resolveConflicts;
    }()
  }, {
    key: "detectConflicts",
    value: function () {
      var _detectConflicts = (0, _asyncToGenerator2.default)(function* () {
        var conflicts = [];
        if (Math.random() > 0.8) {
          var conflict = {
            id: (0, _uuid.v4)(),
            operationId: (0, _uuid.v4)(),
            table: 'timer_sessions',
            recordId: (0, _uuid.v4)(),
            localData: {
              name: 'Local Name'
            },
            remoteData: {
              name: 'Remote Name'
            },
            conflictType: 'field_level',
            fields: ['name'],
            timestamp: new Date(),
            resolved: false,
            priority: _types.SyncPriority.NORMAL
          };
          conflicts.push(conflict);
        }
        return conflicts;
      });
      function detectConflicts() {
        return _detectConflicts.apply(this, arguments);
      }
      return detectConflicts;
    }()
  }, {
    key: "handleDetectedConflict",
    value: function () {
      var _handleDetectedConflict = (0, _asyncToGenerator2.default)(function* (conflict) {
        this.conflicts.push(conflict);
        yield this.saveConflicts();
        console.log(`ðŸš¨ Conflict detected: ${conflict.id}`);
        this.emitConflictEvent(conflict);
        var autoResolution = yield this.attemptAutomaticResolution(conflict);
        if (autoResolution) {
          yield this.resolveConflictManually(conflict.id, autoResolution);
        }
      });
      function handleDetectedConflict(_x9) {
        return _handleDetectedConflict.apply(this, arguments);
      }
      return handleDetectedConflict;
    }()
  }, {
    key: "resolveAutomaticConflicts",
    value: function () {
      var _resolveAutomaticConflicts = (0, _asyncToGenerator2.default)(function* () {
        var unresolvedConflicts = this.conflicts.filter(function (c) {
          return !c.resolved;
        });
        for (var conflict of unresolvedConflicts) {
          var autoResolution = yield this.attemptAutomaticResolution(conflict);
          if (autoResolution) {
            yield this.resolveConflictManually(conflict.id, autoResolution);
          }
        }
      });
      function resolveAutomaticConflicts() {
        return _resolveAutomaticConflicts.apply(this, arguments);
      }
      return resolveAutomaticConflicts;
    }()
  }, {
    key: "attemptAutomaticResolution",
    value: function () {
      var _attemptAutomaticResolution = (0, _asyncToGenerator2.default)(function* (conflict) {
        var strategy = this.config.conflictResolutionStrategy;
        switch (strategy.type) {
          case 'last_write_wins':
            return this.resolveLastWriteWins(conflict);
          case 'merge':
            return this.resolveWithMerge(conflict);
          case 'server_authority':
            return this.resolveServerAuthority(conflict);
          default:
            return null;
        }
      });
      function attemptAutomaticResolution(_x0) {
        return _attemptAutomaticResolution.apply(this, arguments);
      }
      return attemptAutomaticResolution;
    }()
  }, {
    key: "resolveLastWriteWins",
    value: function resolveLastWriteWins(conflict) {
      var localTime = conflict.localData.updated_at ? new Date(conflict.localData.updated_at).getTime() : 0;
      var remoteTime = conflict.remoteData.updated_at ? new Date(conflict.remoteData.updated_at).getTime() : 0;
      var resolvedData = localTime > remoteTime ? conflict.localData : conflict.remoteData;
      return {
        strategy: this.config.conflictResolutionStrategy,
        resolvedData: resolvedData,
        resolvedAt: new Date(),
        resolvedBy: 'automatic_last_write_wins'
      };
    }
  }, {
    key: "resolveWithMerge",
    value: function resolveWithMerge(conflict) {
      var resolvedData = Object.assign({}, conflict.localData);
      for (var field of conflict.fields) {
        var _this$config$conflict;
        var rule = (_this$config$conflict = this.config.conflictResolutionStrategy.mergeRules) == null ? void 0 : _this$config$conflict[field];
        if (rule) {
          switch (rule.strategy) {
            case 'take_local':
              resolvedData[field] = conflict.localData[field];
              break;
            case 'take_remote':
              resolvedData[field] = conflict.remoteData[field];
              break;
            case 'merge':
              resolvedData[field] = this.mergeField(field, conflict.localData[field], conflict.remoteData[field]);
              break;
          }
        }
      }
      return {
        strategy: this.config.conflictResolutionStrategy,
        resolvedData: resolvedData,
        resolvedAt: new Date(),
        resolvedBy: 'automatic_merge'
      };
    }
  }, {
    key: "resolveServerAuthority",
    value: function resolveServerAuthority(conflict) {
      return {
        strategy: this.config.conflictResolutionStrategy,
        resolvedData: conflict.remoteData,
        resolvedAt: new Date(),
        resolvedBy: 'automatic_server_authority'
      };
    }
  }, {
    key: "mergeField",
    value: function mergeField(field, localValue, remoteValue) {
      if (Array.isArray(localValue) && Array.isArray(remoteValue)) {
        return (0, _toConsumableArray2.default)(new Set([].concat((0, _toConsumableArray2.default)(localValue), (0, _toConsumableArray2.default)(remoteValue))));
      }
      if (typeof localValue === 'object' && typeof remoteValue === 'object') {
        return Object.assign({}, remoteValue, localValue);
      }
      return remoteValue || localValue;
    }
  }, {
    key: "applyConflictResolution",
    value: function () {
      var _applyConflictResolution = (0, _asyncToGenerator2.default)(function* (conflict, resolution) {
        var operationIndex = this.syncQueue.findIndex(function (op) {
          return op.id === conflict.operationId;
        });
        if (operationIndex > -1) {
          this.syncQueue[operationIndex].data = resolution.resolvedData;
        }
      });
      function applyConflictResolution(_x1, _x10) {
        return _applyConflictResolution.apply(this, arguments);
      }
      return applyConflictResolution;
    }()
  }, {
    key: "updateLocalRecord",
    value: function () {
      var _updateLocalRecord = (0, _asyncToGenerator2.default)(function* (table, recordId, data) {
        try {
          yield _LocalDatabase.localDatabase.update(table, recordId, data);
          console.log(`Updated local record ${table}:${recordId}`);
        } catch (error) {
          console.error(`Failed to update local record ${table}:${recordId}:`, error);
        }
      });
      function updateLocalRecord(_x11, _x12, _x13) {
        return _updateLocalRecord.apply(this, arguments);
      }
      return updateLocalRecord;
    }()
  }, {
    key: "cleanupSyncQueue",
    value: function () {
      var _cleanupSyncQueue = (0, _asyncToGenerator2.default)(function* () {
        this.syncQueue = this.syncQueue.filter(function (op) {
          return !op.data.synced;
        });
        yield this.saveSyncQueue();
        console.log(`Cleaned up sync queue, ${this.syncQueue.length} operations remaining`);
      });
      function cleanupSyncQueue() {
        return _cleanupSyncQueue.apply(this, arguments);
      }
      return cleanupSyncQueue;
    }()
  }, {
    key: "loadSyncQueue",
    value: function () {
      var _loadSyncQueue = (0, _asyncToGenerator2.default)(function* () {
        try {
          var stored = yield _asyncStorage.default.getItem('sync_queue');
          if (stored) {
            this.syncQueue = JSON.parse(stored).map(function (op) {
              return Object.assign({}, op, {
                timestamp: new Date(op.timestamp)
              });
            });
          }
        } catch (error) {
          console.warn('Failed to load sync queue:', error);
          this.syncQueue = [];
        }
      });
      function loadSyncQueue() {
        return _loadSyncQueue.apply(this, arguments);
      }
      return loadSyncQueue;
    }()
  }, {
    key: "saveSyncQueue",
    value: function () {
      var _saveSyncQueue = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield _asyncStorage.default.setItem('sync_queue', JSON.stringify(this.syncQueue));
        } catch (error) {
          console.warn('Failed to save sync queue:', error);
        }
      });
      function saveSyncQueue() {
        return _saveSyncQueue.apply(this, arguments);
      }
      return saveSyncQueue;
    }()
  }, {
    key: "loadConflicts",
    value: function () {
      var _loadConflicts = (0, _asyncToGenerator2.default)(function* () {
        try {
          var stored = yield _asyncStorage.default.getItem('sync_conflicts');
          if (stored) {
            this.conflicts = JSON.parse(stored).map(function (conflict) {
              return Object.assign({}, conflict, {
                timestamp: new Date(conflict.timestamp),
                resolvedAt: conflict.resolvedAt ? new Date(conflict.resolvedAt) : undefined
              });
            });
          }
        } catch (error) {
          console.warn('Failed to load conflicts:', error);
          this.conflicts = [];
        }
      });
      function loadConflicts() {
        return _loadConflicts.apply(this, arguments);
      }
      return loadConflicts;
    }()
  }, {
    key: "saveConflicts",
    value: function () {
      var _saveConflicts = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield _asyncStorage.default.setItem('sync_conflicts', JSON.stringify(this.conflicts));
        } catch (error) {
          console.warn('Failed to save conflicts:', error);
        }
      });
      function saveConflicts() {
        return _saveConflicts.apply(this, arguments);
      }
      return saveConflicts;
    }()
  }, {
    key: "loadAnalytics",
    value: function () {
      var _loadAnalytics = (0, _asyncToGenerator2.default)(function* () {
        try {
          var stored = yield _asyncStorage.default.getItem('sync_analytics');
          if (stored) {
            this.analytics = JSON.parse(stored);
          }
        } catch (error) {
          console.warn('Failed to load analytics:', error);
        }
      });
      function loadAnalytics() {
        return _loadAnalytics.apply(this, arguments);
      }
      return loadAnalytics;
    }()
  }, {
    key: "saveAnalytics",
    value: function () {
      var _saveAnalytics = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield _asyncStorage.default.setItem('sync_analytics', JSON.stringify(this.analytics));
        } catch (error) {
          console.warn('Failed to save analytics:', error);
        }
      });
      function saveAnalytics() {
        return _saveAnalytics.apply(this, arguments);
      }
      return saveAnalytics;
    }()
  }, {
    key: "handleSyncError",
    value: function () {
      var _handleSyncError = (0, _asyncToGenerator2.default)(function* (error) {
        var _this5 = this;
        this.setStatus(_types.SyncStatus.FAILED);
        for (var handler of this.errorHandlers) {
          try {
            handler(error);
          } catch (handlerError) {
            console.warn('Error in error handler:', handlerError);
          }
        }
        if (error.retryable && this.retryCount < this.config.maxRetries) {
          this.retryCount++;
          var delay = Math.min(this.config.retryDelay * Math.pow(2, this.retryCount), 30000);
          setTimeout(function () {
            console.log(`Retrying sync in ${delay}ms (attempt ${_this5.retryCount})`);
            _this5.triggerSync().catch(console.error);
          }, delay);
        }
      });
      function handleSyncError(_x14) {
        return _handleSyncError.apply(this, arguments);
      }
      return handleSyncError;
    }()
  }, {
    key: "setStatus",
    value: function setStatus(status) {
      this.status = status;
      this.statusListeners.forEach(function (listener) {
        return listener(status);
      });
    }
  }, {
    key: "setProgress",
    value: function setProgress(progress) {
      this.progress = progress;
      this.progressListeners.forEach(function (listener) {
        return listener(progress);
      });
    }
  }, {
    key: "emitConflictEvent",
    value: function emitConflictEvent(conflict) {
      this.conflictListeners.forEach(function (listener) {
        return listener(conflict);
      });
    }
  }, {
    key: "simulateAPICall",
    value: function () {
      var _simulateAPICall = (0, _asyncToGenerator2.default)(function* () {
        yield new Promise(function (resolve) {
          return setTimeout(resolve, Math.random() * 500 + 100);
        });
      });
      function simulateAPICall() {
        return _simulateAPICall.apply(this, arguments);
      }
      return simulateAPICall;
    }()
  }, {
    key: "getDefaultConfig",
    value: function getDefaultConfig(overrides) {
      return Object.assign({
        batchSize: 50,
        maxRetries: 3,
        retryDelay: 1000,
        timeoutMs: 30000,
        enableCompression: true,
        enableEncryption: false,
        conflictResolutionStrategy: {
          type: 'last_write_wins',
          mergeRules: {}
        },
        backgroundSyncEnabled: true,
        syncOnConnect: true,
        syncOnForeground: true,
        priorityWeights: (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, _types.SyncPriority.CRITICAL, 4), _types.SyncPriority.HIGH, 3), _types.SyncPriority.NORMAL, 2), _types.SyncPriority.LOW, 1)
      }, overrides);
    }
  }, {
    key: "getInitialProgress",
    value: function getInitialProgress() {
      return {
        status: _types.SyncStatus.IDLE,
        percentage: 0,
        totalOperations: 0,
        completedOperations: 0,
        failedOperations: 0,
        bytesTransferred: 0
      };
    }
  }, {
    key: "getInitialAnalytics",
    value: function getInitialAnalytics() {
      return {
        totalSyncs: 0,
        successfulSyncs: 0,
        failedSyncs: 0,
        averageSyncTime: 0,
        dataTransferred: 0,
        conflictsResolved: 0,
        storageEfficiency: 1
      };
    }
  }], [{
    key: "getInstance",
    value: function getInstance(config) {
      if (!SyncEngine.instance) {
        SyncEngine.instance = new SyncEngine(config);
      }
      return SyncEngine.instance;
    }
  }]);
}();
var offlineSyncEngine = exports.offlineSyncEngine = SyncEngine.getInstance();
var _default = exports.default = SyncEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXN5bmNTdG9yYWdlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXVpZCIsIl90eXBlcyIsIl9Mb2NhbERhdGFiYXNlIiwiU3luY0VuZ2luZSIsImV4cG9ydHMiLCJjb25maWciLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsInN0YXR1cyIsIlN5bmNTdGF0dXMiLCJJRExFIiwic3luY1F1ZXVlIiwiY29uZmxpY3RzIiwiaXNJbml0aWFsaXplZCIsImlzUnVubmluZyIsInJldHJ5Q291bnQiLCJwcm9ncmVzc0xpc3RlbmVycyIsIk1hcCIsImNvbmZsaWN0TGlzdGVuZXJzIiwic3RhdHVzTGlzdGVuZXJzIiwiZXJyb3JIYW5kbGVycyIsImdldERlZmF1bHRDb25maWciLCJwcm9ncmVzcyIsImdldEluaXRpYWxQcm9ncmVzcyIsImFuYWx5dGljcyIsImdldEluaXRpYWxBbmFseXRpY3MiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJfaW5pdGlhbGl6ZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImxvY2FsRGF0YWJhc2UiLCJpbml0aWFsaXplIiwibG9hZFN5bmNRdWV1ZSIsImxvYWRDb25mbGljdHMiLCJsb2FkQW5hbHl0aWNzIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiRXJyb3IiLCJhcHBseSIsImFyZ3VtZW50cyIsIl90cmlnZ2VyU3luYyIsIlNZTkNJTkciLCJzZXRTdGF0dXMiLCJzZXRQcm9ncmVzcyIsIk9iamVjdCIsImFzc2lnbiIsInBlcmNlbnRhZ2UiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93Iiwic3luY0xvY2FsVG9SZW1vdGUiLCJzeW5jUmVtb3RlVG9Mb2NhbCIsInJlc29sdmVDb25mbGljdHMiLCJjbGVhbnVwU3luY1F1ZXVlIiwiZHVyYXRpb24iLCJsYXN0U3luY1RpbWUiLCJzdWNjZXNzZnVsU3luY3MiLCJsYXN0U3luY0R1cmF0aW9uIiwic2F2ZUFuYWx5dGljcyIsImdldFByb2dyZXNzIiwiZmFpbGVkU3luY3MiLCJoYW5kbGVTeW5jRXJyb3IiLCJ0cmlnZ2VyU3luYyIsIl9hZGRUb1N5bmNRdWV1ZSIsIm9wZXJhdGlvbiIsInN5bmNPcGVyYXRpb24iLCJpZCIsInV1aWR2NCIsImRpcmVjdGlvbiIsIlN5bmNEaXJlY3Rpb24iLCJQVVNIIiwicHJpb3JpdHkiLCJ0YWJsZSIsImRhdGEiLCJ0aW1lc3RhbXAiLCJtZXRhZGF0YSIsInB1c2giLCJzYXZlU3luY1F1ZXVlIiwidHlwZSIsImFkZFRvU3luY1F1ZXVlIiwiX3giLCJfYWRkUHVsbE9wZXJhdGlvbiIsImxlbmd0aCIsInVuZGVmaW5lZCIsIlN5bmNQcmlvcml0eSIsIk5PUk1BTCIsIlBVTEwiLCJhZGRQdWxsT3BlcmF0aW9uIiwiX3gyIiwiX3gzIiwiX3Jlc29sdmVDb25mbGljdE1hbnVhbGx5IiwiY29uZmxpY3RJZCIsInJlc29sdXRpb24iLCJjb25mbGljdEluZGV4IiwiZmluZEluZGV4IiwiYyIsImNvbmZsaWN0IiwicmVzb2x2ZWQiLCJhcHBseUNvbmZsaWN0UmVzb2x1dGlvbiIsInVwZGF0ZUxvY2FsUmVjb3JkIiwicmVjb3JkSWQiLCJyZXNvbHZlZERhdGEiLCJzcGxpY2UiLCJzYXZlQ29uZmxpY3RzIiwiZW1pdENvbmZsaWN0RXZlbnQiLCJyZXNvbHZlQ29uZmxpY3RNYW51YWxseSIsIl94NCIsIl94NSIsImdldFN0YXR1cyIsImdldENvbmZsaWN0cyIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJnZXRBbmFseXRpY3MiLCJnZXRMYXN0U3luY1RpbWUiLCJfdXBkYXRlQ29uZmlnIiwibmV3Q29uZmlnIiwidXBkYXRlQ29uZmlnIiwiX3g2IiwicGF1c2VTeW5jIiwiUEFVU0VEIiwicmVzdW1lU3luYyIsImFkZFByb2dyZXNzTGlzdGVuZXIiLCJsaXN0ZW5lciIsIl90aGlzIiwic2V0IiwiZGVsZXRlIiwicmVtb3ZlUHJvZ3Jlc3NMaXN0ZW5lciIsImFkZENvbmZsaWN0TGlzdGVuZXIiLCJfdGhpczIiLCJyZW1vdmVDb25mbGljdExpc3RlbmVyIiwiYWRkU3RhdHVzTGlzdGVuZXIiLCJfdGhpczMiLCJyZW1vdmVTdGF0dXNMaXN0ZW5lciIsImFkZEVycm9ySGFuZGxlciIsImhhbmRsZXIiLCJfdGhpczQiLCJpbmRleCIsImluZGV4T2YiLCJfZGlzcG9zZSIsImNsZWFyIiwiZGlzcG9zZSIsIl9zeW5jTG9jYWxUb1JlbW90ZSIsInB1c2hPcGVyYXRpb25zIiwiZmlsdGVyIiwib3AiLCJCSURJUkVDVElPTkFMIiwiY29tcGxldGVkIiwicHVzaE9wZXJhdGlvbiIsImNvbXBsZXRlZE9wZXJhdGlvbnMiLCJNYXRoIiwicm91bmQiLCJmYWlsZWRPcGVyYXRpb25zIiwiX3N5bmNSZW1vdGVUb0xvY2FsIiwicHVsbE9wZXJhdGlvbnMiLCJwdWxsT3BlcmF0aW9uIiwiY3VycmVudFByb2dyZXNzIiwiX3B1c2hPcGVyYXRpb24iLCJzaW11bGF0ZUFQSUNhbGwiLCJfeDciLCJfcHVsbE9wZXJhdGlvbiIsIl94OCIsIl9yZXNvbHZlQ29uZmxpY3RzIiwiZGV0ZWN0ZWRDb25mbGljdHMiLCJkZXRlY3RDb25mbGljdHMiLCJoYW5kbGVEZXRlY3RlZENvbmZsaWN0IiwicmVzb2x2ZUF1dG9tYXRpY0NvbmZsaWN0cyIsIl9kZXRlY3RDb25mbGljdHMiLCJyYW5kb20iLCJvcGVyYXRpb25JZCIsImxvY2FsRGF0YSIsIm5hbWUiLCJyZW1vdGVEYXRhIiwiY29uZmxpY3RUeXBlIiwiZmllbGRzIiwiX2hhbmRsZURldGVjdGVkQ29uZmxpY3QiLCJhdXRvUmVzb2x1dGlvbiIsImF0dGVtcHRBdXRvbWF0aWNSZXNvbHV0aW9uIiwiX3g5IiwiX3Jlc29sdmVBdXRvbWF0aWNDb25mbGljdHMiLCJ1bnJlc29sdmVkQ29uZmxpY3RzIiwiX2F0dGVtcHRBdXRvbWF0aWNSZXNvbHV0aW9uIiwic3RyYXRlZ3kiLCJjb25mbGljdFJlc29sdXRpb25TdHJhdGVneSIsInJlc29sdmVMYXN0V3JpdGVXaW5zIiwicmVzb2x2ZVdpdGhNZXJnZSIsInJlc29sdmVTZXJ2ZXJBdXRob3JpdHkiLCJfeDAiLCJsb2NhbFRpbWUiLCJ1cGRhdGVkX2F0IiwiZ2V0VGltZSIsInJlbW90ZVRpbWUiLCJyZXNvbHZlZEF0IiwicmVzb2x2ZWRCeSIsImZpZWxkIiwiX3RoaXMkY29uZmlnJGNvbmZsaWN0IiwicnVsZSIsIm1lcmdlUnVsZXMiLCJtZXJnZUZpZWxkIiwibG9jYWxWYWx1ZSIsInJlbW90ZVZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiU2V0IiwiY29uY2F0IiwiX2FwcGx5Q29uZmxpY3RSZXNvbHV0aW9uIiwib3BlcmF0aW9uSW5kZXgiLCJfeDEiLCJfeDEwIiwiX3VwZGF0ZUxvY2FsUmVjb3JkIiwidXBkYXRlIiwiX3gxMSIsIl94MTIiLCJfeDEzIiwiX2NsZWFudXBTeW5jUXVldWUiLCJzeW5jZWQiLCJfbG9hZFN5bmNRdWV1ZSIsInN0b3JlZCIsIkFzeW5jU3RvcmFnZSIsImdldEl0ZW0iLCJKU09OIiwicGFyc2UiLCJtYXAiLCJ3YXJuIiwiX3NhdmVTeW5jUXVldWUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiX2xvYWRDb25mbGljdHMiLCJfc2F2ZUNvbmZsaWN0cyIsIl9sb2FkQW5hbHl0aWNzIiwiX3NhdmVBbmFseXRpY3MiLCJfaGFuZGxlU3luY0Vycm9yIiwiX3RoaXM1IiwiRkFJTEVEIiwiaGFuZGxlckVycm9yIiwicmV0cnlhYmxlIiwibWF4UmV0cmllcyIsImRlbGF5IiwibWluIiwicmV0cnlEZWxheSIsInBvdyIsInNldFRpbWVvdXQiLCJjYXRjaCIsIl94MTQiLCJmb3JFYWNoIiwiX3NpbXVsYXRlQVBJQ2FsbCIsIlByb21pc2UiLCJyZXNvbHZlIiwib3ZlcnJpZGVzIiwiYmF0Y2hTaXplIiwidGltZW91dE1zIiwiZW5hYmxlQ29tcHJlc3Npb24iLCJlbmFibGVFbmNyeXB0aW9uIiwiYmFja2dyb3VuZFN5bmNFbmFibGVkIiwic3luY09uQ29ubmVjdCIsInN5bmNPbkZvcmVncm91bmQiLCJwcmlvcml0eVdlaWdodHMiLCJfZGVmaW5lUHJvcGVydHkyIiwiQ1JJVElDQUwiLCJISUdIIiwiTE9XIiwidG90YWxPcGVyYXRpb25zIiwiYnl0ZXNUcmFuc2ZlcnJlZCIsInRvdGFsU3luY3MiLCJhdmVyYWdlU3luY1RpbWUiLCJkYXRhVHJhbnNmZXJyZWQiLCJjb25mbGljdHNSZXNvbHZlZCIsInN0b3JhZ2VFZmZpY2llbmN5IiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIm9mZmxpbmVTeW5jRW5naW5lIiwiX2RlZmF1bHQiXSwic291cmNlcyI6WyJTeW5jRW5naW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW5oYW5jZWQgU3luYyBFbmdpbmUgd2l0aCBJbnRlbGxpZ2VudCBDb25mbGljdCBSZXNvbHV0aW9uXG4gKiBIYW5kbGVzIGJpLWRpcmVjdGlvbmFsIHN5bmNocm9uaXphdGlvbiB3aXRoIHNtYXJ0IGNvbmZsaWN0IGRldGVjdGlvblxuICovXG5cbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmltcG9ydCB7XG4gICAgU3luY1N0YXR1cyxcbiAgICBTeW5jRGlyZWN0aW9uLFxuICAgIFN5bmNQcmlvcml0eSxcbiAgICBTeW5jUHJvZ3Jlc3MsXG4gICAgU3luY0NvbmZpZyxcbiAgICBTeW5jT3BlcmF0aW9uLFxuICAgIFN5bmNDb25mbGljdCxcbiAgICBDb25mbGljdFJlc29sdXRpb24sXG4gICAgQ29uZmxpY3RSZXNvbHV0aW9uU3RyYXRlZ3ksXG4gICAgTWVyZ2VSdWxlLFxuICAgIFN5bmNBbmFseXRpY3MsXG4gICAgU3luY0Vycm9yLFxuICAgIFN5bmNPcGVyYXRpb25UeXBlLFxuICAgIE9mZmxpbmVPcGVyYXRpb24sXG4gICAgTGlzdGVuZXIsXG4gICAgRXJyb3JIYW5kbGVyLFxufSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHsgbG9jYWxEYXRhYmFzZSB9IGZyb20gJy4vTG9jYWxEYXRhYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBTeW5jRW5naW5lIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogU3luY0VuZ2luZTtcbiAgICBwcml2YXRlIGNvbmZpZzogU3luY0NvbmZpZztcbiAgICBwcml2YXRlIHN0YXR1czogU3luY1N0YXR1cyA9IFN5bmNTdGF0dXMuSURMRTtcbiAgICBwcml2YXRlIHByb2dyZXNzOiBTeW5jUHJvZ3Jlc3M7XG4gICAgcHJpdmF0ZSBhbmFseXRpY3M6IFN5bmNBbmFseXRpY3M7XG4gICAgcHJpdmF0ZSBzeW5jUXVldWU6IFN5bmNPcGVyYXRpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgY29uZmxpY3RzOiBTeW5jQ29uZmxpY3RbXSA9IFtdO1xuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBsYXN0U3luY1RpbWU/OiBEYXRlO1xuICAgIHByaXZhdGUgcmV0cnlDb3VudCA9IDA7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICBwcml2YXRlIHByb2dyZXNzTGlzdGVuZXJzID0gbmV3IE1hcDxzdHJpbmcsIExpc3RlbmVyPFN5bmNQcm9ncmVzcz4+KCk7XG4gICAgcHJpdmF0ZSBjb25mbGljdExpc3RlbmVycyA9IG5ldyBNYXA8c3RyaW5nLCBMaXN0ZW5lcjxTeW5jQ29uZmxpY3Q+PigpO1xuICAgIHByaXZhdGUgc3RhdHVzTGlzdGVuZXJzID0gbmV3IE1hcDxzdHJpbmcsIExpc3RlbmVyPFN5bmNTdGF0dXM+PigpO1xuICAgIHByaXZhdGUgZXJyb3JIYW5kbGVyczogRXJyb3JIYW5kbGVyW10gPSBbXTtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoY29uZmlnPzogUGFydGlhbDxTeW5jQ29uZmlnPikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0RGVmYXVsdENvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5nZXRJbml0aWFsUHJvZ3Jlc3MoKTtcbiAgICAgICAgdGhpcy5hbmFseXRpY3MgPSB0aGlzLmdldEluaXRpYWxBbmFseXRpY3MoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKGNvbmZpZz86IFBhcnRpYWw8U3luY0NvbmZpZz4pOiBTeW5jRW5naW5lIHtcbiAgICAgICAgaWYgKCFTeW5jRW5naW5lLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBTeW5jRW5naW5lLmluc3RhbmNlID0gbmV3IFN5bmNFbmdpbmUoY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3luY0VuZ2luZS5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBzeW5jIGVuZ2luZVxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSByZXR1cm47XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgbG9jYWwgZGF0YWJhc2VcbiAgICAgICAgICAgIGF3YWl0IGxvY2FsRGF0YWJhc2UuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAgICAgICAvLyBMb2FkIHBlbmRpbmcgc3luYyBvcGVyYXRpb25zXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTeW5jUXVldWUoKTtcblxuICAgICAgICAgICAgLy8gTG9hZCBleGlzdGluZyBjb25mbGljdHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZENvbmZsaWN0cygpO1xuXG4gICAgICAgICAgICAvLyBMb2FkIGFuYWx5dGljc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQW5hbHl0aWNzKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFN5bmNFbmdpbmUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluaXRpYWxpemUgU3luY0VuZ2luZTonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN5bmNFbmdpbmUgaW5pdGlhbGl6YXRpb24gZmFpbGVkOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBhIGNvbXBsZXRlIHN5bmMgb3BlcmF0aW9uXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIHRyaWdnZXJTeW5jKCk6IFByb21pc2U8U3luY1Byb2dyZXNzPiB7XG4gICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N5bmNFbmdpbmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFN5bmNTdGF0dXMuU1lOQ0lORykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTeW5jIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdHVzKFN5bmNTdGF0dXMuU1lOQ0lORyk7XG4gICAgICAgIHRoaXMuc2V0UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgLi4udGhpcy5wcm9ncmVzcyxcbiAgICAgICAgICAgIHN0YXR1czogU3luY1N0YXR1cy5TWU5DSU5HLFxuICAgICAgICAgICAgcGVyY2VudGFnZTogMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0YXJ0aW5nIHN5bmMgb3BlcmF0aW9uLi4uJyk7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICAvLyBTdGVwIDE6IExvYWQgcGVuZGluZyBvcGVyYXRpb25zXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTeW5jUXVldWUoKTtcblxuICAgICAgICAgICAgLy8gU3RlcCAyOiBQdXNoIGxvY2FsIGNoYW5nZXMgdG8gcmVtb3RlXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNMb2NhbFRvUmVtb3RlKCk7XG5cbiAgICAgICAgICAgIC8vIFN0ZXAgMzogUHVsbCByZW1vdGUgY2hhbmdlcyB0byBsb2NhbFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jUmVtb3RlVG9Mb2NhbCgpO1xuXG4gICAgICAgICAgICAvLyBTdGVwIDQ6IFJlc29sdmUgYW55IGNvbmZsaWN0c1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3RzKCk7XG5cbiAgICAgICAgICAgIC8vIFN0ZXAgNTogQ2xlYW4gdXAgY29tcGxldGVkIG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xlYW51cFN5bmNRdWV1ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICB0aGlzLmxhc3RTeW5jVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmFuYWx5dGljcy5zdWNjZXNzZnVsU3luY3MrKztcbiAgICAgICAgICAgIHRoaXMuYW5hbHl0aWNzLmxhc3RTeW5jRHVyYXRpb24gPSBkdXJhdGlvbjtcblxuICAgICAgICAgICAgLy8gU2F2ZSBhbmFseXRpY3NcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFuYWx5dGljcygpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFN5bmMgY29tcGxldGVkIGluICR7ZHVyYXRpb259bXNgKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3luY1N0YXR1cy5JRExFKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBTeW5jU3RhdHVzLklETEUsXG4gICAgICAgICAgICAgICAgcGVyY2VudGFnZTogMTAwLFxuICAgICAgICAgICAgICAgIGxhc3RTeW5jVGltZTogdGhpcy5sYXN0U3luY1RpbWUsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvZ3Jlc3MoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTeW5jIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmFuYWx5dGljcy5mYWlsZWRTeW5jcysrO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTeW5jRXJyb3IoZXJyb3IgYXMgU3luY0Vycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIG9wZXJhdGlvbiB0byBzeW5jIHF1ZXVlXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGFkZFRvU3luY1F1ZXVlKG9wZXJhdGlvbjogT21pdDxPZmZsaW5lT3BlcmF0aW9uLCAnaWQnIHwgJ3RpbWVzdGFtcCc+KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgc3luY09wZXJhdGlvbjogU3luY09wZXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogU3luY0RpcmVjdGlvbi5QVVNILCAvLyBEZWZhdWx0IGRpcmVjdGlvblxuICAgICAgICAgICAgcHJpb3JpdHk6IG9wZXJhdGlvbi5wcmlvcml0eSxcbiAgICAgICAgICAgIHRhYmxlOiBvcGVyYXRpb24udGFibGUsXG4gICAgICAgICAgICBkYXRhOiBvcGVyYXRpb24uZGF0YSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBvcGVyYXRpb24ubWV0YWRhdGEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zeW5jUXVldWUucHVzaChzeW5jT3BlcmF0aW9uKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU3luY1F1ZXVlKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYPCfk6QgQWRkZWQgdG8gc3luYyBxdWV1ZTogJHtvcGVyYXRpb24udHlwZX0gb24gJHtvcGVyYXRpb24udGFibGV9YCk7XG4gICAgICAgIHJldHVybiBzeW5jT3BlcmF0aW9uLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBvcGVyYXRpb24gd2l0aCBwdWxsIGRpcmVjdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhZGRQdWxsT3BlcmF0aW9uKFxuICAgICAgICB0YWJsZTogc3RyaW5nLFxuICAgICAgICBkYXRhOiBhbnksXG4gICAgICAgIHByaW9yaXR5OiBTeW5jUHJpb3JpdHkgPSBTeW5jUHJpb3JpdHkuTk9STUFMXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgc3luY09wZXJhdGlvbjogU3luY09wZXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgIGRpcmVjdGlvbjogU3luY0RpcmVjdGlvbi5QVUxMLFxuICAgICAgICAgICAgcHJpb3JpdHksXG4gICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zeW5jUXVldWUucHVzaChzeW5jT3BlcmF0aW9uKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU3luY1F1ZXVlKCk7XG5cbiAgICAgICAgcmV0dXJuIHN5bmNPcGVyYXRpb24uaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFudWFsbHkgcmVzb2x2ZSBhIGNvbmZsaWN0XG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIHJlc29sdmVDb25mbGljdE1hbnVhbGx5KFxuICAgICAgICBjb25mbGljdElkOiBzdHJpbmcsXG4gICAgICAgIHJlc29sdXRpb246IENvbmZsaWN0UmVzb2x1dGlvblxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjb25mbGljdEluZGV4ID0gdGhpcy5jb25mbGljdHMuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gY29uZmxpY3RJZCk7XG4gICAgICAgIGlmIChjb25mbGljdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25mbGljdCAke2NvbmZsaWN0SWR9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29uZmxpY3QgPSB0aGlzLmNvbmZsaWN0c1tjb25mbGljdEluZGV4XTtcbiAgICAgICAgY29uZmxpY3QucmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICBjb25mbGljdC5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcblxuICAgICAgICAvLyBBcHBseSB0aGUgcmVzb2x1dGlvblxuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5Q29uZmxpY3RSZXNvbHV0aW9uKGNvbmZsaWN0LCByZXNvbHV0aW9uKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGxvY2FsIGRhdGFiYXNlXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYWxSZWNvcmQoY29uZmxpY3QudGFibGUsIGNvbmZsaWN0LnJlY29yZElkLCByZXNvbHV0aW9uLnJlc29sdmVkRGF0YSk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gY29uZmxpY3RzIGFycmF5XG4gICAgICAgIHRoaXMuY29uZmxpY3RzLnNwbGljZShjb25mbGljdEluZGV4LCAxKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb25mbGljdHMoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIENvbmZsaWN0ICR7Y29uZmxpY3RJZH0gcmVzb2x2ZWQgbWFudWFsbHlgKTtcbiAgICAgICAgdGhpcy5lbWl0Q29uZmxpY3RFdmVudChjb25mbGljdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgc3luYyBwcm9ncmVzc1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQcm9ncmVzcygpOiBTeW5jUHJvZ3Jlc3Mge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnByb2dyZXNzIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgc3luYyBzdGF0dXNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0U3RhdHVzKCk6IFN5bmNTdGF0dXMge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFjdGl2ZSBjb25mbGljdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q29uZmxpY3RzKCk6IFN5bmNDb25mbGljdFtdIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmNvbmZsaWN0c107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHN5bmMgYW5hbHl0aWNzXG4gICAgICovXG4gICAgcHVibGljIGdldEFuYWx5dGljcygpOiBTeW5jQW5hbHl0aWNzIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5hbmFseXRpY3MgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbGFzdCBzeW5jIHRpbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0TGFzdFN5bmNUaW1lKCk6IERhdGUgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0U3luY1RpbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHN5bmMgY29uZmlndXJhdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVDb25maWcobmV3Q29uZmlnOiBQYXJ0aWFsPFN5bmNDb25maWc+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4ubmV3Q29uZmlnIH07XG4gICAgICAgIGNvbnNvbGUubG9nKCfimpnvuI8gU3luYyBjb25maWd1cmF0aW9uIHVwZGF0ZWQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBzeW5jIG9wZXJhdGlvbnNcbiAgICAgKi9cbiAgICBwdWJsaWMgcGF1c2VTeW5jKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFN5bmNTdGF0dXMuU1lOQ0lORykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3luY1N0YXR1cy5QQVVTRUQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KPuO+4jyBTeW5jIHBhdXNlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzdW1lIHN5bmMgb3BlcmF0aW9uc1xuICAgICAqL1xuICAgIHB1YmxpYyByZXN1bWVTeW5jKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFN5bmNTdGF0dXMuUEFVU0VEKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXR1cyhTeW5jU3RhdHVzLklETEUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KWtu+4jyBTeW5jIHJlc3VtZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBwcm9ncmVzcyBsaXN0ZW5lclxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRQcm9ncmVzc0xpc3RlbmVyKGlkOiBzdHJpbmcsIGxpc3RlbmVyOiBMaXN0ZW5lcjxTeW5jUHJvZ3Jlc3M+KTogKCkgPT4gdm9pZCB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NMaXN0ZW5lcnMuc2V0KGlkLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLnByb2dyZXNzTGlzdGVuZXJzLmRlbGV0ZShpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHByb2dyZXNzIGxpc3RlbmVyXG4gICAgICovXG4gICAgcHVibGljIHJlbW92ZVByb2dyZXNzTGlzdGVuZXIoaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnByb2dyZXNzTGlzdGVuZXJzLmRlbGV0ZShpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGNvbmZsaWN0IGxpc3RlbmVyXG4gICAgICovXG4gICAgcHVibGljIGFkZENvbmZsaWN0TGlzdGVuZXIoaWQ6IHN0cmluZywgbGlzdGVuZXI6IExpc3RlbmVyPFN5bmNDb25mbGljdD4pOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb25mbGljdExpc3RlbmVycy5zZXQoaWQsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuY29uZmxpY3RMaXN0ZW5lcnMuZGVsZXRlKGlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgY29uZmxpY3QgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVtb3ZlQ29uZmxpY3RMaXN0ZW5lcihpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29uZmxpY3RMaXN0ZW5lcnMuZGVsZXRlKGlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgc3RhdHVzIGxpc3RlbmVyXG4gICAgICovXG4gICAgcHVibGljIGFkZFN0YXR1c0xpc3RlbmVyKGlkOiBzdHJpbmcsIGxpc3RlbmVyOiBMaXN0ZW5lcjxTeW5jU3RhdHVzPik6ICgpID0+IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXR1c0xpc3RlbmVycy5zZXQoaWQsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMuc3RhdHVzTGlzdGVuZXJzLmRlbGV0ZShpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHN0YXR1cyBsaXN0ZW5lclxuICAgICAqL1xuICAgIHB1YmxpYyByZW1vdmVTdGF0dXNMaXN0ZW5lcihpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXJzLmRlbGV0ZShpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkRXJyb3JIYW5kbGVyKGhhbmRsZXI6IEVycm9ySGFuZGxlcik6ICgpID0+IHZvaWQge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5lcnJvckhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwIHJlc291cmNlc1xuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBkaXNwb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb2dyZXNzTGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuY29uZmxpY3RMaXN0ZW5lcnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaXN0ZW5lcnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5lcnJvckhhbmRsZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTeW5jRW5naW5lIGRpc3Bvc2VkJyk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXG5cbiAgICBwcml2YXRlIGFzeW5jIHN5bmNMb2NhbFRvUmVtb3RlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TpCBTeW5jaW5nIGxvY2FsIGNoYW5nZXMgdG8gcmVtb3RlLi4uJyk7XG5cbiAgICAgICAgY29uc3QgcHVzaE9wZXJhdGlvbnMgPSB0aGlzLnN5bmNRdWV1ZS5maWx0ZXIoXG4gICAgICAgICAgICBvcCA9PiBvcC5kaXJlY3Rpb24gPT09IFN5bmNEaXJlY3Rpb24uUFVTSCB8fCBvcC5kaXJlY3Rpb24gPT09IFN5bmNEaXJlY3Rpb24uQklESVJFQ1RJT05BTFxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjb21wbGV0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiBwdXNoT3BlcmF0aW9ucykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnB1c2hPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWQrKztcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRPcGVyYXRpb25zOiBjb21wbGV0ZWQsXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IE1hdGgucm91bmQoKGNvbXBsZXRlZCAvIHB1c2hPcGVyYXRpb25zLmxlbmd0aCkgKiA1MCksIC8vIDUwJSBmb3IgcHVzaCBwaGFzZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwdXNoIG9wZXJhdGlvbiAke29wZXJhdGlvbi5pZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgZmFpbGVkIGJ1dCBjb250aW51ZSB3aXRoIG90aGVyIG9wZXJhdGlvbnNcbiAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzLmZhaWxlZE9wZXJhdGlvbnMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgUHVzaGVkICR7Y29tcGxldGVkfS8ke3B1c2hPcGVyYXRpb25zLmxlbmd0aH0gb3BlcmF0aW9uc2ApO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc3luY1JlbW90ZVRvTG9jYWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OlIFN5bmNpbmcgcmVtb3RlIGNoYW5nZXMgdG8gbG9jYWwuLi4nKTtcblxuICAgICAgICBjb25zdCBwdWxsT3BlcmF0aW9ucyA9IHRoaXMuc3luY1F1ZXVlLmZpbHRlcihcbiAgICAgICAgICAgIG9wID0+IG9wLmRpcmVjdGlvbiA9PT0gU3luY0RpcmVjdGlvbi5QVUxMIHx8IG9wLmRpcmVjdGlvbiA9PT0gU3luY0RpcmVjdGlvbi5CSURJUkVDVElPTkFMXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGNvbXBsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3Qgb3BlcmF0aW9uIG9mIHB1bGxPcGVyYXRpb25zKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHVsbE9wZXJhdGlvbihvcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZCsrO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFByb2dyZXNzID0gNTAgKyBNYXRoLnJvdW5kKChjb21wbGV0ZWQgLyBwdWxsT3BlcmF0aW9ucy5sZW5ndGgpICogMzApOyAvLyAzMCUgZm9yIHB1bGwgcGhhc2VcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb2dyZXNzKHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkT3BlcmF0aW9uczogY29tcGxldGVkICsgdGhpcy5wcm9ncmVzcy5jb21wbGV0ZWRPcGVyYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBjdXJyZW50UHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHB1bGwgb3BlcmF0aW9uICR7b3BlcmF0aW9uLmlkfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcy5mYWlsZWRPcGVyYXRpb25zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFB1bGxlZCAke2NvbXBsZXRlZH0vJHtwdWxsT3BlcmF0aW9ucy5sZW5ndGh9IG9wZXJhdGlvbnNgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHB1c2hPcGVyYXRpb24ob3BlcmF0aW9uOiBTeW5jT3BlcmF0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBzeW5jIHRvIFN1cGFiYXNlXG4gICAgICAgIGNvbnNvbGUubG9nKGBQdXNoaW5nIG9wZXJhdGlvbiAke29wZXJhdGlvbi5pZH0gdG8gcmVtb3RlYCk7XG5cbiAgICAgICAgLy8gU2ltdWxhdGUgQVBJIGNhbGxcbiAgICAgICAgYXdhaXQgdGhpcy5zaW11bGF0ZUFQSUNhbGwoKTtcblxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgZGF0YWJhc2UgdG8gbWFyayBhcyBzeW5jZWRcbiAgICAgICAgLy8gYXdhaXQgbG9jYWxEYXRhYmFzZS51cGRhdGUob3BlcmF0aW9uLnRhYmxlLCBvcGVyYXRpb24uZGF0YS5pZCwgeyBzeW5jZWQ6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwdWxsT3BlcmF0aW9uKG9wZXJhdGlvbjogU3luY09wZXJhdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgZmV0Y2ggZnJvbSBTdXBhYmFzZVxuICAgICAgICBjb25zb2xlLmxvZyhgUHVsbGluZyBvcGVyYXRpb24gJHtvcGVyYXRpb24uaWR9IGZyb20gcmVtb3RlYCk7XG5cbiAgICAgICAgLy8gU2ltdWxhdGUgQVBJIGNhbGxcbiAgICAgICAgYXdhaXQgdGhpcy5zaW11bGF0ZUFQSUNhbGwoKTtcblxuICAgICAgICAvLyBBcHBseSBwdWxsZWQgZGF0YSB0byBsb2NhbCBkYXRhYmFzZVxuICAgICAgICAvLyBhd2FpdCBsb2NhbERhdGFiYXNlLmluc2VydChvcGVyYXRpb24udGFibGUsIG9wZXJhdGlvbi5kYXRhLCB7IHJldHVybklkOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVzb2x2ZUNvbmZsaWN0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2hlY2tpbmcgZm9yIGNvbmZsaWN0cy4uLicpO1xuXG4gICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBkZXRlY3QgY29uZmxpY3RzIGJldHdlZW4gbG9jYWwgYW5kIHJlbW90ZSBkYXRhXG4gICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIGNvbmZsaWN0IGRldGVjdGlvblxuICAgICAgICBjb25zdCBkZXRlY3RlZENvbmZsaWN0cyA9IGF3YWl0IHRoaXMuZGV0ZWN0Q29uZmxpY3RzKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBjb25mbGljdCBvZiBkZXRlY3RlZENvbmZsaWN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVEZXRlY3RlZENvbmZsaWN0KGNvbmZsaWN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc29sdmUgYXV0b21hdGljYWxseSByZXNvbHZhYmxlIGNvbmZsaWN0c1xuICAgICAgICBhd2FpdCB0aGlzLnJlc29sdmVBdXRvbWF0aWNDb25mbGljdHMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGRldGVjdENvbmZsaWN0cygpOiBQcm9taXNlPFN5bmNDb25mbGljdFtdPiB7XG4gICAgICAgIC8vIFNpbXBsaWZpZWQgY29uZmxpY3QgZGV0ZWN0aW9uXG4gICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoaXMgd291bGQgY29tcGFyZSBsb2NhbCBhbmQgcmVtb3RlIHZlcnNpb25zXG4gICAgICAgIGNvbnN0IGNvbmZsaWN0czogU3luY0NvbmZsaWN0W10gPSBbXTtcblxuICAgICAgICAvLyBTaW11bGF0ZSBmaW5kaW5nIGNvbmZsaWN0c1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOCkgeyAvLyAyMCUgY2hhbmNlIG9mIGNvbmZsaWN0c1xuICAgICAgICAgICAgY29uc3QgY29uZmxpY3Q6IFN5bmNDb25mbGljdCA9IHtcbiAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uSWQ6IHV1aWR2NCgpLFxuICAgICAgICAgICAgICAgIHRhYmxlOiAndGltZXJfc2Vzc2lvbnMnLFxuICAgICAgICAgICAgICAgIHJlY29yZElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICBsb2NhbERhdGE6IHsgbmFtZTogJ0xvY2FsIE5hbWUnIH0sXG4gICAgICAgICAgICAgICAgcmVtb3RlRGF0YTogeyBuYW1lOiAnUmVtb3RlIE5hbWUnIH0sXG4gICAgICAgICAgICAgICAgY29uZmxpY3RUeXBlOiAnZmllbGRfbGV2ZWwnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogWyduYW1lJ10sXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIHJlc29sdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogU3luY1ByaW9yaXR5Lk5PUk1BTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25mbGljdHMucHVzaChjb25mbGljdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29uZmxpY3RzO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlRGV0ZWN0ZWRDb25mbGljdChjb25mbGljdDogU3luY0NvbmZsaWN0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuY29uZmxpY3RzLnB1c2goY29uZmxpY3QpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb25mbGljdHMoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+aqCBDb25mbGljdCBkZXRlY3RlZDogJHtjb25mbGljdC5pZH1gKTtcbiAgICAgICAgdGhpcy5lbWl0Q29uZmxpY3RFdmVudChjb25mbGljdCk7XG5cbiAgICAgICAgLy8gVHJ5IGF1dG9tYXRpYyByZXNvbHV0aW9uIGZpcnN0XG4gICAgICAgIGNvbnN0IGF1dG9SZXNvbHV0aW9uID0gYXdhaXQgdGhpcy5hdHRlbXB0QXV0b21hdGljUmVzb2x1dGlvbihjb25mbGljdCk7XG4gICAgICAgIGlmIChhdXRvUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3RNYW51YWxseShjb25mbGljdC5pZCwgYXV0b1Jlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZXNvbHZlQXV0b21hdGljQ29uZmxpY3RzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB1bnJlc29sdmVkQ29uZmxpY3RzID0gdGhpcy5jb25mbGljdHMuZmlsdGVyKGMgPT4gIWMucmVzb2x2ZWQpO1xuXG4gICAgICAgIGZvciAoY29uc3QgY29uZmxpY3Qgb2YgdW5yZXNvbHZlZENvbmZsaWN0cykge1xuICAgICAgICAgICAgY29uc3QgYXV0b1Jlc29sdXRpb24gPSBhd2FpdCB0aGlzLmF0dGVtcHRBdXRvbWF0aWNSZXNvbHV0aW9uKGNvbmZsaWN0KTtcbiAgICAgICAgICAgIGlmIChhdXRvUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0TWFudWFsbHkoY29uZmxpY3QuaWQsIGF1dG9SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgYXR0ZW1wdEF1dG9tYXRpY1Jlc29sdXRpb24oY29uZmxpY3Q6IFN5bmNDb25mbGljdCk6IFByb21pc2U8Q29uZmxpY3RSZXNvbHV0aW9uIHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBzdHJhdGVneSA9IHRoaXMuY29uZmlnLmNvbmZsaWN0UmVzb2x1dGlvblN0cmF0ZWd5O1xuXG4gICAgICAgIHN3aXRjaCAoc3RyYXRlZ3kudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbGFzdF93cml0ZV93aW5zJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlTGFzdFdyaXRlV2lucyhjb25mbGljdCk7XG5cbiAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlV2l0aE1lcmdlKGNvbmZsaWN0KTtcblxuICAgICAgICAgICAgY2FzZSAnc2VydmVyX2F1dGhvcml0eSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNlcnZlckF1dGhvcml0eShjb25mbGljdCk7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIFJlcXVpcmVzIHVzZXIgaW50ZXJ2ZW50aW9uXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc29sdmVMYXN0V3JpdGVXaW5zKGNvbmZsaWN0OiBTeW5jQ29uZmxpY3QpOiBDb25mbGljdFJlc29sdXRpb24ge1xuICAgICAgICAvLyBVc2UgdGltZXN0YW1wIHRvIGRldGVybWluZSB3aW5uZXJcbiAgICAgICAgY29uc3QgbG9jYWxUaW1lID0gY29uZmxpY3QubG9jYWxEYXRhLnVwZGF0ZWRfYXQgPyBuZXcgRGF0ZShjb25mbGljdC5sb2NhbERhdGEudXBkYXRlZF9hdCkuZ2V0VGltZSgpIDogMDtcbiAgICAgICAgY29uc3QgcmVtb3RlVGltZSA9IGNvbmZsaWN0LnJlbW90ZURhdGEudXBkYXRlZF9hdCA/IG5ldyBEYXRlKGNvbmZsaWN0LnJlbW90ZURhdGEudXBkYXRlZF9hdCkuZ2V0VGltZSgpIDogMDtcblxuICAgICAgICBjb25zdCByZXNvbHZlZERhdGEgPSBsb2NhbFRpbWUgPiByZW1vdGVUaW1lID8gY29uZmxpY3QubG9jYWxEYXRhIDogY29uZmxpY3QucmVtb3RlRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RyYXRlZ3k6IHRoaXMuY29uZmlnLmNvbmZsaWN0UmVzb2x1dGlvblN0cmF0ZWd5LFxuICAgICAgICAgICAgcmVzb2x2ZWREYXRhLFxuICAgICAgICAgICAgcmVzb2x2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHJlc29sdmVkQnk6ICdhdXRvbWF0aWNfbGFzdF93cml0ZV93aW5zJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc29sdmVXaXRoTWVyZ2UoY29uZmxpY3Q6IFN5bmNDb25mbGljdCk6IENvbmZsaWN0UmVzb2x1dGlvbiB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkRGF0YSA9IHsgLi4uY29uZmxpY3QubG9jYWxEYXRhIH07XG5cbiAgICAgICAgLy8gQXBwbHkgbWVyZ2UgcnVsZXNcbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBjb25mbGljdC5maWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmNvbmZpZy5jb25mbGljdFJlc29sdXRpb25TdHJhdGVneS5tZXJnZVJ1bGVzPy5bZmllbGRdO1xuICAgICAgICAgICAgaWYgKHJ1bGUpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJ1bGUuc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFrZV9sb2NhbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZERhdGFbZmllbGRdID0gY29uZmxpY3QubG9jYWxEYXRhW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0YWtlX3JlbW90ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZERhdGFbZmllbGRdID0gY29uZmxpY3QucmVtb3RlRGF0YVtmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3VzdG9tIG1lcmdlIGxvZ2ljXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZERhdGFbZmllbGRdID0gdGhpcy5tZXJnZUZpZWxkKGZpZWxkLCBjb25mbGljdC5sb2NhbERhdGFbZmllbGRdLCBjb25mbGljdC5yZW1vdGVEYXRhW2ZpZWxkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RyYXRlZ3k6IHRoaXMuY29uZmlnLmNvbmZsaWN0UmVzb2x1dGlvblN0cmF0ZWd5LFxuICAgICAgICAgICAgcmVzb2x2ZWREYXRhLFxuICAgICAgICAgICAgcmVzb2x2ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHJlc29sdmVkQnk6ICdhdXRvbWF0aWNfbWVyZ2UnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzb2x2ZVNlcnZlckF1dGhvcml0eShjb25mbGljdDogU3luY0NvbmZsaWN0KTogQ29uZmxpY3RSZXNvbHV0aW9uIHtcbiAgICAgICAgLy8gQWx3YXlzIGZhdm9yIHJlbW90ZSBkYXRhXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdHJhdGVneTogdGhpcy5jb25maWcuY29uZmxpY3RSZXNvbHV0aW9uU3RyYXRlZ3ksXG4gICAgICAgICAgICByZXNvbHZlZERhdGE6IGNvbmZsaWN0LnJlbW90ZURhdGEsXG4gICAgICAgICAgICByZXNvbHZlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgcmVzb2x2ZWRCeTogJ2F1dG9tYXRpY19zZXJ2ZXJfYXV0aG9yaXR5JyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1lcmdlRmllbGQoZmllbGQ6IHN0cmluZywgbG9jYWxWYWx1ZTogYW55LCByZW1vdGVWYWx1ZTogYW55KTogYW55IHtcbiAgICAgICAgLy8gU2ltcGxpZmllZCBtZXJnZSBsb2dpYyAtIGluIHByb2R1Y3Rpb24gdGhpcyB3b3VsZCBiZSBtb3JlIHNvcGhpc3RpY2F0ZWRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobG9jYWxWYWx1ZSkgJiYgQXJyYXkuaXNBcnJheShyZW1vdGVWYWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIE1lcmdlIGFycmF5cyAoYXZvaWRpbmcgZHVwbGljYXRlcylcbiAgICAgICAgICAgIHJldHVybiBbLi4ubmV3IFNldChbLi4ubG9jYWxWYWx1ZSwgLi4ucmVtb3RlVmFsdWVdKV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGxvY2FsVmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiByZW1vdGVWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vIE1lcmdlIG9iamVjdHNcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnJlbW90ZVZhbHVlLCAuLi5sb2NhbFZhbHVlIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZhdWx0IHRvIHJlbW90ZSB2YWx1ZVxuICAgICAgICByZXR1cm4gcmVtb3RlVmFsdWUgfHwgbG9jYWxWYWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGFwcGx5Q29uZmxpY3RSZXNvbHV0aW9uKGNvbmZsaWN0OiBTeW5jQ29uZmxpY3QsIHJlc29sdXRpb246IENvbmZsaWN0UmVzb2x1dGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBVcGRhdGUgdGhlIG9wZXJhdGlvbiBpbiBzeW5jIHF1ZXVlIHRvIG1hcmsgYXMgcmVzb2x2ZWRcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uSW5kZXggPSB0aGlzLnN5bmNRdWV1ZS5maW5kSW5kZXgob3AgPT4gb3AuaWQgPT09IGNvbmZsaWN0Lm9wZXJhdGlvbklkKTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbkluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3luY1F1ZXVlW29wZXJhdGlvbkluZGV4XS5kYXRhID0gcmVzb2x1dGlvbi5yZXNvbHZlZERhdGE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUxvY2FsUmVjb3JkKHRhYmxlOiBzdHJpbmcsIHJlY29yZElkOiBzdHJpbmcsIGRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbG9jYWxEYXRhYmFzZS51cGRhdGUodGFibGUsIHJlY29yZElkLCBkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVcGRhdGVkIGxvY2FsIHJlY29yZCAke3RhYmxlfToke3JlY29yZElkfWApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBsb2NhbCByZWNvcmQgJHt0YWJsZX06JHtyZWNvcmRJZH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjbGVhbnVwU3luY1F1ZXVlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBSZW1vdmUgc3VjY2Vzc2Z1bGx5IHN5bmNlZCBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuc3luY1F1ZXVlID0gdGhpcy5zeW5jUXVldWUuZmlsdGVyKG9wID0+ICFvcC5kYXRhLnN5bmNlZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVN5bmNRdWV1ZSgpO1xuICAgICAgICBjb25zb2xlLmxvZyhgQ2xlYW5lZCB1cCBzeW5jIHF1ZXVlLCAke3RoaXMuc3luY1F1ZXVlLmxlbmd0aH0gb3BlcmF0aW9ucyByZW1haW5pbmdgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTeW5jUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbSgnc3luY19xdWV1ZScpO1xuICAgICAgICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3luY1F1ZXVlID0gSlNPTi5wYXJzZShzdG9yZWQpLm1hcCgob3A6IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3AsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUob3AudGltZXN0YW1wKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHN5bmMgcXVldWU6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5zeW5jUXVldWUgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVN5bmNRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IEFzeW5jU3RvcmFnZS5zZXRJdGVtKCdzeW5jX3F1ZXVlJywgSlNPTi5zdHJpbmdpZnkodGhpcy5zeW5jUXVldWUpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgc3luYyBxdWV1ZTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRDb25mbGljdHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yZWQgPSBhd2FpdCBBc3luY1N0b3JhZ2UuZ2V0SXRlbSgnc3luY19jb25mbGljdHMnKTtcbiAgICAgICAgICAgIGlmIChzdG9yZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZsaWN0cyA9IEpTT04ucGFyc2Uoc3RvcmVkKS5tYXAoKGNvbmZsaWN0OiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbmZsaWN0LFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKGNvbmZsaWN0LnRpbWVzdGFtcCksXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVkQXQ6IGNvbmZsaWN0LnJlc29sdmVkQXQgPyBuZXcgRGF0ZShjb25mbGljdC5yZXNvbHZlZEF0KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGNvbmZsaWN0czonLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmNvbmZsaWN0cyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQ29uZmxpY3RzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oJ3N5bmNfY29uZmxpY3RzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5jb25mbGljdHMpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgY29uZmxpY3RzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZEFuYWx5dGljcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZCA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKCdzeW5jX2FuYWx5dGljcycpO1xuICAgICAgICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5hbHl0aWNzID0gSlNPTi5wYXJzZShzdG9yZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBhbmFseXRpY3M6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQW5hbHl0aWNzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oJ3N5bmNfYW5hbHl0aWNzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5hbmFseXRpY3MpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgYW5hbHl0aWNzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlU3luY0Vycm9yKGVycm9yOiBTeW5jRXJyb3IpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3luY1N0YXR1cy5GQUlMRUQpO1xuXG4gICAgICAgIC8vIEVtaXQgdG8gZXJyb3IgaGFuZGxlcnNcbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIHRoaXMuZXJyb3JIYW5kbGVycykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKGVycm9yKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGhhbmRsZXJFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgaW4gZXJyb3IgaGFuZGxlcjonLCBoYW5kbGVyRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW1wbGVtZW50IHJldHJ5IGxvZ2ljXG4gICAgICAgIGlmIChlcnJvci5yZXRyeWFibGUgJiYgdGhpcy5yZXRyeUNvdW50IDwgdGhpcy5jb25maWcubWF4UmV0cmllcykge1xuICAgICAgICAgICAgdGhpcy5yZXRyeUNvdW50Kys7XG4gICAgICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgubWluKHRoaXMuY29uZmlnLnJldHJ5RGVsYXkgKiBNYXRoLnBvdygyLCB0aGlzLnJldHJ5Q291bnQpLCAzMDAwMCk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyBzeW5jIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHt0aGlzLnJldHJ5Q291bnR9KWApO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlclN5bmMoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U3RhdHVzKHN0YXR1czogU3luY1N0YXR1cyk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5zdGF0dXNMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihzdGF0dXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFByb2dyZXNzKHByb2dyZXNzOiBTeW5jUHJvZ3Jlc3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICB0aGlzLnByb2dyZXNzTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIocHJvZ3Jlc3MpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGVtaXRDb25mbGljdEV2ZW50KGNvbmZsaWN0OiBTeW5jQ29uZmxpY3QpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb25mbGljdExpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGNvbmZsaWN0KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzaW11bGF0ZUFQSUNhbGwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgZGVsYXlcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgucmFuZG9tKCkgKiA1MDAgKyAxMDApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERlZmF1bHRDb25maWcob3ZlcnJpZGVzPzogUGFydGlhbDxTeW5jQ29uZmlnPik6IFN5bmNDb25maWcge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmF0Y2hTaXplOiA1MCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgICAgICByZXRyeURlbGF5OiAxMDAwLFxuICAgICAgICAgICAgdGltZW91dE1zOiAzMDAwMCxcbiAgICAgICAgICAgIGVuYWJsZUNvbXByZXNzaW9uOiB0cnVlLFxuICAgICAgICAgICAgZW5hYmxlRW5jcnlwdGlvbjogZmFsc2UsXG4gICAgICAgICAgICBjb25mbGljdFJlc29sdXRpb25TdHJhdGVneToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdsYXN0X3dyaXRlX3dpbnMnLFxuICAgICAgICAgICAgICAgIG1lcmdlUnVsZXM6IHt9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJhY2tncm91bmRTeW5jRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIHN5bmNPbkNvbm5lY3Q6IHRydWUsXG4gICAgICAgICAgICBzeW5jT25Gb3JlZ3JvdW5kOiB0cnVlLFxuICAgICAgICAgICAgcHJpb3JpdHlXZWlnaHRzOiB7XG4gICAgICAgICAgICAgICAgW1N5bmNQcmlvcml0eS5DUklUSUNBTF06IDQsXG4gICAgICAgICAgICAgICAgW1N5bmNQcmlvcml0eS5ISUdIXTogMyxcbiAgICAgICAgICAgICAgICBbU3luY1ByaW9yaXR5Lk5PUk1BTF06IDIsXG4gICAgICAgICAgICAgICAgW1N5bmNQcmlvcml0eS5MT1ddOiAxLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLm92ZXJyaWRlcyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEluaXRpYWxQcm9ncmVzcygpOiBTeW5jUHJvZ3Jlc3Mge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBTeW5jU3RhdHVzLklETEUsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICAgICAgdG90YWxPcGVyYXRpb25zOiAwLFxuICAgICAgICAgICAgY29tcGxldGVkT3BlcmF0aW9uczogMCxcbiAgICAgICAgICAgIGZhaWxlZE9wZXJhdGlvbnM6IDAsXG4gICAgICAgICAgICBieXRlc1RyYW5zZmVycmVkOiAwLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5pdGlhbEFuYWx5dGljcygpOiBTeW5jQW5hbHl0aWNzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsU3luY3M6IDAsXG4gICAgICAgICAgICBzdWNjZXNzZnVsU3luY3M6IDAsXG4gICAgICAgICAgICBmYWlsZWRTeW5jczogMCxcbiAgICAgICAgICAgIGF2ZXJhZ2VTeW5jVGltZTogMCxcbiAgICAgICAgICAgIGRhdGFUcmFuc2ZlcnJlZDogMCxcbiAgICAgICAgICAgIGNvbmZsaWN0c1Jlc29sdmVkOiAwLFxuICAgICAgICAgICAgc3RvcmFnZUVmZmljaWVuY3k6IDEsXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3Qgb2ZmbGluZVN5bmNFbmdpbmUgPSBTeW5jRW5naW5lLmdldEluc3RhbmNlKCk7XG5leHBvcnQgZGVmYXVsdCBTeW5jRW5naW5lOyJdLCJtYXBwaW5n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