{"version":3,"names":["_TestHelpers","require","_TestConstants","describe","mockFakeCallService","mockVoiceSynthesisService","mockCallerIDService","beforeAll","TestSetupHelper","setupTestEnvironment","createMockFakeCallService","createMockVoiceSynthesisService","createMockCallerIDService","afterAll","cleanupTestEnvironment","beforeEach","jest","clearAllMocks","test","_asyncToGenerator2","default","iOSCapabilities","PLATFORM_CAPABILITIES","IOS","expect","hasCallKit","toBe","canCriticalAlerts","callKitIntegration","provider","reportIncomingCall","fn","mockImplementation","callUUID","handle","success","nativeCall","reportedAt","Date","incomingCall","callKitLimitations","maxCallDuration","requiresMicrophonePermission","criticalAlertsRequiresPermission","androidCapabilities","ANDROID","hasInCallService","canFullScreenIntent","telecomIntegration","connectionService","createFakeConnection","phoneNumber","displayName","connectionId","now","state","connection","webCapabilities","WEB","canBackgroundAudio","canBadge","webSpeechIntegration","speechSynthesis","supported","window","speak","text","voice","name","started","spoken","platformAPIs","ios","initialize","scheduleCall","triggerCall","endCall","android","web","methods","Object","keys","forEach","method","platformLimitations","supportsBackgroundAudio","supportsFullScreenIntent","supportsCriticalAlerts","getAdaptedConfig","platform","baseConfig","limits","adaptedConfig","assign","callDuration","adaptedForPlatform","config","limitations","iosAdapted","webAdapted","_default","exports","PlatformSpecificTests"],"sources":["PlatformSpecificTests.test.ts"],"sourcesContent":["/**\n * Platform Specific Tests - Cross-Platform Compatibility Tests\n * Comprehensive testing for iOS, Android, and Web platform compatibility\n */\n\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport {\n    FakeCallService,\n    voiceSynthesisService,\n    callerIDService\n} from '../FakeCallService';\nimport {\n    CallState,\n    CallAction\n} from '../types';\n\nimport {\n    MockDeviceInfoFactory,\n    MockVoiceProfileFactory,\n    MockFakeCallConfigFactory,\n    MockCallScheduleFactory,\n    MockCallStateDataFactory\n} from './MockFactories';\n\nimport {\n    TestSetupHelper,\n    PerformanceTestHelper\n} from './TestHelpers';\n\nimport {\n    PLATFORM_CAPABILITIES,\n    PLATFORM_TEST_DATA,\n    TEST_TIMEOUTS\n} from './TestConstants';\n\ndescribe('PlatformSpecificTests', () => {\n    let mockFakeCallService: any;\n    let mockVoiceSynthesisService: any;\n    let mockCallerIDService: any;\n\n    beforeAll(() => {\n        TestSetupHelper.setupTestEnvironment();\n        mockFakeCallService = TestSetupHelper.createMockFakeCallService();\n        mockVoiceSynthesisService = TestSetupHelper.createMockVoiceSynthesisService();\n        mockCallerIDService = TestSetupHelper.createMockCallerIDService();\n    });\n\n    afterAll(() => {\n        TestSetupHelper.cleanupTestEnvironment();\n    });\n\n    beforeEach(() => {\n        jest.clearAllMocks();\n    });\n\n    // ===========================================\n    // iOS PLATFORM TESTS\n    // ===========================================\n\n    describe('iOS Platform Tests', () => {\n        test('should support CallKit integration', async () => {\n            const iOSCapabilities = PLATFORM_CAPABILITIES.IOS;\n\n            expect(iOSCapabilities.hasCallKit).toBe(true);\n            expect(iOSCapabilities.canCriticalAlerts).toBe(true);\n\n            const callKitIntegration = {\n                provider: {\n                    reportIncomingCall: jest.fn().mockImplementation((callUUID: string, handle: string) => {\n                        return {\n                            success: true,\n                            callUUID,\n                            handle,\n                            nativeCall: true,\n                            reportedAt: new Date()\n                        };\n                    })\n                }\n            };\n\n            const incomingCall = callKitIntegration.provider.reportIncomingCall(\n                'test-call-uuid',\n                'John Smith'\n            );\n\n            expect(incomingCall.success).toBe(true);\n            expect(incomingCall.nativeCall).toBe(true);\n        });\n\n        test('should handle iOS CallKit limitations', async () => {\n            const callKitLimitations = {\n                maxCallDuration: 300,\n                requiresMicrophonePermission: true,\n                criticalAlertsRequiresPermission: true\n            };\n\n            expect(callKitLimitations.maxCallDuration).toBe(300);\n            expect(callKitLimitations.requiresMicrophonePermission).toBe(true);\n        });\n    });\n\n    // ===========================================\n    // ANDROID PLATFORM TESTS\n    // ===========================================\n\n    describe('Android Platform Tests', () => {\n        test('should support TelecomManager integration', async () => {\n            const androidCapabilities = PLATFORM_CAPABILITIES.ANDROID;\n\n            expect(androidCapabilities.hasInCallService).toBe(true);\n            expect(androidCapabilities.canFullScreenIntent).toBe(true);\n\n            const telecomIntegration = {\n                connectionService: {\n                    createFakeConnection: jest.fn().mockImplementation((phoneNumber: string, displayName: string) => {\n                        return {\n                            success: true,\n                            connectionId: `conn_${Date.now()}`,\n                            phoneNumber,\n                            displayName,\n                            state: 'DIALING'\n                        };\n                    })\n                }\n            };\n\n            const connection = telecomIntegration.connectionService.createFakeConnection(\n                '+1-555-123-4567',\n                'John Smith'\n            );\n\n            expect(connection.success).toBe(true);\n            expect(connection.state).toBe('DIALING');\n        });\n    });\n\n    // ===========================================\n    // WEB PLATFORM TESTS\n    // ===========================================\n\n    describe('Web Platform Tests', () => {\n        test('should support Web Speech API', async () => {\n            const webCapabilities = PLATFORM_CAPABILITIES.WEB;\n\n            expect(webCapabilities.canBackgroundAudio).toBe(false);\n            expect(webCapabilities.canBadge).toBe(false);\n\n            const webSpeechIntegration = {\n                speechSynthesis: {\n                    supported: typeof window !== 'undefined' && 'speechSynthesis' in window,\n\n                    speak: jest.fn().mockImplementation((text: string, voice: any) => {\n                        return {\n                            success: true,\n                            text,\n                            voice: voice?.name || 'default',\n                            started: true\n                        };\n                    })\n                }\n            };\n\n            if (webSpeechIntegration.speechSynthesis.supported) {\n                const spoken = webSpeechIntegration.speechSynthesis.speak(\n                    'Hello, this is a test call',\n                    { name: 'Google US English' }\n                );\n                expect(spoken.success).toBe(true);\n            }\n        });\n    });\n\n    // ===========================================\n    // CROSS-PLATFORM COMPATIBILITY TESTS\n    // ===========================================\n\n    describe('Cross-Platform Compatibility Tests', () => {\n        test('should maintain consistent API across platforms', async () => {\n            const platformAPIs = {\n                ios: {\n                    initialize: 'async () => FakeCallResult',\n                    scheduleCall: 'async (config) => CallSchedulingResult',\n                    triggerCall: 'async (callId) => CallInitializationResult',\n                    endCall: 'async (callId) => FakeCallResult'\n                },\n                android: {\n                    initialize: 'async () => FakeCallResult',\n                    scheduleCall: 'async (config) => CallSchedulingResult',\n                    triggerCall: 'async (callId) => CallInitializationResult',\n                    endCall: 'async (callId) => FakeCallResult'\n                },\n                web: {\n                    initialize: 'async () => FakeCallResult',\n                    scheduleCall: 'async (config) => CallSchedulingResult',\n                    triggerCall: 'async (callId) => CallInitializationResult',\n                    endCall: 'async (callId) => FakeCallResult'\n                }\n            };\n\n            const methods = Object.keys(platformAPIs.ios);\n            methods.forEach(method => {\n                expect(platformAPIs.ios[method]).toBe(platformAPIs.android[method]);\n                expect(platformAPIs.ios[method]).toBe(platformAPIs.web[method]);\n            });\n        });\n\n        test('should adapt to platform-specific limitations', async () => {\n            const platformLimitations = {\n                ios: {\n                    maxCallDuration: 300,\n                    supportsBackgroundAudio: true,\n                    supportsFullScreenIntent: false,\n                    supportsCriticalAlerts: true\n                },\n                android: {\n                    maxCallDuration: 600,\n                    supportsBackgroundAudio: true,\n                    supportsFullScreenIntent: true,\n                    supportsCriticalAlerts: false\n                },\n                web: {\n                    maxCallDuration: 180,\n                    supportsBackgroundAudio: false,\n                    supportsFullScreenIntent: false,\n                    supportsCriticalAlerts: false\n                }\n            };\n\n            const getAdaptedConfig = (platform: string, baseConfig: any) => {\n                const limits = platformLimitations[platform];\n                const adaptedConfig = { ...baseConfig };\n\n                if (adaptedConfig.callDuration > limits.maxCallDuration) {\n                    adaptedConfig.callDuration = limits.maxCallDuration;\n                    adaptedConfig.adaptedForPlatform = true;\n                }\n\n                return {\n                    config: adaptedConfig,\n                    limitations: limits\n                };\n            };\n\n            const baseConfig = { callDuration: 400 };\n\n            const iosAdapted = getAdaptedConfig('ios', baseConfig);\n            expect(iosAdapted.config.callDuration).toBe(300);\n            expect(iosAdapted.config.adaptedForPlatform).toBe(true);\n\n            const webAdapted = getAdaptedConfig('web', baseConfig);\n            expect(webAdapted.config.callDuration).toBe(180);\n        });\n    });\n});\n\nexport default PlatformSpecificTests;"],"mappings":"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","ignoreList":[]}