{"version":3,"names":["_netinfo","_interopRequireDefault","require","_types","NetworkConnectivityService","exports","_classCallCheck2","default","currentState","listeners","Map","isInitialized","validationCache","lastValidationTime","VALIDATION_CACHE_TTL","unsubscribe","status","getDefaultStatus","_createClass2","key","value","_initialize","_asyncToGenerator2","_this","NetInfo","addEventListener","state","handleNetworkStateChange","initialState","getCurrentNetworkState","setCurrentState","console","log","error","initialize","apply","arguments","getCurrentState","_refreshNetworkState","refreshNetworkState","_validateConnection","now","Date","cached","get","startTime","performance","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","headers","clearTimeout","endTime","latency","isValid","ok","result","downloadSpeed","estimateSpeed","timestamp","set","toFixed","warn","undefined","Error","message","validateConnection","_testBandwidth","testUrl","data","arrayBuffer","duration","bytes","byteLength","bits","speedBps","speedMbps","uploadSpeed","testBandwidth","addListener","id","listener","_this2","delete","removeListener","getStatus","_this$currentState$is","_this$currentState","_this$currentState$qu","_this$currentState2","_this$currentState$la","_this$currentState3","Object","assign","initialized","connected","isConnected","quality","NetworkQuality","POOR","lastCheck","lastChecked","isQualityGoodForSync","GOOD","EXCELLENT","isSuitableForBackgroundSync","_this$currentState4","getRecommendedSyncInterval","FAIR","_dispose","clear","dispose","_getCurrentNetworkState","_state$isConnected","assessNetworkQuality","isInternetReachable","validation","type","determineNetworkStatus","NetworkStatus","UNKNOWN","_state$isConnected2","_state$isInternetReac","reachable","newState","DISCONNECTED","CONNECTED","CONNECTING","forEach","getInstance","instance","networkConnectivityService","_default"],"sources":["NetworkConnectivityService.ts"],"sourcesContent":["/**\n * Network Connectivity Service\n * Monitors and validates network connectivity with quality assessment\n */\n\nimport NetInfo from '@react-native-community/netinfo';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {\n    NetworkState,\n    NetworkStatus,\n    NetworkQuality,\n    ValidationResult,\n    NetworkServiceStatus,\n    Listener,\n} from './types';\n\nexport class NetworkConnectivityService {\n    private static instance: NetworkConnectivityService;\n    private currentState: NetworkState | null = null;\n    private listeners = new Map<string, Listener<NetworkState>>();\n    private status: NetworkServiceStatus;\n    private isInitialized = false;\n    private validationCache = new Map<string, ValidationResult>();\n    private lastValidationTime = 0;\n    private readonly VALIDATION_CACHE_TTL = 30000; // 30 seconds\n    private unsubscribe: (() => void) | null = null;\n\n    private constructor() {\n        this.status = this.getDefaultStatus();\n    }\n\n    public static getInstance(): NetworkConnectivityService {\n        if (!NetworkConnectivityService.instance) {\n            NetworkConnectivityService.instance = new NetworkConnectivityService();\n        }\n        return NetworkConnectivityService.instance;\n    }\n\n    /**\n     * Initialize the network connectivity service\n     */\n    public async initialize(): Promise<void> {\n        if (this.isInitialized) return;\n\n        try {\n            // Subscribe to network state changes\n            this.unsubscribe = NetInfo.addEventListener((state) => {\n                this.handleNetworkStateChange(state);\n            });\n\n            // Get initial network state\n            const initialState = await this.getCurrentNetworkState();\n            this.setCurrentState(initialState);\n\n            this.isInitialized = true;\n            console.log('‚úÖ NetworkConnectivityService initialized');\n        } catch (error) {\n            console.error('‚ùå Failed to initialize NetworkConnectivityService:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Get current network state\n     */\n    public getCurrentState(): NetworkState | null {\n        return this.currentState;\n    }\n\n    /**\n     * Refresh network state by checking connectivity\n     */\n    public async refreshNetworkState(): Promise<NetworkState> {\n        try {\n            const state = await this.getCurrentNetworkState();\n            this.setCurrentState(state);\n            return state;\n        } catch (error) {\n            console.error('Failed to refresh network state:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Validate internet connectivity with speed test\n     */\n    public async validateConnection(): Promise<ValidationResult> {\n        const now = Date.now();\n\n        // Check if we have a recent validation result\n        if (now - this.lastValidationTime < this.VALIDATION_CACHE_TTL) {\n            const cached = this.validationCache.get('default');\n            if (cached) {\n                return cached;\n            }\n        }\n\n        const startTime = performance.now();\n\n        try {\n            // Test connectivity with a simple request\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n            const response = await fetch('https://www.google.com/favicon.ico', {\n                method: 'HEAD',\n                signal: controller.signal,\n                headers: {\n                    'Cache-Control': 'no-cache',\n                },\n            });\n\n            clearTimeout(timeoutId);\n\n            const endTime = performance.now();\n            const latency = endTime - startTime;\n            const isValid = response.ok;\n\n            const result: ValidationResult = {\n                isValid,\n                latency,\n                downloadSpeed: this.estimateSpeed(latency),\n                timestamp: new Date(),\n            };\n\n            // Cache the result\n            this.validationCache.set('default', result);\n            this.lastValidationTime = now;\n\n            console.log(`üåê Connection validated: ${isValid ? 'OK' : 'FAILED'} (${latency.toFixed(0)}ms)`);\n\n            return result;\n        } catch (error) {\n            console.warn('Connection validation failed:', error);\n\n            const result: ValidationResult = {\n                isValid: false,\n                latency: undefined,\n                downloadSpeed: 0,\n                error: error instanceof Error ? error.message : 'Unknown error',\n                timestamp: new Date(),\n            };\n\n            // Cache the failed result for a shorter time\n            this.validationCache.set('default', result);\n            this.lastValidationTime = now;\n\n            return result;\n        }\n    }\n\n    /**\n     * Test bandwidth by downloading a small file\n     */\n    public async testBandwidth(): Promise<{ downloadSpeed: number; uploadSpeed?: number }> {\n        const testUrl = 'https://httpbin.org/bytes/1024'; // 1KB test file\n\n        try {\n            const startTime = performance.now();\n\n            const response = await fetch(testUrl);\n            const data = await response.arrayBuffer();\n\n            const endTime = performance.now();\n            const duration = (endTime - startTime) / 1000; // Convert to seconds\n\n            const bytes = data.byteLength;\n            const bits = bytes * 8;\n            const speedBps = bits / duration;\n            const speedMbps = speedBps / (1024 * 1024);\n\n            return {\n                downloadSpeed: speedMbps,\n                uploadSpeed: undefined, // Would need separate test for upload\n            };\n        } catch (error) {\n            console.warn('Bandwidth test failed:', error);\n            return {\n                downloadSpeed: 0,\n                uploadSpeed: undefined,\n            };\n        }\n    }\n\n    /**\n     * Add listener for network state changes\n     */\n    public addListener(id: string, listener: Listener<NetworkState>): () => void {\n        this.listeners.set(id, listener);\n\n        // Immediately call with current state if available\n        if (this.currentState) {\n            setTimeout(() => listener(this.currentState!), 0);\n        }\n\n        return () => this.listeners.delete(id);\n    }\n\n    /**\n     * Remove network state listener\n     */\n    public removeListener(id: string): void {\n        this.listeners.delete(id);\n    }\n\n    /**\n     * Get service status\n     */\n    public getStatus(): NetworkServiceStatus {\n        return {\n            ...this.status,\n            initialized: this.isInitialized,\n            connected: this.currentState?.isConnected ?? false,\n            quality: this.currentState?.quality ?? NetworkQuality.POOR,\n            lastCheck: this.currentState?.lastChecked ?? new Date(),\n        };\n    }\n\n    /**\n     * Check if network quality is good for sync operations\n     */\n    public isQualityGoodForSync(): boolean {\n        if (!this.currentState) return false;\n\n        return this.currentState.quality === NetworkQuality.GOOD ||\n            this.currentState.quality === NetworkQuality.EXCELLENT;\n    }\n\n    /**\n     * Check if network is suitable for background operations\n     */\n    public isSuitableForBackgroundSync(): boolean {\n        if (!this.currentState?.isConnected) return false;\n\n        // Don't sync on poor connections\n        return this.currentState.quality !== NetworkQuality.POOR;\n    }\n\n    /**\n     * Get recommended sync interval based on network quality\n     */\n    public getRecommendedSyncInterval(): number {\n        if (!this.currentState) return 300000; // Default 5 minutes\n\n        switch (this.currentState.quality) {\n            case NetworkQuality.EXCELLENT:\n                return 60000; // 1 minute\n            case NetworkQuality.GOOD:\n                return 180000; // 3 minutes\n            case NetworkQuality.FAIR:\n                return 600000; // 10 minutes\n            case NetworkQuality.POOR:\n            default:\n                return 1800000; // 30 minutes or manual only\n        }\n    }\n\n    /**\n     * Dispose of service resources\n     */\n    public async dispose(): Promise<void> {\n        if (this.unsubscribe) {\n            this.unsubscribe();\n            this.unsubscribe = null;\n        }\n\n        this.listeners.clear();\n        this.validationCache.clear();\n        this.isInitialized = false;\n\n        console.log('NetworkConnectivityService disposed');\n    }\n\n    // Private methods\n\n    private async getCurrentNetworkState(): Promise<NetworkState> {\n        try {\n            const state = await NetInfo.fetch();\n\n            // Assess network quality\n            const quality = this.assessNetworkQuality(state);\n\n            // Test actual connectivity if we have a connection\n            let isInternetReachable = state.isConnected;\n            let downloadSpeed: number | undefined;\n\n            if (state.isConnected) {\n                try {\n                    const validation = await this.validateConnection();\n                    isInternetReachable = validation.isValid;\n                    downloadSpeed = validation.downloadSpeed;\n                } catch (error) {\n                    console.warn('Failed to validate internet connectivity:', error);\n                    isInternetReachable = false;\n                }\n            }\n\n            return {\n                isConnected: state.isConnected ?? false,\n                isInternetReachable,\n                type: state.type || 'unknown',\n                quality,\n                status: this.determineNetworkStatus(state),\n                downloadSpeed,\n                uploadSpeed: undefined, // Would need separate test\n                latency: undefined, // Would need separate test\n                lastChecked: new Date(),\n            };\n        } catch (error) {\n            console.error('Failed to get network state:', error);\n\n            // Return offline state on error\n            return {\n                isConnected: false,\n                isInternetReachable: false,\n                type: 'unknown',\n                quality: NetworkQuality.POOR,\n                status: NetworkStatus.UNKNOWN,\n                lastChecked: new Date(),\n            };\n        }\n    }\n\n    private handleNetworkStateChange(state: any): void {\n        console.log('üì° Network state changed:', {\n            connected: state.isConnected,\n            type: state.type,\n            reachable: state.isInternetReachable,\n        });\n\n        // Assess new quality\n        const quality = this.assessNetworkQuality(state);\n\n        const newState: NetworkState = {\n            isConnected: state.isConnected ?? false,\n            isInternetReachable: state.isInternetReachable ?? false,\n            type: state.type || 'unknown',\n            quality,\n            status: this.determineNetworkStatus(state),\n            lastChecked: new Date(),\n        };\n\n        this.setCurrentState(newState);\n    }\n\n    private assessNetworkQuality(state: any): NetworkQuality {\n        // If not connected, quality is poor\n        if (!state.isConnected) {\n            return NetworkQuality.POOR;\n        }\n\n        // Determine quality based on connection type and speed\n        switch (state.type) {\n            case 'wifi':\n                // Assume WiFi is generally good\n                return NetworkQuality.GOOD;\n\n            case 'cellular':\n                // Cellular quality depends on generation\n                // This would need more detailed cellular info in a real implementation\n                return NetworkQuality.FAIR;\n\n            case 'ethernet':\n                return NetworkQuality.EXCELLENT;\n\n            case 'bluetooth':\n            case 'vpn':\n                return NetworkQuality.FAIR;\n\n            default:\n                return NetworkQuality.FAIR;\n        }\n    }\n\n    private determineNetworkStatus(state: any): NetworkStatus {\n        if (!state.isConnected) {\n            return NetworkStatus.DISCONNECTED;\n        }\n\n        if (state.isInternetReachable === false) {\n            return NetworkStatus.DISCONNECTED;\n        }\n\n        if (state.isInternetReachable === true) {\n            return NetworkStatus.CONNECTED;\n        }\n\n        // If we can't determine internet reachability, assume connecting\n        return NetworkStatus.CONNECTING;\n    }\n\n    private setCurrentState(state: NetworkState): void {\n        this.currentState = state;\n        this.status = {\n            ...this.status,\n            connected: state.isConnected,\n            quality: state.quality,\n            lastCheck: state.lastChecked,\n        };\n\n        // Emit to all listeners\n        this.listeners.forEach(listener => {\n            try {\n                listener(state);\n            } catch (error) {\n                console.warn('Error in network state listener:', error);\n            }\n        });\n    }\n\n    private estimateSpeed(latency: number): number {\n        // Very rough estimation based on latency\n        // In practice, you'd want a more sophisticated speed test\n        if (latency < 50) return 10; // Mbps\n        if (latency < 100) return 5; // Mbps\n        if (latency < 300) return 2; // Mbps\n        if (latency < 1000) return 1; // Mbps\n        return 0.5; // Mbps\n    }\n\n    private getDefaultStatus(): NetworkServiceStatus {\n        return {\n            initialized: false,\n            connected: false,\n            quality: NetworkQuality.POOR,\n            lastCheck: new Date(),\n        };\n    }\n}\n\n// Export singleton instance\nexport const networkConnectivityService = NetworkConnectivityService.getInstance();\nexport default NetworkConnectivityService;"],"mappings":"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","ignoreList":[]}