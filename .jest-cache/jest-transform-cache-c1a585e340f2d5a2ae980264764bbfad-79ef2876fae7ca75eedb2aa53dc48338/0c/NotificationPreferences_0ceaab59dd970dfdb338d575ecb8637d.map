{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_types","_Logger","NotificationPreferencesService","exports","_classCallCheck2","default","isInitialized","defaultPreferences","getDefaultPreferences","_createClass2","key","value","_initialize","_asyncToGenerator2","logger","info","error","initialize","apply","arguments","_getUserPreferences","userId","stored","getStoredPreferences","Object","assign","updatedAt","Date","getUserPreferences","_x","_updateUserPreferences","updates","currentPreferences","updatedPreferences","validatePreferences","storePreferences","updateUserPreferences","_x2","_x3","_getCategoryPreferences","category","preferences","categories","undefined","getCategoryPreferences","_x4","_x5","_updateCategoryPreferences","_defineProperty2","updateCategoryPreferences","_x6","_x7","_x8","_resetToDefaults","defaultPrefs","resetToDefaults","_x9","_exportPreferences","JSON","stringify","exportPreferences","_x0","_importPreferences","preferencesJson","importedPreferences","parse","importPreferences","_x1","_x10","_dispose","dispose","_getStoredPreferences","storageKey","STORAGE_KEY","AsyncStorage","getItem","deserializePreferences","_x11","_storePreferences","serialized","serializePreferences","setItem","_x12","_x13","toISOString","_this","Error","doNotDisturb","enabled","timeRegex","test","startTime","endTime","includes","personalization","humorLevel","messageTone","entries","forEach","_ref","_ref2","_slicedToArray2","catPrefs","isValidCategory","validateCategoryPreferences","priority","frequency","validateFrequency","type","interval","maxPerDay","values","NotificationCategory","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","allowUrgent","TIMERS","NotificationPriority","NORMAL","smartBatching","quietHoursOverride","customSounds","vibrationPattern","ACHIEVEMENTS","HIGH","REMINDERS","MOTIVATIONAL","LOW","batchSize","batchInterval","URGENT","CUSTOM","platform","ios","sound","badge","alert","notificationCenter","lockScreen","carPlay","criticalAlerts","scheduledDelivery","android","vibrate","lights","importance","visibility","web","persistent","requireInteraction","silent","smartScheduling","adaptiveFrequency","skipDuringMeetings","skipDuringFocus","userActivityAware","language"],"sources":["NotificationPreferences.ts"],"sourcesContent":["/**\n * Notification Preferences Service for OffScreen Buddy\n * Manages user notification preferences and settings\n */\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {\n    NotificationPreferences,\n    NotificationCategory,\n    NotificationPriority,\n    CategoryPreferences,\n    NotificationFrequency,\n} from './types';\nimport { logger } from '../../utils/Logger';\n\nexport class NotificationPreferencesService {\n    private static readonly STORAGE_KEY = 'notification_preferences';\n    private isInitialized = false;\n    private defaultPreferences: NotificationPreferences;\n\n    constructor() {\n        this.defaultPreferences = this.getDefaultPreferences();\n    }\n\n    async initialize(): Promise<void> {\n        try {\n            this.isInitialized = true;\n            logger.info('NotificationPreferencesService initialized');\n        } catch (error) {\n            logger.error('Failed to initialize NotificationPreferencesService:', error);\n            throw error;\n        }\n    }\n\n    async getUserPreferences(userId: string): Promise<NotificationPreferences> {\n        try {\n            const stored = await this.getStoredPreferences(userId);\n            if (stored) {\n                return stored;\n            }\n\n            // Return default preferences for new users\n            return {\n                ...this.defaultPreferences,\n                userId,\n                updatedAt: new Date(),\n            };\n        } catch (error) {\n            logger.error('Failed to get user preferences:', error);\n            // Return default preferences as fallback\n            return {\n                ...this.defaultPreferences,\n                userId,\n                updatedAt: new Date(),\n            };\n        }\n    }\n\n    async updateUserPreferences(\n        userId: string,\n        updates: Partial<NotificationPreferences>\n    ): Promise<void> {\n        try {\n            const currentPreferences = await this.getUserPreferences(userId);\n\n            const updatedPreferences: NotificationPreferences = {\n                ...currentPreferences,\n                ...updates,\n                userId,\n                updatedAt: new Date(),\n            };\n\n            // Validate updated preferences\n            this.validatePreferences(updatedPreferences);\n\n            // Store updated preferences\n            await this.storePreferences(userId, updatedPreferences);\n\n            logger.info('User preferences updated', { userId });\n        } catch (error) {\n            logger.error('Failed to update user preferences:', error);\n            throw error;\n        }\n    }\n\n    async getCategoryPreferences(\n        userId: string,\n        category: NotificationCategory\n    ): Promise<CategoryPreferences | undefined> {\n        try {\n            const preferences = await this.getUserPreferences(userId);\n            return preferences.categories[category];\n        } catch (error) {\n            logger.error('Failed to get category preferences:', error);\n            return undefined;\n        }\n    }\n\n    async updateCategoryPreferences(\n        userId: string,\n        category: NotificationCategory,\n        preferences: CategoryPreferences\n    ): Promise<void> {\n        try {\n            const currentPreferences = await this.getUserPreferences(userId);\n\n            const updatedPreferences = {\n                ...currentPreferences,\n                categories: {\n                    ...currentPreferences.categories,\n                    [category]: preferences,\n                },\n                updatedAt: new Date(),\n            };\n\n            await this.updateUserPreferences(userId, updatedPreferences);\n\n            logger.info('Category preferences updated', { userId, category });\n        } catch (error) {\n            logger.error('Failed to update category preferences:', error);\n            throw error;\n        }\n    }\n\n    async resetToDefaults(userId: string): Promise<void> {\n        try {\n            const defaultPrefs = {\n                ...this.defaultPreferences,\n                userId,\n                updatedAt: new Date(),\n            };\n\n            await this.storePreferences(userId, defaultPrefs);\n\n            logger.info('Preferences reset to defaults', { userId });\n        } catch (error) {\n            logger.error('Failed to reset preferences:', error);\n            throw error;\n        }\n    }\n\n    async exportPreferences(userId: string): Promise<string> {\n        try {\n            const preferences = await this.getUserPreferences(userId);\n            return JSON.stringify(preferences, null, 2);\n        } catch (error) {\n            logger.error('Failed to export preferences:', error);\n            throw error;\n        }\n    }\n\n    async importPreferences(userId: string, preferencesJson: string): Promise<void> {\n        try {\n            const importedPreferences = JSON.parse(preferencesJson) as NotificationPreferences;\n\n            // Validate imported preferences\n            this.validatePreferences(importedPreferences);\n\n            // Update with imported preferences\n            await this.updateUserPreferences(userId, {\n                ...importedPreferences,\n                userId,\n            });\n\n            logger.info('Preferences imported successfully', { userId });\n        } catch (error) {\n            logger.error('Failed to import preferences:', error);\n            throw error;\n        }\n    }\n\n    async dispose(): Promise<void> {\n        try {\n            this.isInitialized = false;\n            logger.info('NotificationPreferencesService disposed');\n        } catch (error) {\n            logger.error('Error disposing NotificationPreferencesService:', error);\n        }\n    }\n\n    // Private methods\n\n    private async getStoredPreferences(userId: string): Promise<NotificationPreferences | null> {\n        try {\n            const storageKey = `${NotificationPreferencesService.STORAGE_KEY}_${userId}`;\n            const stored = await AsyncStorage.getItem(storageKey);\n            if (stored) {\n                const preferences = JSON.parse(stored) as NotificationPreferences;\n                // Convert date strings back to Date objects\n                return this.deserializePreferences(preferences);\n            }\n            return null;\n        } catch (error) {\n            logger.error('Failed to get stored preferences:', error);\n            return null;\n        }\n    }\n\n    private async storePreferences(userId: string, preferences: NotificationPreferences): Promise<void> {\n        try {\n            const storageKey = `${NotificationPreferencesService.STORAGE_KEY}_${userId}`;\n            const serialized = JSON.stringify(this.serializePreferences(preferences));\n            await AsyncStorage.setItem(storageKey, serialized);\n        } catch (error) {\n            logger.error('Failed to store preferences:', error);\n            throw error;\n        }\n    }\n\n    private serializePreferences(preferences: NotificationPreferences): any {\n        return {\n            ...preferences,\n            updatedAt: preferences.updatedAt.toISOString(),\n        };\n    }\n\n    private deserializePreferences(preferences: any): NotificationPreferences {\n        return {\n            ...preferences,\n            updatedAt: new Date(preferences.updatedAt),\n        };\n    }\n\n    private validatePreferences(preferences: NotificationPreferences): void {\n        // Validate required fields\n        if (!preferences.userId) {\n            throw new Error('User ID is required');\n        }\n\n        // Validate do not disturb times\n        if (preferences.doNotDisturb.enabled) {\n            const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;\n            if (!timeRegex.test(preferences.doNotDisturb.startTime)) {\n                throw new Error('Invalid start time format');\n            }\n            if (!timeRegex.test(preferences.doNotDisturb.endTime)) {\n                throw new Error('Invalid end time format');\n            }\n        }\n\n        // Validate personalization settings\n        if (!['none', 'light', 'moderate', 'heavy'].includes(preferences.personalization.humorLevel)) {\n            throw new Error('Invalid humor level');\n        }\n\n        if (!['serious', 'motivational', 'humorous', 'mixed'].includes(preferences.personalization.messageTone)) {\n            throw new Error('Invalid message tone');\n        }\n\n        // Validate category preferences\n        if (preferences.categories) {\n            Object.entries(preferences.categories).forEach(([category, catPrefs]) => {\n                if (!this.isValidCategory(category as NotificationCategory)) {\n                    throw new Error(`Invalid category: ${category}`);\n                }\n                if (catPrefs) {\n                    this.validateCategoryPreferences(catPrefs);\n                }\n            });\n        }\n    }\n\n    private validateCategoryPreferences(preferences: CategoryPreferences): void {\n        if (!['low', 'normal', 'high', 'urgent'].includes(preferences.priority)) {\n            throw new Error('Invalid priority');\n        }\n\n        if (preferences.frequency) {\n            this.validateFrequency(preferences.frequency);\n        }\n    }\n\n    private validateFrequency(frequency: NotificationFrequency): void {\n        if (!['immediate', 'scheduled', 'adaptive', 'batch'].includes(frequency.type)) {\n            throw new Error('Invalid frequency type');\n        }\n\n        if (frequency.interval !== undefined && frequency.interval < 5) {\n            throw new Error('Interval must be at least 5 seconds');\n        }\n\n        if (frequency.maxPerDay !== undefined && frequency.maxPerDay < 1) {\n            throw new Error('Max per day must be at least 1');\n        }\n    }\n\n    private isValidCategory(category: string): category is NotificationCategory {\n        return Object.values(NotificationCategory).includes(category as NotificationCategory);\n    }\n\n    private getDefaultPreferences(): NotificationPreferences {\n        return {\n            userId: '',\n            enabled: true,\n            doNotDisturb: {\n                enabled: false,\n                startTime: '22:00',\n                endTime: '07:00',\n                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                allowUrgent: true,\n            },\n            categories: {\n                [NotificationCategory.TIMERS]: {\n                    enabled: true,\n                    priority: NotificationPriority.NORMAL,\n                    frequency: {\n                        type: 'immediate',\n                        smartBatching: false,\n                    },\n                    quietHoursOverride: false,\n                    customSounds: false,\n                    vibrationPattern: true,\n                },\n                [NotificationCategory.ACHIEVEMENTS]: {\n                    enabled: true,\n                    priority: NotificationPriority.HIGH,\n                    frequency: {\n                        type: 'immediate',\n                        smartBatching: false,\n                    },\n                    quietHoursOverride: true, // Achievements can break through DND\n                    customSounds: true,\n                    vibrationPattern: [0, 250, 100, 250],\n                },\n                [NotificationCategory.REMINDERS]: {\n                    enabled: true,\n                    priority: NotificationPriority.NORMAL,\n                    frequency: {\n                        type: 'scheduled',\n                        interval: 300, // 5 minutes\n                        smartBatching: true,\n                    },\n                    quietHoursOverride: false,\n                    customSounds: false,\n                    vibrationPattern: true,\n                },\n                [NotificationCategory.MOTIVATIONAL]: {\n                    enabled: true,\n                    priority: NotificationPriority.LOW,\n                    frequency: {\n                        type: 'adaptive',\n                        smartBatching: true,\n                        batchSize: 3,\n                        batchInterval: 600, // 10 minutes\n                    },\n                    quietHoursOverride: false,\n                    customSounds: false,\n                    vibrationPattern: false,\n                },\n                [NotificationCategory.URGENT]: {\n                    enabled: true,\n                    priority: NotificationPriority.URGENT,\n                    frequency: {\n                        type: 'immediate',\n                        smartBatching: false,\n                    },\n                    quietHoursOverride: true, // Urgent always breaks through\n                    customSounds: true,\n                    vibrationPattern: [0, 500, 200, 500, 200, 500],\n                },\n                [NotificationCategory.CUSTOM]: {\n                    enabled: false,\n                    priority: NotificationPriority.NORMAL,\n                    frequency: {\n                        type: 'scheduled',\n                        smartBatching: false,\n                    },\n                    quietHoursOverride: false,\n                    customSounds: false,\n                    vibrationPattern: true,\n                },\n            },\n            platform: {\n                ios: {\n                    sound: true,\n                    badge: true,\n                    alert: true,\n                    notificationCenter: true,\n                    lockScreen: true,\n                    carPlay: false,\n                    criticalAlerts: false,\n                    scheduledDelivery: true,\n                },\n                android: {\n                    sound: true,\n                    vibrate: true,\n                    lights: true,\n                    vibrationPattern: [0, 250, 250, 250],\n                    importance: 'default',\n                    category: 'reminder',\n                    visibility: 'private',\n                },\n                web: {\n                    sound: true,\n                    persistent: false,\n                    requireInteraction: false,\n                    silent: false,\n                },\n            },\n            smartScheduling: {\n                enabled: true,\n                adaptiveFrequency: true,\n                skipDuringMeetings: true,\n                skipDuringFocus: true,\n                userActivityAware: true,\n            },\n            personalization: {\n                humorLevel: 'moderate',\n                messageTone: 'mixed',\n                language: 'en',\n                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n            },\n            updatedAt: new Date(),\n        };\n    }\n}"],"mappings":"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","ignoreList":[]}