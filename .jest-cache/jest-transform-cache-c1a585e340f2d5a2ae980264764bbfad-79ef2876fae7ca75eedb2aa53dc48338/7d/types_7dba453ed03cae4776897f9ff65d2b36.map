{"version":3,"names":["NotificationType","exports","NotificationCategory","NotificationPriority","NotificationAction","NotificationStatus","_default","default"],"sources":["types.ts"],"sourcesContent":["/**\n * Comprehensive Notification System Types for OffScreen Buddy\n * Defines all notification-related interfaces and enums\n */\n\nimport { Platform } from 'react-native';\nimport * as Notifications from 'expo-notifications';\n\n// Type alias for push token\nexport type PushToken = string;\n\n// Core notification types\nexport enum NotificationType {\n    TIMER_START = 'timer_start',\n    TIMER_COMPLETE = 'timer_complete',\n    TIMER_PAUSE = 'timer_pause',\n    TIMER_RESUME = 'timer_resume',\n    FOCUS_REMINDER = 'focus_reminder',\n    BREAK_REMINDER = 'break_reminder',\n    MILESTONE_ACHIEVEMENT = 'milestone_achievement',\n    STREAK_CELEBRATION = 'streak_celebration',\n    DAILY_GOAL = 'daily_goal',\n    USER_ROAST = 'user_roast',\n    HABIT_REMINDER = 'habit_reminder',\n    ACHIEVEMENT_UNLOCK = 'achievement_unlock',\n    SMART_BREAK = 'smart_break',\n    QUICK_REMINDER = 'quick_reminder',\n    URGENT_ALERT = 'urgent_alert',\n}\n\n// Notification categories for user preferences\nexport enum NotificationCategory {\n    TIMERS = 'timers',\n    ACHIEVEMENTS = 'achievements',\n    REMINDERS = 'reminders',\n    MOTIVATIONAL = 'motivational',\n    URGENT = 'urgent',\n    CUSTOM = 'custom',\n}\n\n// Notification priority levels\nexport enum NotificationPriority {\n    LOW = 'low',\n    NORMAL = 'normal',\n    HIGH = 'high',\n    URGENT = 'urgent',\n}\n\n// Notification action types\nexport enum NotificationAction {\n    VIEW_TIMER = 'view_timer',\n    START_SESSION = 'start_session',\n    PAUSE_SESSION = 'pause_session',\n    STOP_SESSION = 'stop_session',\n    VIEW_MILESTONES = 'view_milestones',\n    VIEW_SETTINGS = 'view_settings',\n    DISMISS = 'dismiss',\n    SNOOZE = 'snooze',\n    COMPLETE_TASK = 'complete_task',\n}\n\n// Notification status\nexport enum NotificationStatus {\n    SCHEDULED = 'scheduled',\n    SENT = 'sent',\n    DELIVERED = 'delivered',\n    CLICKED = 'clicked',\n    DISMISSED = 'dismissed',\n    FAILED = 'failed',\n}\n\n// Core notification data structure\nexport interface NotificationData {\n    id: string;\n    type: NotificationType;\n    category: NotificationCategory;\n    title: string;\n    message: string;\n    subtitle?: string;\n    body?: string;\n    data?: Record<string, any>;\n    priority: NotificationPriority;\n    scheduledFor?: Date;\n    expiresAt?: Date;\n    sound?: string;\n    badge?: number;\n    categoryIdentifier?: string;\n    threadIdentifier?: string;\n    targetScreen?: string;\n    deepLink?: string;\n    imageUrl?: string;\n    actions?: NotificationAction[];\n    silent?: boolean;\n    vibrate?: boolean | number[];\n    lights?: boolean;\n    icon?: string;\n    color?: string;\n    timestamp?: number;\n    userId: string;\n    sessionId?: string;\n    metadata?: Record<string, any>;\n    createdAt: Date;\n    updatedAt: Date;\n}\n\n// Extended notification data with platform-specific content\nexport interface PlatformNotificationData extends NotificationData {\n    // iOS specific\n    ios?: {\n        sound?: string;\n        badge?: number;\n        categoryIdentifier?: string;\n        threadIdentifier?: string;\n        interruptionLevel?: 'active' | 'time-sensitive' | 'passive';\n    };\n\n    // Android specific\n    android?: {\n        channelId?: string;\n        smallIcon?: string;\n        largeIcon?: string;\n        priority?: number;\n        visibility?: 'public' | 'private' | 'secret';\n        ongoing?: boolean;\n        autoCancel?: boolean;\n    };\n\n    // Web specific\n    web?: {\n        icon?: string;\n        badge?: string;\n        vibrate?: number[];\n        requireInteraction?: boolean;\n    };\n}\n\n// Notification preferences and user settings\nexport interface NotificationPreferences {\n    userId: string;\n    enabled: boolean;\n\n    // Global settings\n    doNotDisturb: {\n        enabled: boolean;\n        startTime: string; // HH:mm format\n        endTime: string; // HH:mm format\n        timezone: string;\n        allowUrgent: boolean;\n    };\n\n    // Category-specific settings\n    categories: {\n        [key in NotificationCategory]?: CategoryPreferences;\n    };\n\n    // Platform-specific settings\n    platform: {\n        ios?: IOSNotificationSettings;\n        android?: AndroidNotificationSettings;\n        web?: WebNotificationSettings;\n    };\n\n    // Smart scheduling preferences\n    smartScheduling: {\n        enabled: boolean;\n        adaptiveFrequency: boolean;\n        skipDuringMeetings: boolean;\n        skipDuringFocus: boolean;\n        userActivityAware: boolean;\n    };\n\n    // Personalization\n    personalization: {\n        humorLevel: 'none' | 'light' | 'moderate' | 'heavy';\n        messageTone: 'serious' | 'motivational' | 'humorous' | 'mixed';\n        language: string;\n        timezone: string;\n    };\n\n    updatedAt: Date;\n}\n\n// Category-specific preferences\nexport interface CategoryPreferences {\n    enabled: boolean;\n    priority: NotificationPriority;\n    frequency: NotificationFrequency;\n    quietHoursOverride: boolean;\n    customSounds: boolean;\n    vibrationPattern: boolean | number[];\n}\n\n// Notification frequency settings\nexport interface NotificationFrequency {\n    type: 'immediate' | 'scheduled' | 'adaptive' | 'batch';\n    interval?: number; // seconds between notifications\n    maxPerDay?: number;\n    cooldownPeriod?: number; // seconds\n    smartBatching: boolean;\n    batchSize?: number;\n    batchInterval?: number; // seconds\n}\n\n// Platform-specific notification settings\nexport interface IOSNotificationSettings {\n    sound: boolean;\n    badge: boolean;\n    alert: boolean;\n    notificationCenter: boolean;\n    lockScreen: boolean;\n    carPlay: boolean;\n    criticalAlerts: boolean;\n    scheduledDelivery: boolean;\n}\n\nexport interface AndroidNotificationSettings {\n    sound: boolean;\n    vibrate: boolean;\n    lights: boolean;\n    vibrationPattern: number[];\n    importance: 'min' | 'low' | 'default' | 'high' | 'max';\n    category: string;\n    visibility: 'public' | 'private' | 'secret';\n}\n\nexport interface WebNotificationSettings {\n    sound: boolean;\n    persistent: boolean;\n    requireInteraction: boolean;\n    silent: boolean;\n}\n\n// Smart notification scheduling\nexport interface SmartScheduleContext {\n    userId: string;\n    currentTime: Date;\n    userActivity: {\n        isFocused: boolean;\n        isInMeeting: boolean;\n        lastActivity: Date;\n        sessionType?: string;\n    };\n    deviceState: {\n        batteryLevel: number;\n        isCharging: boolean;\n        isLowPowerMode: boolean;\n    };\n    preferences: NotificationPreferences;\n    notificationHistory: NotificationHistory[];\n}\n\n// Smart scheduling result\nexport interface ScheduleResult {\n    scheduledTime: Date;\n    priority: NotificationPriority;\n    reason: string;\n    shouldSend: boolean;\n    alternativeTimes?: Date[];\n}\n\n// Notification analytics and tracking\nexport interface NotificationAnalytics {\n    notificationId: string;\n    userId: string;\n    type: NotificationType;\n    category: NotificationCategory;\n\n    // Delivery tracking\n    sentAt?: Date;\n    deliveredAt?: Date;\n    clickedAt?: Date;\n    dismissedAt?: Date;\n    failedAt?: Date;\n\n    // Engagement metrics\n    timeToClick?: number; // milliseconds\n    timeToDismiss?: number; // milliseconds\n    viewDuration?: number; // milliseconds\n    actionsTaken?: NotificationAction[];\n\n    // Context data\n    context?: {\n        sessionId?: string;\n        timerId?: string;\n        milestoneId?: string;\n        screenSource?: string;\n    };\n\n    // Device and platform info\n    platform: string;\n    deviceInfo?: {\n        osVersion: string;\n        appVersion: string;\n        pushToken: PushToken;\n    };\n}\n\n// Notification history for user and analytics\nexport interface NotificationHistory {\n    id: string;\n    userId: string;\n    notification: NotificationData;\n    status: NotificationStatus;\n    timestamp: Date;\n    analytics?: NotificationAnalytics;\n}\n\n// Notification queue item\nexport interface NotificationQueueItem {\n    id: string;\n    priority: NotificationPriority;\n    scheduledTime: Date;\n    notification: PlatformNotificationData;\n    retryCount: number;\n    maxRetries: number;\n    createdAt: Date;\n    dependencies?: string[]; // other notification IDs\n}\n\n// Notification action handler result\nexport interface ActionResult {\n    success: boolean;\n    message?: string;\n    redirectTo?: string;\n    additionalData?: Record<string, any>;\n}\n\n// Notification service status\nexport interface NotificationServiceStatus {\n    initialized: boolean;\n    permissions: {\n        granted: boolean;\n        status: 'granted' | 'denied' | 'undetermined';\n        shouldExplain?: boolean;\n    };\n    pushToken?: PushToken;\n    registered: boolean;\n    platform: string;\n    capabilities: {\n        canSchedule: boolean;\n        canBadge: boolean;\n        canSound: boolean;\n        canVibrate: boolean;\n        canDeepLink: boolean;\n    };\n    lastHealthCheck: Date;\n}\n\n// Emergency notification (critical user safety)\nexport interface EmergencyNotification {\n    type: 'safety' | 'urgent' | 'medical' | 'location';\n    title: string;\n    message: string;\n    priority: NotificationPriority;\n    requiresAck: boolean;\n    timeout?: number; // seconds\n    actions: {\n        label: string;\n        action: NotificationAction;\n        destructive?: boolean;\n    }[];\n}\n\n// Notification batch for grouping\nexport interface NotificationBatch {\n    id: string;\n    userId: string;\n    notifications: NotificationData[];\n    batchType: 'daily_summary' | 'milestone_group' | 'progress_update' | 'emergency';\n    scheduledFor: Date;\n    expiresAt?: Date;\n    createdAt: Date;\n}\n\n// Message templates for dynamic content\nexport interface MessageTemplate {\n    id: string;\n    category: NotificationCategory;\n    type: NotificationType;\n    templates: {\n        title: string[];\n        message: string[];\n        subtitle?: string[];\n    };\n    variables: string[];\n    conditions?: {\n        userLevel?: string;\n        achievementType?: string;\n        timeOfDay?: 'morning' | 'afternoon' | 'evening' | 'night';\n        notificationCount?: number;\n    };\n}\n\n// Rich notification with images and action buttons\nexport interface RichNotification extends NotificationData {\n    image?: {\n        url: string;\n        alt: string;\n        width?: number;\n        height?: number;\n    };\n    buttons?: {\n        id: string;\n        title: string;\n        action: NotificationAction;\n        destructive?: boolean;\n        requiresAuth?: boolean;\n    }[];\n    input?: {\n        id: string;\n        placeholder: string;\n        submitAction: NotificationAction;\n    };\n}\n\n// Notification service configuration\nexport interface NotificationConfig {\n    // General settings\n    debug: boolean;\n    maxRetries: number;\n    batchSize: number;\n    batchInterval: number; // seconds\n\n    // Performance settings\n    queueSize: number;\n    processingInterval: number; // seconds\n    healthCheckInterval: number; // seconds\n\n    // Smart scheduling\n    aiEnabled: boolean;\n    contextWindow: number; // minutes of user activity to consider\n\n    // Platform specific\n    platforms: {\n        ios: {\n            criticalAlertsEnabled: boolean;\n            notificationGroups: boolean;\n            scheduledDelivery: boolean;\n        };\n        android: {\n            channelImportance: number;\n            vibrationPattern: number[];\n            lockScreenVisibility: 'public' | 'private' | 'secret';\n        };\n        web: {\n            serviceWorkerPath: string;\n            manifestPath: string;\n            iconSizes: number[];\n        };\n    };\n\n    // Integration settings\n    integrations: {\n        analytics: boolean;\n        crashReporting: boolean;\n        userFeedback: boolean;\n    };\n}\n\n// Utility types\nexport type NotificationCategoryKey = keyof typeof NotificationCategory;\nexport type NotificationTypeKey = keyof typeof NotificationType;\nexport type NotificationActionKey = keyof typeof NotificationAction;\nexport type NotificationPriorityKey = keyof typeof NotificationPriority;\nexport type NotificationStatusKey = keyof typeof NotificationStatus;\n\n// Common notification result interface\nexport interface NotificationResult<T = any> {\n    success: boolean;\n    data?: T;\n    error?: {\n        code: string;\n        message: string;\n        details?: any;\n    };\n    metadata?: {\n        timestamp: Date;\n        requestId: string;\n        duration?: number;\n    };\n}\n\n// Extended error types for notifications\nexport interface NotificationError {\n    type: 'permission_denied' | 'token_invalid' | 'schedule_failed' | 'delivery_failed' | 'configuration_error';\n    message: string;\n    code: string;\n    recoverable: boolean;\n    suggestedAction?: string;\n    technicalDetails?: Record<string, any>;\n}\n\nexport default {};"],"mappings":";;;;IAYYA,gBAAgB,GAAAC,OAAA,CAAAD,gBAAA,aAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAhBA,gBAAgB;EAAA,OAAhBA,gBAAgB;AAAA;AAAA,IAmBhBE,oBAAoB,GAAAD,OAAA,CAAAC,oBAAA,aAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAAA,OAApBA,oBAAoB;AAAA;AAAA,IAUpBC,oBAAoB,GAAAF,OAAA,CAAAE,oBAAA,aAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAApBA,oBAAoB;EAAA,OAApBA,oBAAoB;AAAA;AAAA,IAQpBC,kBAAkB,GAAAH,OAAA,CAAAG,kBAAA,aAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAA,OAAlBA,kBAAkB;AAAA;AAAA,IAalBC,kBAAkB,GAAAJ,OAAA,CAAAI,kBAAA,aAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAlBA,kBAAkB;EAAA,OAAlBA,kBAAkB;AAAA;AAAA,IAAAC,QAAA,GAAAL,OAAA,CAAAM,OAAA,GA8af,CAAC,CAAC","ignoreList":[]}