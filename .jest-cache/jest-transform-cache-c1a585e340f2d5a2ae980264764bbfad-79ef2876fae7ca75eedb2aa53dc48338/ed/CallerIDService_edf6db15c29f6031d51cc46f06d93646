e86ad02a218b775971455d6f229d6dda
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.callerIDService = exports.CallerIDService = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _reactNative = require("react-native");
var _asyncStorage = _interopRequireDefault(require("@react-native-async-storage/async-storage"));
var _uuid = require("uuid");
var _types = require("./types");
var _Logger = require("../../utils/Logger");
var CallerIDService = exports.CallerIDService = function () {
  function CallerIDService() {
    (0, _classCallCheck2.default)(this, CallerIDService);
    this.safeNameDatabase = {
      firstNames: {
        male: [],
        female: [],
        neutral: []
      },
      lastNames: [],
      businessNames: [],
      emergencyContacts: [],
      blockedPatterns: [],
      suspiciousPatterns: []
    };
    this.customContacts = [];
    this.blockedPatterns = [];
    this.suspiciousPatterns = [];
    this.geographicRegions = [];
    this.isInitialized = false;
    this.MAX_DAILY_CALLS = 100;
    this.MAX_CUSTOM_CONTACTS = 50;
    this.CACHE_DURATION = 24 * 60 * 60 * 1000;
    this.initializeSafeNameDatabase();
    this.initializeCallerIDPatterns();
  }
  return (0, _createClass2.default)(CallerIDService, [{
    key: "initialize",
    value: (function () {
      var _initialize = (0, _asyncToGenerator2.default)(function* () {
        try {
          _Logger.logger.info('Initializing Caller ID Service...');
          yield this.loadCustomContacts();
          yield this.loadSafetyPatterns();
          yield this.validateAllContacts();
          this.isInitialized = true;
          _Logger.logger.info('Caller ID Service initialized successfully');
          return {
            success: true,
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        } catch (error) {
          _Logger.logger.error('Failed to initialize Caller ID Service:', error);
          return {
            success: false,
            error: {
              type: _types.CallErrorType.INVALID_CALLER_ID,
              code: 'INIT_FAILED',
              message: 'Failed to initialize caller ID service',
              recoverable: true,
              suggestedAction: 'Check service dependencies',
              technicalDetails: error,
              timestamp: new Date(),
              callId: '',
              userId: ''
            },
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        }
      });
      function initialize() {
        return _initialize.apply(this, arguments);
      }
      return initialize;
    }())
  }, {
    key: "validateCallerID",
    value: function validateCallerID(callerInfo) {
      try {
        var validation = {
          isSafe: true,
          riskLevel: 'low',
          reasons: [],
          suggestions: [],
          needsReview: false
        };
        if (this.isBlockedPattern(callerInfo.phoneNumber)) {
          validation.isSafe = false;
          validation.riskLevel = 'high';
          validation.reasons.push('Phone number matches blocked pattern');
          validation.suggestions.push('Use a different phone number format');
        }
        if (this.isSuspiciousPattern(callerInfo.phoneNumber)) {
          validation.riskLevel = validation.riskLevel === 'high' ? 'high' : 'medium';
          validation.reasons.push('Phone number has suspicious characteristics');
          validation.suggestions.push('Verify number format and origin');
        }
        var phoneValidation = this.validatePhoneNumber(callerInfo.phoneNumber);
        if (!phoneValidation.isValid) {
          validation.isSafe = false;
          validation.riskLevel = 'high';
          validation.reasons.push('Invalid phone number format');
          validation.suggestions.push('Use proper international or local format');
        }
        if (phoneValidation.isEmergency && !this.isEmergencyAllowed(callerInfo)) {
          validation.isSafe = false;
          validation.riskLevel = 'high';
          validation.reasons.push('Emergency numbers require special validation');
          validation.suggestions.push('Contact support for emergency call setup');
        }
        if (phoneValidation.region && !this.isValidGeographicRegion(phoneValidation.region)) {
          validation.riskLevel = validation.riskLevel === 'high' ? 'high' : 'medium';
          validation.reasons.push('Phone number from potentially problematic region');
          validation.needsReview = true;
        }
        if (callerInfo.callerType === 'business') {
          var businessValidation = this.validateBusinessNumber(callerInfo.phoneNumber);
          if (!businessValidation.isValid) {
            validation.riskLevel = validation.riskLevel === 'high' ? 'high' : 'medium';
            validation.reasons.push('Business number format issues detected');
            validation.suggestions.push('Verify business number authenticity');
          }
        }
        var nameValidation = this.validateCallerName(callerInfo.name, callerInfo.displayName);
        if (!nameValidation.isValid) {
          validation.riskLevel = validation.riskLevel === 'high' ? 'high' : 'medium';
          validation.reasons.push('Caller name contains suspicious content');
          validation.suggestions.push('Use professional business names');
        }
        if (validation.reasons.length === 0) {
          validation.riskLevel = 'low';
        } else if (validation.reasons.some(function (r) {
          return r.includes('high');
        })) {
          validation.riskLevel = 'high';
        } else if (validation.reasons.some(function (r) {
          return r.includes('medium');
        })) {
          validation.riskLevel = 'medium';
        }
        validation.isSafe = validation.riskLevel !== 'high' && validation.reasons.filter(function (r) {
          return r.includes('Invalid') || r.includes('blocked');
        }).length === 0;
        _Logger.logger.debug(`Caller ID validation completed for ${callerInfo.displayName}: ${validation.riskLevel} risk`);
        return validation;
      } catch (error) {
        _Logger.logger.error('Caller ID validation failed:', error);
        return {
          isSafe: false,
          riskLevel: 'high',
          reasons: ['Validation system error'],
          suggestions: ['Contact support if problem persists'],
          needsReview: true
        };
      }
    }
  }, {
    key: "generateSafeCallerID",
    value: (function () {
      var _generateSafeCallerID = (0, _asyncToGenerator2.default)(function* () {
        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        try {
          if (!this.isInitialized) {
            return {
              success: false,
              error: {
                type: _types.CallErrorType.INVALID_CALLER_ID,
                code: 'NOT_INITIALIZED',
                message: 'Caller ID service not initialized',
                recoverable: true,
                suggestedAction: 'Call initialize() first',
                timestamp: new Date(),
                callId: '',
                userId: ''
              },
              metadata: {
                timestamp: new Date(),
                requestId: (0, _uuid.v4)(),
                duration: 0,
                platform: _reactNative.Platform.OS
              }
            };
          }
          var callerType = options.callerType || 'safe';
          var callerInfo;
          if (options.useCustomContact && options.userId) {
            var customContact = this.getRandomCustomContact(options.userId);
            if (customContact) {
              callerInfo = this.createCallerInfoFromContact(customContact);
            } else {
              callerInfo = yield this.generateRandomCallerInfo(callerType, options.region);
            }
          } else {
            callerInfo = yield this.generateRandomCallerInfo(callerType, options.region);
          }
          var validation = this.validateCallerID(callerInfo);
          if (!validation.isSafe) {
            callerInfo = yield this.generateRandomCallerInfo('safe', 'US');
            var retryValidation = this.validateCallerID(callerInfo);
            if (!retryValidation.isSafe) {
              return {
                success: false,
                error: {
                  type: _types.CallErrorType.INVALID_CALLER_ID,
                  code: 'GENERATION_FAILED',
                  message: 'Unable to generate safe caller ID',
                  recoverable: true,
                  suggestedAction: 'Try different caller type or region',
                  technicalDetails: validation,
                  timestamp: new Date(),
                  callId: '',
                  userId: ''
                },
                metadata: {
                  timestamp: new Date(),
                  requestId: (0, _uuid.v4)(),
                  duration: 0,
                  platform: _reactNative.Platform.OS
                }
              };
            }
          }
          this.updateCallerUsage(callerInfo.id);
          _Logger.logger.info(`Generated safe caller ID: ${callerInfo.displayName} (${callerInfo.phoneNumber})`);
          return {
            success: true,
            data: callerInfo,
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        } catch (error) {
          _Logger.logger.error('Failed to generate safe caller ID:', error);
          return {
            success: false,
            error: {
              type: _types.CallErrorType.INVALID_CALLER_ID,
              code: 'GENERATION_ERROR',
              message: 'Failed to generate caller ID',
              recoverable: true,
              suggestedAction: 'Check service configuration',
              technicalDetails: error,
              timestamp: new Date(),
              callId: '',
              userId: ''
            },
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        }
      });
      function generateSafeCallerID() {
        return _generateSafeCallerID.apply(this, arguments);
      }
      return generateSafeCallerID;
    }())
  }, {
    key: "getSafeNameDatabase",
    value: function getSafeNameDatabase() {
      return Object.assign({}, this.safeNameDatabase);
    }
  }, {
    key: "validatePhoneNumber",
    value: function validatePhoneNumber(number) {
      try {
        var cleaned = number.replace(/[\s\-\(\)\.]/g, '');
        var validation = {
          isValid: false,
          isSafe: true,
          format: 'local',
          region: 'US',
          isEmergency: false,
          isTollFree: false,
          riskFlags: []
        };
        if (this.isEmergencyNumber(cleaned)) {
          validation.isEmergency = true;
          validation.isValid = true;
          validation.riskFlags.push('emergency');
          return validation;
        }
        if (cleaned.startsWith('+')) {
          validation.format = 'international';
          validation.region = cleaned.substring(1, 3);
        } else if (cleaned.startsWith('1') && cleaned.length === 11) {
          validation.format = 'national';
          validation.region = 'US';
        } else if (cleaned.length === 10) {
          validation.format = 'local';
          validation.region = 'US';
        } else {
          validation.riskFlags.push('unusual_length');
          return validation;
        }
        if (this.isTollFreeNumber(cleaned)) {
          validation.isTollFree = true;
          validation.riskFlags.push('toll_free');
        }
        if (this.hasSuspiciousPattern(cleaned)) {
          validation.riskFlags.push('suspicious_pattern');
          validation.isSafe = false;
        }
        validation.isValid = this.isValidPhoneRegion(validation.region);
        return validation;
      } catch (error) {
        _Logger.logger.error('Phone number validation failed:', error);
        return {
          isValid: false,
          isSafe: false,
          format: 'local',
          region: 'US',
          isEmergency: false,
          isTollFree: false,
          riskFlags: ['validation_error']
        };
      }
    }
  }, {
    key: "addCustomContact",
    value: (function () {
      var _addCustomContact = (0, _asyncToGenerator2.default)(function* (contact, userId) {
        try {
          var userContacts = this.customContacts.filter(function (c) {
            return c.userId === userId;
          });
          if (userContacts.length >= this.MAX_CUSTOM_CONTACTS) {
            return {
              success: false,
              error: {
                type: _types.CallErrorType.RESOURCE_EXHAUSTED,
                code: 'CONTACT_LIMIT_REACHED',
                message: 'Maximum custom contacts limit reached',
                recoverable: false,
                suggestedAction: 'Remove unused contacts to add new ones',
                timestamp: new Date(),
                callId: '',
                userId: userId
              },
              metadata: {
                timestamp: new Date(),
                requestId: (0, _uuid.v4)(),
                duration: 0,
                platform: _reactNative.Platform.OS
              }
            };
          }
          var newContact = Object.assign({}, contact, {
            id: (0, _uuid.v4)(),
            userId: userId,
            usageCount: 0,
            lastUsed: new Date()
          });
          var callerInfo = {
            id: newContact.id,
            name: newContact.name,
            phoneNumber: newContact.phoneNumber,
            callerType: newContact.callerType,
            location: newContact.location,
            avatarUrl: newContact.avatarUrl,
            riskLevel: 'low',
            isVerified: newContact.isVerified,
            displayName: newContact.name
          };
          var validation = this.validateCallerID(callerInfo);
          if (!validation.isSafe) {
            return {
              success: false,
              error: {
                type: _types.CallErrorType.INVALID_CALLER_ID,
                code: 'CONTACT_VALIDATION_FAILED',
                message: 'Contact failed safety validation',
                recoverable: false,
                suggestedAction: 'Check contact details for safety compliance',
                technicalDetails: validation,
                timestamp: new Date(),
                callId: '',
                userId: userId
              },
              metadata: {
                timestamp: new Date(),
                requestId: (0, _uuid.v4)(),
                duration: 0,
                platform: _reactNative.Platform.OS
              }
            };
          }
          this.customContacts.push(newContact);
          yield this.saveCustomContacts();
          _Logger.logger.info(`Added custom contact: ${newContact.name}`);
          return {
            success: true,
            data: newContact,
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        } catch (error) {
          _Logger.logger.error('Failed to add custom contact:', error);
          return {
            success: false,
            error: {
              type: _types.CallErrorType.INVALID_CALLER_ID,
              code: 'ADD_CONTACT_FAILED',
              message: 'Failed to add custom contact',
              recoverable: true,
              suggestedAction: 'Check contact format and try again',
              technicalDetails: error,
              timestamp: new Date(),
              callId: '',
              userId: userId
            },
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        }
      });
      function addCustomContact(_x, _x2) {
        return _addCustomContact.apply(this, arguments);
      }
      return addCustomContact;
    }())
  }, {
    key: "getCustomContacts",
    value: function getCustomContacts(userId) {
      return this.customContacts.filter(function (contact) {
        return contact.userId === userId;
      });
    }
  }, {
    key: "removeCustomContact",
    value: (function () {
      var _removeCustomContact = (0, _asyncToGenerator2.default)(function* (contactId, userId) {
        try {
          var initialLength = this.customContacts.length;
          this.customContacts = this.customContacts.filter(function (contact) {
            return !(contact.id === contactId && contact.userId === userId);
          });
          if (this.customContacts.length === initialLength) {
            return {
              success: false,
              error: {
                type: _types.CallErrorType.ACCESS_DENIED,
                code: 'CONTACT_NOT_FOUND',
                message: 'Contact not found or access denied',
                recoverable: false,
                suggestedAction: 'Check contact ID and user permissions',
                timestamp: new Date(),
                callId: '',
                userId: userId
              },
              metadata: {
                timestamp: new Date(),
                requestId: (0, _uuid.v4)(),
                duration: 0,
                platform: _reactNative.Platform.OS
              }
            };
          }
          yield this.saveCustomContacts();
          _Logger.logger.info(`Removed custom contact: ${contactId}`);
          return {
            success: true,
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        } catch (error) {
          _Logger.logger.error('Failed to remove custom contact:', error);
          return {
            success: false,
            error: {
              type: _types.CallErrorType.INVALID_CALLER_ID,
              code: 'REMOVE_CONTACT_FAILED',
              message: 'Failed to remove custom contact',
              recoverable: true,
              suggestedAction: 'Try again or contact support',
              technicalDetails: error,
              timestamp: new Date(),
              callId: '',
              userId: userId
            },
            metadata: {
              timestamp: new Date(),
              requestId: (0, _uuid.v4)(),
              duration: 0,
              platform: _reactNative.Platform.OS
            }
          };
        }
      });
      function removeCustomContact(_x3, _x4) {
        return _removeCustomContact.apply(this, arguments);
      }
      return removeCustomContact;
    }())
  }, {
    key: "getCallerIDPatterns",
    value: function getCallerIDPatterns() {
      return [{
        type: 'business',
        region: 'US',
        format: '(XXX) XXX-XXXX',
        example: '(555) 123-4567'
      }, {
        type: 'business',
        region: 'US',
        format: '+1-XXX-XXX-XXXX',
        example: '+1-555-123-4567'
      }, {
        type: 'personal',
        region: 'US',
        format: '(XXX) XXX-XXXX',
        example: '(555) 987-6543'
      }, {
        type: 'emergency',
        region: 'US',
        format: 'XXX',
        example: '911'
      }, {
        type: 'international',
        region: 'UK',
        format: '+44 XXXX XXXXXX',
        example: '+44 20 7123 4567'
      }];
    }
  }, {
    key: "getUsageStats",
    value: function getUsageStats(userId) {
      var contacts = userId ? this.getCustomContacts(userId) : this.customContacts;
      var today = new Date();
      today.setHours(0, 0, 0, 0);
      var dailyUsage = contacts.reduce(function (count, contact) {
        var lastUsed = new Date(contact.lastUsed);
        lastUsed.setHours(0, 0, 0, 0);
        return count + (lastUsed.getTime() === today.getTime() ? 1 : 0);
      }, 0);
      var riskLevel = 'low';
      if (dailyUsage > this.MAX_DAILY_CALLS * 0.8) {
        riskLevel = 'high';
      } else if (dailyUsage > this.MAX_DAILY_CALLS * 0.5) {
        riskLevel = 'medium';
      }
      return {
        totalContacts: this.customContacts.length,
        customContacts: contacts.length,
        dailyUsage: dailyUsage,
        riskLevel: riskLevel
      };
    }
  }, {
    key: "initializeSafeNameDatabase",
    value: function initializeSafeNameDatabase() {
      this.safeNameDatabase = {
        firstNames: {
          male: ['James', 'Robert', 'John', 'Michael', 'David', 'William', 'Richard', 'Thomas', 'Christopher', 'Daniel', 'Matthew', 'Anthony', 'Mark', 'Steven', 'Paul', 'Andrew', 'Joshua', 'Kenneth', 'Kevin', 'Brian'],
          female: ['Mary', 'Patricia', 'Jennifer', 'Linda', 'Elizabeth', 'Barbara', 'Susan', 'Jessica', 'Sarah', 'Karen', 'Nancy', 'Lisa', 'Betty', 'Sandra', 'Ashley', 'Dorothy', 'Kimberly', 'Emily', 'Donna', 'Michelle'],
          neutral: ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Casey', 'Riley', 'Avery', 'Quinn', 'Sage', 'River', 'Phoenix', 'Drew', 'Corey', 'Dylan', 'Logan', 'Mason', 'Reese', 'Rowan']
        },
        lastNames: ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez', 'Hernandez', 'Lopez', 'Gonzalez', 'Wilson', 'Anderson', 'Thomas', 'Taylor', 'Moore', 'Jackson', 'Martin', 'Lee', 'Perez', 'Thompson', 'White', 'Harris', 'Sanchez', 'Clark'],
        businessNames: ['TechCorp Solutions', 'Global Enterprises Inc.', 'Pacific Associates', 'Metro Consulting Group', 'Summit Business Services', 'Premier Solutions', 'Advanced Systems LLC', 'Strategic Partners Corp', 'Innovation Group', 'Professional Services Ltd.', 'Corporate Solutions Inc.', 'Elite Consulting'],
        emergencyContacts: [{
          service: 'Emergency Services',
          number: '911',
          description: 'Emergency response'
        }, {
          service: 'Police',
          number: '911',
          description: 'Police emergency'
        }, {
          service: 'Fire Department',
          number: '911',
          description: 'Fire emergency'
        }],
        blockedPatterns: ['555-0100', '555-0111', '555-0122', '555-0133', '555-0144', '000-000-0000', '123-456-7890'],
        suspiciousPatterns: ['555-01', '555-09', '999', '666', '123']
      };
      this.blockedPatterns = this.safeNameDatabase.blockedPatterns;
      this.suspiciousPatterns = this.safeNameDatabase.suspiciousPatterns;
    }
  }, {
    key: "initializeCallerIDPatterns",
    value: function initializeCallerIDPatterns() {
      this.geographicRegions = [{
        code: 'US',
        name: 'United States',
        countryCode: '+1',
        numberLength: 10,
        format: '(XXX) XXX-XXXX',
        isTollFreeAvailable: true
      }, {
        code: 'UK',
        name: 'United Kingdom',
        countryCode: '+44',
        numberLength: 10,
        format: 'XXXX XXXXXX',
        isTollFreeAvailable: true
      }, {
        code: 'CA',
        name: 'Canada',
        countryCode: '+1',
        numberLength: 10,
        format: '(XXX) XXX-XXXX',
        isTollFreeAvailable: true
      }];
    }
  }, {
    key: "generateRandomCallerInfo",
    value: function () {
      var _generateRandomCallerInfo = (0, _asyncToGenerator2.default)(function* (callerType, region) {
        var regionData = region ? this.geographicRegions.find(function (r) {
          return r.code === region;
        }) : this.geographicRegions[0];
        var phoneNumber = this.generatePhoneNumber(regionData);
        var name = this.generateName(callerType);
        var displayName = this.generateDisplayName(name, callerType);
        return {
          id: (0, _uuid.v4)(),
          name: name,
          phoneNumber: phoneNumber,
          callerType: callerType,
          location: regionData == null ? void 0 : regionData.name,
          riskLevel: 'low',
          isVerified: true,
          displayName: displayName
        };
      });
      function generateRandomCallerInfo(_x5, _x6) {
        return _generateRandomCallerInfo.apply(this, arguments);
      }
      return generateRandomCallerInfo;
    }()
  }, {
    key: "generatePhoneNumber",
    value: function generatePhoneNumber(region) {
      if (!region) {
        var areaCode = Math.floor(Math.random() * 800) + 200;
        var exchange = Math.floor(Math.random() * 800) + 200;
        var number = Math.floor(Math.random() * 9000) + 1000;
        return `(${areaCode}) ${exchange}-${number}`;
      }
      switch (region.code) {
        case 'US':
        case 'CA':
          var _areaCode = Math.floor(Math.random() * 800) + 200;
          var _exchange = Math.floor(Math.random() * 800) + 200;
          var _number = Math.floor(Math.random() * 9000) + 1000;
          return `(${_areaCode}) ${_exchange}-${_number}`;
        case 'UK':
          var ukArea = Math.floor(Math.random() * 50) + 20;
          var ukNumber = Math.floor(Math.random() * 9000000) + 1000000;
          return `020 ${ukArea} ${ukNumber}`;
        default:
          return `+${region.countryCode} ${Math.floor(Math.random() * 9000000000) + 1000000000}`;
      }
    }
  }, {
    key: "generateName",
    value: function generateName(callerType) {
      var _this$safeNameDatabas = this.safeNameDatabase,
        firstNames = _this$safeNameDatabas.firstNames,
        lastNames = _this$safeNameDatabas.lastNames,
        businessNames = _this$safeNameDatabas.businessNames;
      switch (callerType) {
        case 'business':
          return businessNames[Math.floor(Math.random() * businessNames.length)];
        case 'personal':
        case 'safe':
          var gender = Math.random() < 0.5 ? 'male' : 'female';
          var firstName = firstNames[gender][Math.floor(Math.random() * firstNames[gender].length)];
          var lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
          return `${firstName} ${lastName}`;
        default:
          var neutralFirst = firstNames.neutral[Math.floor(Math.random() * firstNames.neutral.length)];
          var last = lastNames[Math.floor(Math.random() * lastNames.length)];
          return `${neutralFirst} ${last}`;
      }
    }
  }, {
    key: "generateDisplayName",
    value: function generateDisplayName(name, callerType) {
      if (callerType === 'business') {
        var titles = ['Dr.', 'Mr.', 'Ms.', 'Mrs.'];
        var title = titles[Math.floor(Math.random() * titles.length)];
        return `${title} ${name}`;
      } else if (callerType === 'emergency') {
        return 'Emergency Services';
      }
      return name;
    }
  }, {
    key: "createCallerInfoFromContact",
    value: function createCallerInfoFromContact(contact) {
      return {
        id: contact.id,
        name: contact.name,
        phoneNumber: contact.phoneNumber,
        callerType: contact.callerType,
        location: contact.location,
        avatarUrl: contact.avatarUrl,
        riskLevel: 'low',
        isVerified: contact.isVerified,
        displayName: contact.name
      };
    }
  }, {
    key: "getRandomCustomContact",
    value: function getRandomCustomContact(userId) {
      var userContacts = this.customContacts.filter(function (c) {
        return c.userId === userId;
      });
      if (userContacts.length === 0) return null;
      return userContacts[Math.floor(Math.random() * userContacts.length)];
    }
  }, {
    key: "updateCallerUsage",
    value: function updateCallerUsage(callerId) {
      _Logger.logger.debug(`Updated usage for caller: ${callerId}`);
    }
  }, {
    key: "isBlockedPattern",
    value: function isBlockedPattern(phoneNumber) {
      return this.blockedPatterns.some(function (pattern) {
        return phoneNumber.includes(pattern);
      });
    }
  }, {
    key: "isSuspiciousPattern",
    value: function isSuspiciousPattern(phoneNumber) {
      return this.suspiciousPatterns.some(function (pattern) {
        return phoneNumber.includes(pattern);
      });
    }
  }, {
    key: "hasSuspiciousPattern",
    value: function hasSuspiciousPattern(phoneNumber) {
      var suspiciousSequences = ['123', '456', '789', '000', '111', '222'];
      return suspiciousSequences.some(function (seq) {
        return phoneNumber.includes(seq);
      });
    }
  }, {
    key: "isEmergencyNumber",
    value: function isEmergencyNumber(number) {
      var emergencyNumbers = ['911', '112', '999', '000', '110'];
      return emergencyNumbers.includes(number) || emergencyNumbers.some(function (emergency) {
        return number.startsWith(emergency);
      });
    }
  }, {
    key: "isTollFreeNumber",
    value: function isTollFreeNumber(number) {
      var tollFreePatterns = ['800', '888', '877', '866', '855', '844', '833'];
      return tollFreePatterns.some(function (pattern) {
        return number.includes(pattern);
      });
    }
  }, {
    key: "isValidPhoneRegion",
    value: function isValidPhoneRegion(region) {
      return this.geographicRegions.some(function (r) {
        return r.code === region;
      });
    }
  }, {
    key: "isValidGeographicRegion",
    value: function isValidGeographicRegion(region) {
      return this.geographicRegions.some(function (r) {
        return r.code === region;
      });
    }
  }, {
    key: "isEmergencyAllowed",
    value: function isEmergencyAllowed(callerInfo) {
      return callerInfo.callerType === 'emergency' && callerInfo.isVerified;
    }
  }, {
    key: "validateBusinessNumber",
    value: function validateBusinessNumber(phoneNumber) {
      var issues = [];
      if (!phoneNumber.match(/[\d\-\(\)\+]/)) {
        issues.push('Invalid business number format');
      }
      var cleaned = phoneNumber.replace(/[\s\-\(\)\.]/g, '');
      if (cleaned.length < 10 || cleaned.length > 15) {
        issues.push('Business number length outside expected range');
      }
      return {
        isValid: issues.length === 0,
        issues: issues
      };
    }
  }, {
    key: "validateCallerName",
    value: function validateCallerName(name, displayName) {
      var issues = [];
      var inappropriateWords = ['scam', 'spam', 'fraud', 'fake'];
      var nameLower = name.toLowerCase();
      var displayLower = displayName.toLowerCase();
      if (inappropriateWords.some(function (word) {
        return nameLower.includes(word) || displayLower.includes(word);
      })) {
        issues.push('Name contains inappropriate content');
      }
      if (name.length < 2 || name.length > 50) {
        issues.push('Name length outside acceptable range');
      }
      if (!name.match(/^[a-zA-Z\s\.\-']+$/)) {
        issues.push('Name contains invalid characters');
      }
      return {
        isValid: issues.length === 0,
        issues: issues
      };
    }
  }, {
    key: "validateAllContacts",
    value: function () {
      var _validateAllContacts = (0, _asyncToGenerator2.default)(function* () {
        for (var contact of this.customContacts) {
          var callerInfo = {
            id: contact.id,
            name: contact.name,
            phoneNumber: contact.phoneNumber,
            callerType: contact.callerType,
            location: contact.location,
            avatarUrl: contact.avatarUrl,
            riskLevel: 'low',
            isVerified: contact.isVerified,
            displayName: contact.name
          };
          var validation = this.validateCallerID(callerInfo);
          if (!validation.isSafe) {
            _Logger.logger.warn(`Contact ${contact.name} failed validation, marked for review`);
            contact.isVerified = false;
          }
        }
      });
      function validateAllContacts() {
        return _validateAllContacts.apply(this, arguments);
      }
      return validateAllContacts;
    }()
  }, {
    key: "loadCustomContacts",
    value: function () {
      var _loadCustomContacts = (0, _asyncToGenerator2.default)(function* () {
        try {
          var contacts = yield _asyncStorage.default.getItem('custom_contacts');
          if (contacts) {
            this.customContacts = JSON.parse(contacts);
            _Logger.logger.debug(`Loaded ${this.customContacts.length} custom contacts`);
          }
        } catch (error) {
          _Logger.logger.warn('Failed to load custom contacts from storage:', error);
        }
      });
      function loadCustomContacts() {
        return _loadCustomContacts.apply(this, arguments);
      }
      return loadCustomContacts;
    }()
  }, {
    key: "saveCustomContacts",
    value: function () {
      var _saveCustomContacts = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield _asyncStorage.default.setItem('custom_contacts', JSON.stringify(this.customContacts));
        } catch (error) {
          _Logger.logger.warn('Failed to save custom contacts to storage:', error);
        }
      });
      function saveCustomContacts() {
        return _saveCustomContacts.apply(this, arguments);
      }
      return saveCustomContacts;
    }()
  }, {
    key: "loadSafetyPatterns",
    value: function () {
      var _loadSafetyPatterns = (0, _asyncToGenerator2.default)(function* () {
        _Logger.logger.debug('Loaded safety patterns');
      });
      function loadSafetyPatterns() {
        return _loadSafetyPatterns.apply(this, arguments);
      }
      return loadSafetyPatterns;
    }()
  }, {
    key: "dispose",
    value: (function () {
      var _dispose = (0, _asyncToGenerator2.default)(function* () {
        try {
          yield this.saveCustomContacts();
          this.customContacts = [];
          this.isInitialized = false;
          _Logger.logger.info('Caller ID Service disposed');
        } catch (error) {
          _Logger.logger.error('Error during Caller ID Service disposal:', error);
        }
      });
      function dispose() {
        return _dispose.apply(this, arguments);
      }
      return dispose;
    }())
  }], [{
    key: "getInstance",
    value: function getInstance() {
      if (!CallerIDService.instance) {
        CallerIDService.instance = new CallerIDService();
      }
      return CallerIDService.instance;
    }
  }]);
}();
var callerIDService = exports.callerIDService = CallerIDService.getInstance();
var _default = exports.default = callerIDService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3ROYXRpdmUiLCJyZXF1aXJlIiwiX2FzeW5jU3RvcmFnZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdXVpZCIsIl90eXBlcyIsIl9Mb2dnZXIiLCJDYWxsZXJJRFNlcnZpY2UiLCJleHBvcnRzIiwiX2NsYXNzQ2FsbENoZWNrMiIsImRlZmF1bHQiLCJzYWZlTmFtZURhdGFiYXNlIiwiZmlyc3ROYW1lcyIsIm1hbGUiLCJmZW1hbGUiLCJuZXV0cmFsIiwibGFzdE5hbWVzIiwiYnVzaW5lc3NOYW1lcyIsImVtZXJnZW5jeUNvbnRhY3RzIiwiYmxvY2tlZFBhdHRlcm5zIiwic3VzcGljaW91c1BhdHRlcm5zIiwiY3VzdG9tQ29udGFjdHMiLCJnZW9ncmFwaGljUmVnaW9ucyIsImlzSW5pdGlhbGl6ZWQiLCJNQVhfREFJTFlfQ0FMTFMiLCJNQVhfQ1VTVE9NX0NPTlRBQ1RTIiwiQ0FDSEVfRFVSQVRJT04iLCJpbml0aWFsaXplU2FmZU5hbWVEYXRhYmFzZSIsImluaXRpYWxpemVDYWxsZXJJRFBhdHRlcm5zIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsInZhbHVlIiwiX2luaXRpYWxpemUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJsb2dnZXIiLCJpbmZvIiwibG9hZEN1c3RvbUNvbnRhY3RzIiwibG9hZFNhZmV0eVBhdHRlcm5zIiwidmFsaWRhdGVBbGxDb250YWN0cyIsInN1Y2Nlc3MiLCJtZXRhZGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJyZXF1ZXN0SWQiLCJ1dWlkdjQiLCJkdXJhdGlvbiIsInBsYXRmb3JtIiwiUGxhdGZvcm0iLCJPUyIsImVycm9yIiwidHlwZSIsIkNhbGxFcnJvclR5cGUiLCJJTlZBTElEX0NBTExFUl9JRCIsImNvZGUiLCJtZXNzYWdlIiwicmVjb3ZlcmFibGUiLCJzdWdnZXN0ZWRBY3Rpb24iLCJ0ZWNobmljYWxEZXRhaWxzIiwiY2FsbElkIiwidXNlcklkIiwiaW5pdGlhbGl6ZSIsImFwcGx5IiwiYXJndW1lbnRzIiwidmFsaWRhdGVDYWxsZXJJRCIsImNhbGxlckluZm8iLCJ2YWxpZGF0aW9uIiwiaXNTYWZlIiwicmlza0xldmVsIiwicmVhc29ucyIsInN1Z2dlc3Rpb25zIiwibmVlZHNSZXZpZXciLCJpc0Jsb2NrZWRQYXR0ZXJuIiwicGhvbmVOdW1iZXIiLCJwdXNoIiwiaXNTdXNwaWNpb3VzUGF0dGVybiIsInBob25lVmFsaWRhdGlvbiIsInZhbGlkYXRlUGhvbmVOdW1iZXIiLCJpc1ZhbGlkIiwiaXNFbWVyZ2VuY3kiLCJpc0VtZXJnZW5jeUFsbG93ZWQiLCJyZWdpb24iLCJpc1ZhbGlkR2VvZ3JhcGhpY1JlZ2lvbiIsImNhbGxlclR5cGUiLCJidXNpbmVzc1ZhbGlkYXRpb24iLCJ2YWxpZGF0ZUJ1c2luZXNzTnVtYmVyIiwibmFtZVZhbGlkYXRpb24iLCJ2YWxpZGF0ZUNhbGxlck5hbWUiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJsZW5ndGgiLCJzb21lIiwiciIsImluY2x1ZGVzIiwiZmlsdGVyIiwiZGVidWciLCJfZ2VuZXJhdGVTYWZlQ2FsbGVySUQiLCJvcHRpb25zIiwidW5kZWZpbmVkIiwidXNlQ3VzdG9tQ29udGFjdCIsImN1c3RvbUNvbnRhY3QiLCJnZXRSYW5kb21DdXN0b21Db250YWN0IiwiY3JlYXRlQ2FsbGVySW5mb0Zyb21Db250YWN0IiwiZ2VuZXJhdGVSYW5kb21DYWxsZXJJbmZvIiwicmV0cnlWYWxpZGF0aW9uIiwidXBkYXRlQ2FsbGVyVXNhZ2UiLCJpZCIsImRhdGEiLCJnZW5lcmF0ZVNhZmVDYWxsZXJJRCIsImdldFNhZmVOYW1lRGF0YWJhc2UiLCJPYmplY3QiLCJhc3NpZ24iLCJudW1iZXIiLCJjbGVhbmVkIiwicmVwbGFjZSIsImZvcm1hdCIsImlzVG9sbEZyZWUiLCJyaXNrRmxhZ3MiLCJpc0VtZXJnZW5jeU51bWJlciIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJpc1RvbGxGcmVlTnVtYmVyIiwiaGFzU3VzcGljaW91c1BhdHRlcm4iLCJpc1ZhbGlkUGhvbmVSZWdpb24iLCJfYWRkQ3VzdG9tQ29udGFjdCIsImNvbnRhY3QiLCJ1c2VyQ29udGFjdHMiLCJjIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwibmV3Q29udGFjdCIsInVzYWdlQ291bnQiLCJsYXN0VXNlZCIsImxvY2F0aW9uIiwiYXZhdGFyVXJsIiwiaXNWZXJpZmllZCIsInNhdmVDdXN0b21Db250YWN0cyIsImFkZEN1c3RvbUNvbnRhY3QiLCJfeCIsIl94MiIsImdldEN1c3RvbUNvbnRhY3RzIiwiX3JlbW92ZUN1c3RvbUNvbnRhY3QiLCJjb250YWN0SWQiLCJpbml0aWFsTGVuZ3RoIiwiQUNDRVNTX0RFTklFRCIsInJlbW92ZUN1c3RvbUNvbnRhY3QiLCJfeDMiLCJfeDQiLCJnZXRDYWxsZXJJRFBhdHRlcm5zIiwiZXhhbXBsZSIsImdldFVzYWdlU3RhdHMiLCJjb250YWN0cyIsInRvZGF5Iiwic2V0SG91cnMiLCJkYWlseVVzYWdlIiwicmVkdWNlIiwiY291bnQiLCJnZXRUaW1lIiwidG90YWxDb250YWN0cyIsInNlcnZpY2UiLCJkZXNjcmlwdGlvbiIsImNvdW50cnlDb2RlIiwibnVtYmVyTGVuZ3RoIiwiaXNUb2xsRnJlZUF2YWlsYWJsZSIsIl9nZW5lcmF0ZVJhbmRvbUNhbGxlckluZm8iLCJyZWdpb25EYXRhIiwiZmluZCIsImdlbmVyYXRlUGhvbmVOdW1iZXIiLCJnZW5lcmF0ZU5hbWUiLCJnZW5lcmF0ZURpc3BsYXlOYW1lIiwiX3g1IiwiX3g2IiwiYXJlYUNvZGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleGNoYW5nZSIsInVrQXJlYSIsInVrTnVtYmVyIiwiX3RoaXMkc2FmZU5hbWVEYXRhYmFzIiwiZ2VuZGVyIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJuZXV0cmFsRmlyc3QiLCJsYXN0IiwidGl0bGVzIiwidGl0bGUiLCJjYWxsZXJJZCIsInBhdHRlcm4iLCJzdXNwaWNpb3VzU2VxdWVuY2VzIiwic2VxIiwiZW1lcmdlbmN5TnVtYmVycyIsImVtZXJnZW5jeSIsInRvbGxGcmVlUGF0dGVybnMiLCJpc3N1ZXMiLCJtYXRjaCIsImluYXBwcm9wcmlhdGVXb3JkcyIsIm5hbWVMb3dlciIsInRvTG93ZXJDYXNlIiwiZGlzcGxheUxvd2VyIiwid29yZCIsIl92YWxpZGF0ZUFsbENvbnRhY3RzIiwid2FybiIsIl9sb2FkQ3VzdG9tQ29udGFjdHMiLCJBc3luY1N0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiX3NhdmVDdXN0b21Db250YWN0cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJfbG9hZFNhZmV0eVBhdHRlcm5zIiwiX2Rpc3Bvc2UiLCJkaXNwb3NlIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImNhbGxlcklEU2VydmljZSIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiQ2FsbGVySURTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2FsbGVyIElEIFNlcnZpY2UgZm9yIEZha2UgQ2FsbCBTeXN0ZW1cbiAqIFNhZmUgY2FsbGVyIElEIGdlbmVyYXRpb24gd2l0aCB2YWxpZGF0aW9uIGFuZCBwcm9mZXNzaW9uYWwgY29udGFjdCBkYXRhYmFzZVxuICovXG5cbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmltcG9ydCB7XG4gICAgQ2FsbGVySW5mbyxcbiAgICBTYWZldHlWYWxpZGF0aW9uLFxuICAgIFBob25lTnVtYmVyVmFsaWRhdGlvbixcbiAgICBTYWZlTmFtZURhdGFiYXNlLFxuICAgIENhbGxlcklEU2FmZXR5LFxuICAgIEZha2VDYWxsUmVzdWx0LFxuICAgIENhbGxFcnJvclR5cGVcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBoYXB0aWNNYW5hZ2VyLCBIYXB0aWNUeXBlIH0gZnJvbSAnLi4vLi4vdXRpbHMvSGFwdGljTWFuYWdlcic7XG5cbmludGVyZmFjZSBDb250YWN0UHJvZmlsZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGhvbmVOdW1iZXI6IHN0cmluZztcbiAgICBjYWxsZXJUeXBlOiAnc2FmZScgfCAnZW1lcmdlbmN5JyB8ICdidXNpbmVzcycgfCAncGVyc29uYWwnO1xuICAgIGxvY2F0aW9uPzogc3RyaW5nO1xuICAgIGF2YXRhclVybD86IHN0cmluZztcbiAgICBpc1ZlcmlmaWVkOiBib29sZWFuO1xuICAgIHVzYWdlQ291bnQ6IG51bWJlcjtcbiAgICBsYXN0VXNlZDogRGF0ZTtcbiAgICB1c2VySWQ6IHN0cmluZzsgLy8gRm9yIGN1c3RvbSBjb250YWN0c1xufVxuXG5pbnRlcmZhY2UgQ2FsbGVySURQYXR0ZXJuIHtcbiAgICB0eXBlOiAnYnVzaW5lc3MnIHwgJ3BlcnNvbmFsJyB8ICdlbWVyZ2VuY3knIHwgJ2ludGVybmF0aW9uYWwnO1xuICAgIHJlZ2lvbjogc3RyaW5nO1xuICAgIGZvcm1hdDogc3RyaW5nO1xuICAgIGV4YW1wbGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIEdlb2dyYXBoaWNSZWdpb24ge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBudW1iZXJMZW5ndGg6IG51bWJlcjtcbiAgICBmb3JtYXQ6IHN0cmluZztcbiAgICBpc1RvbGxGcmVlQXZhaWxhYmxlOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQ2FsbGVySURTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQ2FsbGVySURTZXJ2aWNlO1xuICAgIHByaXZhdGUgc2FmZU5hbWVEYXRhYmFzZTogU2FmZU5hbWVEYXRhYmFzZSA9IHtcbiAgICAgICAgZmlyc3ROYW1lczoge1xuICAgICAgICAgICAgbWFsZTogW10sXG4gICAgICAgICAgICBmZW1hbGU6IFtdLFxuICAgICAgICAgICAgbmV1dHJhbDogW11cbiAgICAgICAgfSxcbiAgICAgICAgbGFzdE5hbWVzOiBbXSxcbiAgICAgICAgYnVzaW5lc3NOYW1lczogW10sXG4gICAgICAgIGVtZXJnZW5jeUNvbnRhY3RzOiBbXSxcbiAgICAgICAgYmxvY2tlZFBhdHRlcm5zOiBbXSxcbiAgICAgICAgc3VzcGljaW91c1BhdHRlcm5zOiBbXVxuICAgIH07XG4gICAgcHJpdmF0ZSBjdXN0b21Db250YWN0czogQ29udGFjdFByb2ZpbGVbXSA9IFtdO1xuICAgIHByaXZhdGUgYmxvY2tlZFBhdHRlcm5zOiBzdHJpbmdbXSA9IFtdO1xuICAgIHByaXZhdGUgc3VzcGljaW91c1BhdHRlcm5zOiBzdHJpbmdbXSA9IFtdO1xuICAgIHByaXZhdGUgZ2VvZ3JhcGhpY1JlZ2lvbnM6IEdlb2dyYXBoaWNSZWdpb25bXSA9IFtdO1xuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgLy8gU2FmZXR5IHRocmVzaG9sZHNcbiAgICBwcml2YXRlIHJlYWRvbmx5IE1BWF9EQUlMWV9DQUxMUyA9IDEwMDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IE1BWF9DVVNUT01fQ09OVEFDVFMgPSA1MDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IENBQ0hFX0RVUkFUSU9OID0gMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gMjQgaG91cnNcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNhZmVOYW1lRGF0YWJhc2UoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ2FsbGVySURQYXR0ZXJucygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQ2FsbGVySURTZXJ2aWNlIHtcbiAgICAgICAgaWYgKCFDYWxsZXJJRFNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIENhbGxlcklEU2VydmljZS5pbnN0YW5jZSA9IG5ldyBDYWxsZXJJRFNlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2FsbGVySURTZXJ2aWNlLmluc3RhbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGNhbGxlciBJRCBzZXJ2aWNlXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTxGYWtlQ2FsbFJlc3VsdDx2b2lkPj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0luaXRpYWxpemluZyBDYWxsZXIgSUQgU2VydmljZS4uLicpO1xuXG4gICAgICAgICAgICAvLyBMb2FkIGN1c3RvbSBjb250YWN0cyBmcm9tIHN0b3JhZ2VcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEN1c3RvbUNvbnRhY3RzKCk7XG5cbiAgICAgICAgICAgIC8vIExvYWQgc2FmZXR5IHBhdHRlcm5zXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTYWZldHlQYXR0ZXJucygpO1xuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBleGlzdGluZyBjb250YWN0c1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUFsbENvbnRhY3RzKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnQ2FsbGVyIElEIFNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogUGxhdGZvcm0uT1MgYXMgYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgQ2FsbGVyIElEIFNlcnZpY2U6JywgZXJyb3IgYXMgYW55KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ2FsbEVycm9yVHlwZS5JTlZBTElEX0NBTExFUl9JRCxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJ0lOSVRfRkFJTEVEJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBpbml0aWFsaXplIGNhbGxlciBJRCBzZXJ2aWNlJyxcbiAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ0NoZWNrIHNlcnZpY2UgZGVwZW5kZW5jaWVzJyxcbiAgICAgICAgICAgICAgICAgICAgdGVjaG5pY2FsRGV0YWlsczogZXJyb3IgYXMgYW55LFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogJycsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogJydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgY2FsbGVyIElEIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgcHVibGljIHZhbGlkYXRlQ2FsbGVySUQoY2FsbGVySW5mbzogQ2FsbGVySW5mbyk6IFNhZmV0eVZhbGlkYXRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbjogU2FmZXR5VmFsaWRhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBpc1NhZmU6IHRydWUsXG4gICAgICAgICAgICAgICAgcmlza0xldmVsOiAnbG93JyxcbiAgICAgICAgICAgICAgICByZWFzb25zOiBbXSxcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogW10sXG4gICAgICAgICAgICAgICAgbmVlZHNSZXZpZXc6IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgYmxvY2tlZCBwYXR0ZXJuc1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNCbG9ja2VkUGF0dGVybihjYWxsZXJJbmZvLnBob25lTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uaXNTYWZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yaXNrTGV2ZWwgPSAnaGlnaCc7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yZWFzb25zLnB1c2goJ1Bob25lIG51bWJlciBtYXRjaGVzIGJsb2NrZWQgcGF0dGVybicpO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uc3VnZ2VzdGlvbnMucHVzaCgnVXNlIGEgZGlmZmVyZW50IHBob25lIG51bWJlciBmb3JtYXQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHN1c3BpY2lvdXMgcGF0dGVybnNcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3VzcGljaW91c1BhdHRlcm4oY2FsbGVySW5mby5waG9uZU51bWJlcikpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9IHZhbGlkYXRpb24ucmlza0xldmVsID09PSAnaGlnaCcgPyAnaGlnaCcgOiAnbWVkaXVtJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlYXNvbnMucHVzaCgnUGhvbmUgbnVtYmVyIGhhcyBzdXNwaWNpb3VzIGNoYXJhY3RlcmlzdGljcycpO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uc3VnZ2VzdGlvbnMucHVzaCgnVmVyaWZ5IG51bWJlciBmb3JtYXQgYW5kIG9yaWdpbicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBwaG9uZSBudW1iZXIgZm9ybWF0XG4gICAgICAgICAgICBjb25zdCBwaG9uZVZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlUGhvbmVOdW1iZXIoY2FsbGVySW5mby5waG9uZU51bWJlcik7XG4gICAgICAgICAgICBpZiAoIXBob25lVmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5pc1NhZmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9ICdoaWdoJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlYXNvbnMucHVzaCgnSW52YWxpZCBwaG9uZSBudW1iZXIgZm9ybWF0Jyk7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5zdWdnZXN0aW9ucy5wdXNoKCdVc2UgcHJvcGVyIGludGVybmF0aW9uYWwgb3IgbG9jYWwgZm9ybWF0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGVtZXJnZW5jeSBudW1iZXIgcmVzdHJpY3Rpb25zXG4gICAgICAgICAgICBpZiAocGhvbmVWYWxpZGF0aW9uLmlzRW1lcmdlbmN5ICYmICF0aGlzLmlzRW1lcmdlbmN5QWxsb3dlZChjYWxsZXJJbmZvKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uaXNTYWZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yaXNrTGV2ZWwgPSAnaGlnaCc7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yZWFzb25zLnB1c2goJ0VtZXJnZW5jeSBudW1iZXJzIHJlcXVpcmUgc3BlY2lhbCB2YWxpZGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5zdWdnZXN0aW9ucy5wdXNoKCdDb250YWN0IHN1cHBvcnQgZm9yIGVtZXJnZW5jeSBjYWxsIHNldHVwJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdlb2dyYXBoaWMgdmFsaWRhdGlvblxuICAgICAgICAgICAgaWYgKHBob25lVmFsaWRhdGlvbi5yZWdpb24gJiYgIXRoaXMuaXNWYWxpZEdlb2dyYXBoaWNSZWdpb24ocGhvbmVWYWxpZGF0aW9uLnJlZ2lvbikpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9IHZhbGlkYXRpb24ucmlza0xldmVsID09PSAnaGlnaCcgPyAnaGlnaCcgOiAnbWVkaXVtJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlYXNvbnMucHVzaCgnUGhvbmUgbnVtYmVyIGZyb20gcG90ZW50aWFsbHkgcHJvYmxlbWF0aWMgcmVnaW9uJyk7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5uZWVkc1JldmlldyA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEJ1c2luZXNzIG51bWJlciB2YWxpZGF0aW9uXG4gICAgICAgICAgICBpZiAoY2FsbGVySW5mby5jYWxsZXJUeXBlID09PSAnYnVzaW5lc3MnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVzaW5lc3NWYWxpZGF0aW9uID0gdGhpcy52YWxpZGF0ZUJ1c2luZXNzTnVtYmVyKGNhbGxlckluZm8ucGhvbmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGlmICghYnVzaW5lc3NWYWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yaXNrTGV2ZWwgPSB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9PT0gJ2hpZ2gnID8gJ2hpZ2gnIDogJ21lZGl1bSc7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ucmVhc29ucy5wdXNoKCdCdXNpbmVzcyBudW1iZXIgZm9ybWF0IGlzc3VlcyBkZXRlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnN1Z2dlc3Rpb25zLnB1c2goJ1ZlcmlmeSBidXNpbmVzcyBudW1iZXIgYXV0aGVudGljaXR5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb250ZW50IHZhbGlkYXRpb24gZm9yIG5hbWVzXG4gICAgICAgICAgICBjb25zdCBuYW1lVmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVDYWxsZXJOYW1lKGNhbGxlckluZm8ubmFtZSwgY2FsbGVySW5mby5kaXNwbGF5TmFtZSk7XG4gICAgICAgICAgICBpZiAoIW5hbWVWYWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9IHZhbGlkYXRpb24ucmlza0xldmVsID09PSAnaGlnaCcgPyAnaGlnaCcgOiAnbWVkaXVtJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlYXNvbnMucHVzaCgnQ2FsbGVyIG5hbWUgY29udGFpbnMgc3VzcGljaW91cyBjb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5zdWdnZXN0aW9ucy5wdXNoKCdVc2UgcHJvZmVzc2lvbmFsIGJ1c2luZXNzIG5hbWVzJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJpc2sgbGV2ZWwgZGV0ZXJtaW5hdGlvblxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb24ucmVhc29ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9ICdsb3cnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxpZGF0aW9uLnJlYXNvbnMuc29tZShyID0+IHIuaW5jbHVkZXMoJ2hpZ2gnKSkpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9ICdoaWdoJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsaWRhdGlvbi5yZWFzb25zLnNvbWUociA9PiByLmluY2x1ZGVzKCdtZWRpdW0nKSkpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tMZXZlbCA9ICdtZWRpdW0nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBPdmVyYWxsIHNhZmV0eSBjaGVja1xuICAgICAgICAgICAgdmFsaWRhdGlvbi5pc1NhZmUgPSB2YWxpZGF0aW9uLnJpc2tMZXZlbCAhPT0gJ2hpZ2gnICYmXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5yZWFzb25zLmZpbHRlcihyID0+IHIuaW5jbHVkZXMoJ0ludmFsaWQnKSB8fCByLmluY2x1ZGVzKCdibG9ja2VkJykpLmxlbmd0aCA9PT0gMDtcblxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBDYWxsZXIgSUQgdmFsaWRhdGlvbiBjb21wbGV0ZWQgZm9yICR7Y2FsbGVySW5mby5kaXNwbGF5TmFtZX06ICR7dmFsaWRhdGlvbi5yaXNrTGV2ZWx9IHJpc2tgKTtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdDYWxsZXIgSUQgdmFsaWRhdGlvbiBmYWlsZWQ6JywgZXJyb3IgYXMgYW55KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNTYWZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByaXNrTGV2ZWw6ICdoaWdoJyxcbiAgICAgICAgICAgICAgICByZWFzb25zOiBbJ1ZhbGlkYXRpb24gc3lzdGVtIGVycm9yJ10sXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IFsnQ29udGFjdCBzdXBwb3J0IGlmIHByb2JsZW0gcGVyc2lzdHMnXSxcbiAgICAgICAgICAgICAgICBuZWVkc1JldmlldzogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgc2FmZSBjYWxsZXIgSURcbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgZ2VuZXJhdGVTYWZlQ2FsbGVySUQoXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGNhbGxlclR5cGU/OiAnc2FmZScgfCAnZW1lcmdlbmN5JyB8ICdidXNpbmVzcycgfCAncGVyc29uYWwnO1xuICAgICAgICAgICAgcmVnaW9uPzogc3RyaW5nO1xuICAgICAgICAgICAgdXNlQ3VzdG9tQ29udGFjdD86IGJvb2xlYW47XG4gICAgICAgICAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgICAgIH0gPSB7fVxuICAgICk6IFByb21pc2U8RmFrZUNhbGxSZXN1bHQ8Q2FsbGVySW5mbz4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBDYWxsRXJyb3JUeXBlLklOVkFMSURfQ0FMTEVSX0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ05PVF9JTklUSUFMSVpFRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ2FsbGVyIElEIHNlcnZpY2Ugbm90IGluaXRpYWxpemVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnQ2FsbCBpbml0aWFsaXplKCkgZmlyc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogJydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbGxlclR5cGUgPSBvcHRpb25zLmNhbGxlclR5cGUgfHwgJ3NhZmUnO1xuICAgICAgICAgICAgbGV0IGNhbGxlckluZm86IENhbGxlckluZm87XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIHNob3VsZCB1c2UgYSBjdXN0b20gY29udGFjdFxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlQ3VzdG9tQ29udGFjdCAmJiBvcHRpb25zLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1c3RvbUNvbnRhY3QgPSB0aGlzLmdldFJhbmRvbUN1c3RvbUNvbnRhY3Qob3B0aW9ucy51c2VySWQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXN0b21Db250YWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxlckluZm8gPSB0aGlzLmNyZWF0ZUNhbGxlckluZm9Gcm9tQ29udGFjdChjdXN0b21Db250YWN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsZXJJbmZvID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVJhbmRvbUNhbGxlckluZm8oY2FsbGVyVHlwZSwgb3B0aW9ucy5yZWdpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGVySW5mbyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVSYW5kb21DYWxsZXJJbmZvKGNhbGxlclR5cGUsIG9wdGlvbnMucmVnaW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgdGhlIGdlbmVyYXRlZCBjYWxsZXIgaW5mb1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVDYWxsZXJJRChjYWxsZXJJbmZvKTtcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbi5pc1NhZmUpIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgYWdhaW4gd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgIGNhbGxlckluZm8gPSBhd2FpdCB0aGlzLmdlbmVyYXRlUmFuZG9tQ2FsbGVySW5mbygnc2FmZScsICdVUycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5VmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVDYWxsZXJJRChjYWxsZXJJbmZvKTtcblxuICAgICAgICAgICAgICAgIGlmICghcmV0cnlWYWxpZGF0aW9uLmlzU2FmZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENhbGxFcnJvclR5cGUuSU5WQUxJRF9DQUxMRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ0dFTkVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGdlbmVyYXRlIHNhZmUgY2FsbGVyIElEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdUcnkgZGlmZmVyZW50IGNhbGxlciB0eXBlIG9yIHJlZ2lvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVjaG5pY2FsRGV0YWlsczogdmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogUGxhdGZvcm0uT1MgYXMgYW55XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdXNhZ2Ugc3RhdGlzdGljc1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxsZXJVc2FnZShjYWxsZXJJbmZvLmlkKTtcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oYEdlbmVyYXRlZCBzYWZlIGNhbGxlciBJRDogJHtjYWxsZXJJbmZvLmRpc3BsYXlOYW1lfSAoJHtjYWxsZXJJbmZvLnBob25lTnVtYmVyfSlgKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBjYWxsZXJJbmZvLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgc2FmZSBjYWxsZXIgSUQ6JywgZXJyb3IgYXMgYW55KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ2FsbEVycm9yVHlwZS5JTlZBTElEX0NBTExFUl9JRCxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJ0dFTkVSQVRJT05fRVJST1InLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGNhbGxlciBJRCcsXG4gICAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdDaGVjayBzZXJ2aWNlIGNvbmZpZ3VyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICB0ZWNobmljYWxEZXRhaWxzOiBlcnJvciBhcyBhbnksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiAnJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHV1aWR2NCgpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IFBsYXRmb3JtLk9TIGFzIGFueVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNhZmUgbmFtZSBkYXRhYmFzZVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRTYWZlTmFtZURhdGFiYXNlKCk6IFNhZmVOYW1lRGF0YWJhc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5zYWZlTmFtZURhdGFiYXNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgcGhvbmUgbnVtYmVyIGZvcm1hdCBhbmQgc2FmZXR5XG4gICAgICovXG4gICAgcHVibGljIHZhbGlkYXRlUGhvbmVOdW1iZXIobnVtYmVyOiBzdHJpbmcpOiBQaG9uZU51bWJlclZhbGlkYXRpb24ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2xlYW4gdGhlIG51bWJlclxuICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IG51bWJlci5yZXBsYWNlKC9bXFxzXFwtXFwoXFwpXFwuXS9nLCAnJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb246IFBob25lTnVtYmVyVmFsaWRhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc1NhZmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnbG9jYWwnLFxuICAgICAgICAgICAgICAgIHJlZ2lvbjogJ1VTJyxcbiAgICAgICAgICAgICAgICBpc0VtZXJnZW5jeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNUb2xsRnJlZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmlza0ZsYWdzOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gRW1lcmdlbmN5IG51bWJlciBkZXRlY3Rpb25cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRW1lcmdlbmN5TnVtYmVyKGNsZWFuZWQpKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5pc0VtZXJnZW5jeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJpc2tGbGFncy5wdXNoKCdlbWVyZ2VuY3knKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRm9ybWF0IHZhbGlkYXRpb25cbiAgICAgICAgICAgIGlmIChjbGVhbmVkLnN0YXJ0c1dpdGgoJysnKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uZm9ybWF0ID0gJ2ludGVybmF0aW9uYWwnO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ucmVnaW9uID0gY2xlYW5lZC5zdWJzdHJpbmcoMSwgMyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsZWFuZWQuc3RhcnRzV2l0aCgnMScpICYmIGNsZWFuZWQubGVuZ3RoID09PSAxMSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uZm9ybWF0ID0gJ25hdGlvbmFsJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlZ2lvbiA9ICdVUyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsZWFuZWQubGVuZ3RoID09PSAxMCkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uZm9ybWF0ID0gJ2xvY2FsJztcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLnJlZ2lvbiA9ICdVUyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ucmlza0ZsYWdzLnB1c2goJ3VudXN1YWxfbGVuZ3RoJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRvbGwtZnJlZSBkZXRlY3Rpb25cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVG9sbEZyZWVOdW1iZXIoY2xlYW5lZCkpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uLmlzVG9sbEZyZWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ucmlza0ZsYWdzLnB1c2goJ3RvbGxfZnJlZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdXNwaWNpb3VzIHBhdHRlcm4gZGV0ZWN0aW9uXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNTdXNwaWNpb3VzUGF0dGVybihjbGVhbmVkKSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24ucmlza0ZsYWdzLnB1c2goJ3N1c3BpY2lvdXNfcGF0dGVybicpO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRpb24uaXNTYWZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIHJlZ2lvblxuICAgICAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gdGhpcy5pc1ZhbGlkUGhvbmVSZWdpb24odmFsaWRhdGlvbi5yZWdpb24pO1xuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignUGhvbmUgbnVtYmVyIHZhbGlkYXRpb24gZmFpbGVkOicsIGVycm9yIGFzIGFueSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU2FmZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnbG9jYWwnLFxuICAgICAgICAgICAgICAgIHJlZ2lvbjogJ1VTJyxcbiAgICAgICAgICAgICAgICBpc0VtZXJnZW5jeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNUb2xsRnJlZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmlza0ZsYWdzOiBbJ3ZhbGlkYXRpb25fZXJyb3InXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBjdXN0b20gY2FsbGVyIGNvbnRhY3QgKFBybyBmZWF0dXJlKVxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBhZGRDdXN0b21Db250YWN0KFxuICAgICAgICBjb250YWN0OiBPbWl0PENvbnRhY3RQcm9maWxlLCAnaWQnIHwgJ3VzYWdlQ291bnQnIHwgJ2xhc3RVc2VkJz4sXG4gICAgICAgIHVzZXJJZDogc3RyaW5nXG4gICAgKTogUHJvbWlzZTxGYWtlQ2FsbFJlc3VsdDxDb250YWN0UHJvZmlsZT4+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGxpbWl0c1xuICAgICAgICAgICAgY29uc3QgdXNlckNvbnRhY3RzID0gdGhpcy5jdXN0b21Db250YWN0cy5maWx0ZXIoYyA9PiBjLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICAgICAgICAgIGlmICh1c2VyQ29udGFjdHMubGVuZ3RoID49IHRoaXMuTUFYX0NVU1RPTV9DT05UQUNUUykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogQ2FsbEVycm9yVHlwZS5SRVNPVVJDRV9FWEhBVVNURUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAnQ09OVEFDVF9MSU1JVF9SRUFDSEVEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXhpbXVtIGN1c3RvbSBjb250YWN0cyBsaW1pdCByZWFjaGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ1JlbW92ZSB1bnVzZWQgY29udGFjdHMgdG8gYWRkIG5ldyBvbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxJZDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb250YWN0XG4gICAgICAgICAgICBjb25zdCBuZXdDb250YWN0OiBDb250YWN0UHJvZmlsZSA9IHtcbiAgICAgICAgICAgICAgICAuLi5jb250YWN0LFxuICAgICAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICAgICAgICAgICAgICBsYXN0VXNlZDogbmV3IERhdGUoKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgY29udGFjdFxuICAgICAgICAgICAgY29uc3QgY2FsbGVySW5mbzogQ2FsbGVySW5mbyA9IHtcbiAgICAgICAgICAgICAgICBpZDogbmV3Q29udGFjdC5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBuZXdDb250YWN0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG5ld0NvbnRhY3QucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgY2FsbGVyVHlwZTogbmV3Q29udGFjdC5jYWxsZXJUeXBlLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBuZXdDb250YWN0LmxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGF2YXRhclVybDogbmV3Q29udGFjdC5hdmF0YXJVcmwsXG4gICAgICAgICAgICAgICAgcmlza0xldmVsOiAnbG93JyxcbiAgICAgICAgICAgICAgICBpc1ZlcmlmaWVkOiBuZXdDb250YWN0LmlzVmVyaWZpZWQsXG4gICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IG5ld0NvbnRhY3QubmFtZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMudmFsaWRhdGVDYWxsZXJJRChjYWxsZXJJbmZvKTtcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbi5pc1NhZmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENhbGxFcnJvclR5cGUuSU5WQUxJRF9DQUxMRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAnQ09OVEFDVF9WQUxJREFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29udGFjdCBmYWlsZWQgc2FmZXR5IHZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnQ2hlY2sgY29udGFjdCBkZXRhaWxzIGZvciBzYWZldHkgY29tcGxpYW5jZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWNobmljYWxEZXRhaWxzOiB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IFBsYXRmb3JtLk9TIGFzIGFueVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIHRvIHN0b3JhZ2VcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ29udGFjdHMucHVzaChuZXdDb250YWN0KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUN1c3RvbUNvbnRhY3RzKCk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBBZGRlZCBjdXN0b20gY29udGFjdDogJHtuZXdDb250YWN0Lm5hbWV9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YTogbmV3Q29udGFjdCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogUGxhdGZvcm0uT1MgYXMgYW55XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGFkZCBjdXN0b20gY29udGFjdDonLCBlcnJvciBhcyBhbnkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDYWxsRXJyb3JUeXBlLklOVkFMSURfQ0FMTEVSX0lELFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAnQUREX0NPTlRBQ1RfRkFJTEVEJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhZGQgY3VzdG9tIGNvbnRhY3QnLFxuICAgICAgICAgICAgICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkQWN0aW9uOiAnQ2hlY2sgY29udGFjdCBmb3JtYXQgYW5kIHRyeSBhZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIHRlY2huaWNhbERldGFpbHM6IGVycm9yIGFzIGFueSxcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICB1c2VySWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVzZXIncyBjdXN0b20gY29udGFjdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0Q3VzdG9tQ29udGFjdHModXNlcklkOiBzdHJpbmcpOiBDb250YWN0UHJvZmlsZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tQ29udGFjdHMuZmlsdGVyKGNvbnRhY3QgPT4gY29udGFjdC51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGN1c3RvbSBjb250YWN0XG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIHJlbW92ZUN1c3RvbUNvbnRhY3QoY29udGFjdElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxGYWtlQ2FsbFJlc3VsdDx2b2lkPj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbExlbmd0aCA9IHRoaXMuY3VzdG9tQ29udGFjdHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21Db250YWN0cyA9IHRoaXMuY3VzdG9tQ29udGFjdHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIGNvbnRhY3QgPT4gIShjb250YWN0LmlkID09PSBjb250YWN0SWQgJiYgY29udGFjdC51c2VySWQgPT09IHVzZXJJZClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUNvbnRhY3RzLmxlbmd0aCA9PT0gaW5pdGlhbExlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogQ2FsbEVycm9yVHlwZS5BQ0NFU1NfREVOSUVELFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ0NPTlRBQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb250YWN0IG5vdCBmb3VuZCBvciBhY2Nlc3MgZGVuaWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbjogJ0NoZWNrIGNvbnRhY3QgSUQgYW5kIHVzZXIgcGVybWlzc2lvbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IFBsYXRmb3JtLk9TIGFzIGFueVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ3VzdG9tQ29udGFjdHMoKTtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBSZW1vdmVkIGN1c3RvbSBjb250YWN0OiAke2NvbnRhY3RJZH1gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5PUyBhcyBhbnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gcmVtb3ZlIGN1c3RvbSBjb250YWN0OicsIGVycm9yIGFzIGFueSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENhbGxFcnJvclR5cGUuSU5WQUxJRF9DQUxMRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6ICdSRU1PVkVfQ09OVEFDVF9GQUlMRUQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJlbW92ZSBjdXN0b20gY29udGFjdCcsXG4gICAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRBY3Rpb246ICdUcnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0JyxcbiAgICAgICAgICAgICAgICAgICAgdGVjaG5pY2FsRGV0YWlsczogZXJyb3IgYXMgYW55LFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogJycsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHV1aWR2NCgpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IFBsYXRmb3JtLk9TIGFzIGFueVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYXZhaWxhYmxlIGNhbGxlciBJRCBwYXR0ZXJuc1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXRDYWxsZXJJRFBhdHRlcm5zKCk6IENhbGxlcklEUGF0dGVybltdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgdHlwZTogJ2J1c2luZXNzJywgcmVnaW9uOiAnVVMnLCBmb3JtYXQ6ICcoWFhYKSBYWFgtWFhYWCcsIGV4YW1wbGU6ICcoNTU1KSAxMjMtNDU2NycgfSxcbiAgICAgICAgICAgIHsgdHlwZTogJ2J1c2luZXNzJywgcmVnaW9uOiAnVVMnLCBmb3JtYXQ6ICcrMS1YWFgtWFhYLVhYWFgnLCBleGFtcGxlOiAnKzEtNTU1LTEyMy00NTY3JyB9LFxuICAgICAgICAgICAgeyB0eXBlOiAncGVyc29uYWwnLCByZWdpb246ICdVUycsIGZvcm1hdDogJyhYWFgpIFhYWC1YWFhYJywgZXhhbXBsZTogJyg1NTUpIDk4Ny02NTQzJyB9LFxuICAgICAgICAgICAgeyB0eXBlOiAnZW1lcmdlbmN5JywgcmVnaW9uOiAnVVMnLCBmb3JtYXQ6ICdYWFgnLCBleGFtcGxlOiAnOTExJyB9LFxuICAgICAgICAgICAgeyB0eXBlOiAnaW50ZXJuYXRpb25hbCcsIHJlZ2lvbjogJ1VLJywgZm9ybWF0OiAnKzQ0IFhYWFggWFhYWFhYJywgZXhhbXBsZTogJys0NCAyMCA3MTIzIDQ1NjcnIH1cbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdXNhZ2Ugc3RhdGlzdGljc1xuICAgICAqL1xuICAgIHB1YmxpYyBnZXRVc2FnZVN0YXRzKHVzZXJJZD86IHN0cmluZyk6IHtcbiAgICAgICAgdG90YWxDb250YWN0czogbnVtYmVyO1xuICAgICAgICBjdXN0b21Db250YWN0czogbnVtYmVyO1xuICAgICAgICBkYWlseVVzYWdlOiBudW1iZXI7XG4gICAgICAgIHJpc2tMZXZlbDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgICB9IHtcbiAgICAgICAgY29uc3QgY29udGFjdHMgPSB1c2VySWQgPyB0aGlzLmdldEN1c3RvbUNvbnRhY3RzKHVzZXJJZCkgOiB0aGlzLmN1c3RvbUNvbnRhY3RzO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAgIGNvbnN0IGRhaWx5VXNhZ2UgPSBjb250YWN0cy5yZWR1Y2UoKGNvdW50LCBjb250YWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYXN0VXNlZCA9IG5ldyBEYXRlKGNvbnRhY3QubGFzdFVzZWQpO1xuICAgICAgICAgICAgbGFzdFVzZWQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICByZXR1cm4gY291bnQgKyAobGFzdFVzZWQuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkgPyAxIDogMCk7XG4gICAgICAgIH0sIDApO1xuXG4gICAgICAgIGxldCByaXNrTGV2ZWw6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgPSAnbG93JztcbiAgICAgICAgaWYgKGRhaWx5VXNhZ2UgPiB0aGlzLk1BWF9EQUlMWV9DQUxMUyAqIDAuOCkge1xuICAgICAgICAgICAgcmlza0xldmVsID0gJ2hpZ2gnO1xuICAgICAgICB9IGVsc2UgaWYgKGRhaWx5VXNhZ2UgPiB0aGlzLk1BWF9EQUlMWV9DQUxMUyAqIDAuNSkge1xuICAgICAgICAgICAgcmlza0xldmVsID0gJ21lZGl1bSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG90YWxDb250YWN0czogdGhpcy5jdXN0b21Db250YWN0cy5sZW5ndGgsXG4gICAgICAgICAgICBjdXN0b21Db250YWN0czogY29udGFjdHMubGVuZ3RoLFxuICAgICAgICAgICAgZGFpbHlVc2FnZSxcbiAgICAgICAgICAgIHJpc2tMZXZlbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFByaXZhdGUgaW1wbGVtZW50YXRpb24gbWV0aG9kc1xuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplU2FmZU5hbWVEYXRhYmFzZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zYWZlTmFtZURhdGFiYXNlID0ge1xuICAgICAgICAgICAgZmlyc3ROYW1lczoge1xuICAgICAgICAgICAgICAgIG1hbGU6IFtcbiAgICAgICAgICAgICAgICAgICAgJ0phbWVzJywgJ1JvYmVydCcsICdKb2huJywgJ01pY2hhZWwnLCAnRGF2aWQnLCAnV2lsbGlhbScsICdSaWNoYXJkJyxcbiAgICAgICAgICAgICAgICAgICAgJ1Rob21hcycsICdDaHJpc3RvcGhlcicsICdEYW5pZWwnLCAnTWF0dGhldycsICdBbnRob255JywgJ01hcmsnLFxuICAgICAgICAgICAgICAgICAgICAnU3RldmVuJywgJ1BhdWwnLCAnQW5kcmV3JywgJ0pvc2h1YScsICdLZW5uZXRoJywgJ0tldmluJywgJ0JyaWFuJ1xuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZmVtYWxlOiBbXG4gICAgICAgICAgICAgICAgICAgICdNYXJ5JywgJ1BhdHJpY2lhJywgJ0plbm5pZmVyJywgJ0xpbmRhJywgJ0VsaXphYmV0aCcsICdCYXJiYXJhJyxcbiAgICAgICAgICAgICAgICAgICAgJ1N1c2FuJywgJ0plc3NpY2EnLCAnU2FyYWgnLCAnS2FyZW4nLCAnTmFuY3knLCAnTGlzYScsICdCZXR0eScsXG4gICAgICAgICAgICAgICAgICAgICdTYW5kcmEnLCAnQXNobGV5JywgJ0Rvcm90aHknLCAnS2ltYmVybHknLCAnRW1pbHknLCAnRG9ubmEnLFxuICAgICAgICAgICAgICAgICAgICAnTWljaGVsbGUnXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBuZXV0cmFsOiBbXG4gICAgICAgICAgICAgICAgICAgICdBbGV4JywgJ0pvcmRhbicsICdUYXlsb3InLCAnTW9yZ2FuJywgJ0Nhc2V5JywgJ1JpbGV5JyxcbiAgICAgICAgICAgICAgICAgICAgJ0F2ZXJ5JywgJ1F1aW5uJywgJ1NhZ2UnLCAnUml2ZXInLCAnUGhvZW5peCcsICdEcmV3JyxcbiAgICAgICAgICAgICAgICAgICAgJ0NvcmV5JywgJ0R5bGFuJywgJ0xvZ2FuJywgJ01hc29uJywgJ1JlZXNlJywgJ1Jvd2FuJ1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0TmFtZXM6IFtcbiAgICAgICAgICAgICAgICAnU21pdGgnLCAnSm9obnNvbicsICdXaWxsaWFtcycsICdCcm93bicsICdKb25lcycsICdHYXJjaWEnLCAnTWlsbGVyJyxcbiAgICAgICAgICAgICAgICAnRGF2aXMnLCAnUm9kcmlndWV6JywgJ01hcnRpbmV6JywgJ0hlcm5hbmRleicsICdMb3BleicsICdHb256YWxleicsXG4gICAgICAgICAgICAgICAgJ1dpbHNvbicsICdBbmRlcnNvbicsICdUaG9tYXMnLCAnVGF5bG9yJywgJ01vb3JlJywgJ0phY2tzb24nLCAnTWFydGluJyxcbiAgICAgICAgICAgICAgICAnTGVlJywgJ1BlcmV6JywgJ1Rob21wc29uJywgJ1doaXRlJywgJ0hhcnJpcycsICdTYW5jaGV6JywgJ0NsYXJrJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGJ1c2luZXNzTmFtZXM6IFtcbiAgICAgICAgICAgICAgICAnVGVjaENvcnAgU29sdXRpb25zJywgJ0dsb2JhbCBFbnRlcnByaXNlcyBJbmMuJywgJ1BhY2lmaWMgQXNzb2NpYXRlcycsXG4gICAgICAgICAgICAgICAgJ01ldHJvIENvbnN1bHRpbmcgR3JvdXAnLCAnU3VtbWl0IEJ1c2luZXNzIFNlcnZpY2VzJywgJ1ByZW1pZXIgU29sdXRpb25zJyxcbiAgICAgICAgICAgICAgICAnQWR2YW5jZWQgU3lzdGVtcyBMTEMnLCAnU3RyYXRlZ2ljIFBhcnRuZXJzIENvcnAnLCAnSW5ub3ZhdGlvbiBHcm91cCcsXG4gICAgICAgICAgICAgICAgJ1Byb2Zlc3Npb25hbCBTZXJ2aWNlcyBMdGQuJywgJ0NvcnBvcmF0ZSBTb2x1dGlvbnMgSW5jLicsICdFbGl0ZSBDb25zdWx0aW5nJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGVtZXJnZW5jeUNvbnRhY3RzOiBbXG4gICAgICAgICAgICAgICAgeyBzZXJ2aWNlOiAnRW1lcmdlbmN5IFNlcnZpY2VzJywgbnVtYmVyOiAnOTExJywgZGVzY3JpcHRpb246ICdFbWVyZ2VuY3kgcmVzcG9uc2UnIH0sXG4gICAgICAgICAgICAgICAgeyBzZXJ2aWNlOiAnUG9saWNlJywgbnVtYmVyOiAnOTExJywgZGVzY3JpcHRpb246ICdQb2xpY2UgZW1lcmdlbmN5JyB9LFxuICAgICAgICAgICAgICAgIHsgc2VydmljZTogJ0ZpcmUgRGVwYXJ0bWVudCcsIG51bWJlcjogJzkxMScsIGRlc2NyaXB0aW9uOiAnRmlyZSBlbWVyZ2VuY3knIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBibG9ja2VkUGF0dGVybnM6IFtcbiAgICAgICAgICAgICAgICAnNTU1LTAxMDAnLCAnNTU1LTAxMTEnLCAnNTU1LTAxMjInLCAnNTU1LTAxMzMnLCAnNTU1LTAxNDQnLFxuICAgICAgICAgICAgICAgICcwMDAtMDAwLTAwMDAnLCAnMTIzLTQ1Ni03ODkwJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHN1c3BpY2lvdXNQYXR0ZXJuczogW1xuICAgICAgICAgICAgICAgICc1NTUtMDEnLCAnNTU1LTA5JywgJzk5OScsICc2NjYnLCAnMTIzJ1xuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYmxvY2tlZFBhdHRlcm5zID0gdGhpcy5zYWZlTmFtZURhdGFiYXNlLmJsb2NrZWRQYXR0ZXJucztcbiAgICAgICAgdGhpcy5zdXNwaWNpb3VzUGF0dGVybnMgPSB0aGlzLnNhZmVOYW1lRGF0YWJhc2Uuc3VzcGljaW91c1BhdHRlcm5zO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUNhbGxlcklEUGF0dGVybnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2VvZ3JhcGhpY1JlZ2lvbnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29kZTogJ1VTJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnVW5pdGVkIFN0YXRlcycsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICcrMScsXG4gICAgICAgICAgICAgICAgbnVtYmVyTGVuZ3RoOiAxMCxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICcoWFhYKSBYWFgtWFhYWCcsXG4gICAgICAgICAgICAgICAgaXNUb2xsRnJlZUF2YWlsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnVUsnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdVbml0ZWQgS2luZ2RvbScsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6ICcrNDQnLFxuICAgICAgICAgICAgICAgIG51bWJlckxlbmd0aDogMTAsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnWFhYWCBYWFhYWFgnLFxuICAgICAgICAgICAgICAgIGlzVG9sbEZyZWVBdmFpbGFibGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29kZTogJ0NBJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ2FuYWRhJyxcbiAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogJysxJyxcbiAgICAgICAgICAgICAgICBudW1iZXJMZW5ndGg6IDEwLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJyhYWFgpIFhYWC1YWFhYJyxcbiAgICAgICAgICAgICAgICBpc1RvbGxGcmVlQXZhaWxhYmxlOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVJhbmRvbUNhbGxlckluZm8oXG4gICAgICAgIGNhbGxlclR5cGU6ICdzYWZlJyB8ICdlbWVyZ2VuY3knIHwgJ2J1c2luZXNzJyB8ICdwZXJzb25hbCcsXG4gICAgICAgIHJlZ2lvbj86IHN0cmluZ1xuICAgICk6IFByb21pc2U8Q2FsbGVySW5mbz4ge1xuICAgICAgICBjb25zdCByZWdpb25EYXRhID0gcmVnaW9uID8gdGhpcy5nZW9ncmFwaGljUmVnaW9ucy5maW5kKHIgPT4gci5jb2RlID09PSByZWdpb24pIDpcbiAgICAgICAgICAgIHRoaXMuZ2VvZ3JhcGhpY1JlZ2lvbnNbMF07XG5cbiAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSB0aGlzLmdlbmVyYXRlUGhvbmVOdW1iZXIocmVnaW9uRGF0YSk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdlbmVyYXRlTmFtZShjYWxsZXJUeXBlKTtcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmdlbmVyYXRlRGlzcGxheU5hbWUobmFtZSwgY2FsbGVyVHlwZSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcbiAgICAgICAgICAgIGNhbGxlclR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbjogcmVnaW9uRGF0YT8ubmFtZSxcbiAgICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdycsXG4gICAgICAgICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgZGlzcGxheU5hbWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlUGhvbmVOdW1iZXIocmVnaW9uPzogR2VvZ3JhcGhpY1JlZ2lvbik6IHN0cmluZyB7XG4gICAgICAgIGlmICghcmVnaW9uKSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IFVTIG51bWJlclxuICAgICAgICAgICAgY29uc3QgYXJlYUNvZGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4MDApICsgMjAwO1xuICAgICAgICAgICAgY29uc3QgZXhjaGFuZ2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4MDApICsgMjAwO1xuICAgICAgICAgICAgY29uc3QgbnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTAwMCkgKyAxMDAwO1xuICAgICAgICAgICAgcmV0dXJuIGAoJHthcmVhQ29kZX0pICR7ZXhjaGFuZ2V9LSR7bnVtYmVyfWA7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHJlZ2lvbi5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdVUyc6XG4gICAgICAgICAgICBjYXNlICdDQSc6XG4gICAgICAgICAgICAgICAgY29uc3QgYXJlYUNvZGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4MDApICsgMjAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4Y2hhbmdlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogODAwKSArIDIwMDtcbiAgICAgICAgICAgICAgICBjb25zdCBudW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5MDAwKSArIDEwMDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAoJHthcmVhQ29kZX0pICR7ZXhjaGFuZ2V9LSR7bnVtYmVyfWA7XG5cbiAgICAgICAgICAgIGNhc2UgJ1VLJzpcbiAgICAgICAgICAgICAgICBjb25zdCB1a0FyZWEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MCkgKyAyMDtcbiAgICAgICAgICAgICAgICBjb25zdCB1a051bWJlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDkwMDAwMDApICsgMTAwMDAwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYDAyMCAke3VrQXJlYX0gJHt1a051bWJlcn1gO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBgKyR7cmVnaW9uLmNvdW50cnlDb2RlfSAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDkwMDAwMDAwMDApICsgMTAwMDAwMDAwMH1gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZU5hbWUoY2FsbGVyVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgeyBmaXJzdE5hbWVzLCBsYXN0TmFtZXMsIGJ1c2luZXNzTmFtZXMgfSA9IHRoaXMuc2FmZU5hbWVEYXRhYmFzZTtcblxuICAgICAgICBzd2l0Y2ggKGNhbGxlclR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2J1c2luZXNzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVzaW5lc3NOYW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBidXNpbmVzc05hbWVzLmxlbmd0aCldO1xuXG4gICAgICAgICAgICBjYXNlICdwZXJzb25hbCc6XG4gICAgICAgICAgICBjYXNlICdzYWZlJzpcbiAgICAgICAgICAgICAgICBjb25zdCBnZW5kZXIgPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gJ21hbGUnIDogJ2ZlbWFsZSc7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3ROYW1lID0gZmlyc3ROYW1lc1tnZW5kZXJdW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZpcnN0TmFtZXNbZ2VuZGVyXS5sZW5ndGgpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9IGxhc3ROYW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsYXN0TmFtZXMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnN0IG5ldXRyYWxGaXJzdCA9IGZpcnN0TmFtZXMubmV1dHJhbFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBmaXJzdE5hbWVzLm5ldXRyYWwubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdCA9IGxhc3ROYW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsYXN0TmFtZXMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke25ldXRyYWxGaXJzdH0gJHtsYXN0fWA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlRGlzcGxheU5hbWUobmFtZTogc3RyaW5nLCBjYWxsZXJUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoY2FsbGVyVHlwZSA9PT0gJ2J1c2luZXNzJykge1xuICAgICAgICAgICAgLy8gQWRkIHRpdGxlIGZvciBidXNpbmVzc1xuICAgICAgICAgICAgY29uc3QgdGl0bGVzID0gWydEci4nLCAnTXIuJywgJ01zLicsICdNcnMuJ107XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHRpdGxlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aXRsZXMubGVuZ3RoKV07XG4gICAgICAgICAgICByZXR1cm4gYCR7dGl0bGV9ICR7bmFtZX1gO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGxlclR5cGUgPT09ICdlbWVyZ2VuY3knKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0VtZXJnZW5jeSBTZXJ2aWNlcyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVDYWxsZXJJbmZvRnJvbUNvbnRhY3QoY29udGFjdDogQ29udGFjdFByb2ZpbGUpOiBDYWxsZXJJbmZvIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBjb250YWN0LmlkLFxuICAgICAgICAgICAgbmFtZTogY29udGFjdC5uYW1lLFxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGNvbnRhY3QucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICBjYWxsZXJUeXBlOiBjb250YWN0LmNhbGxlclR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbjogY29udGFjdC5sb2NhdGlvbixcbiAgICAgICAgICAgIGF2YXRhclVybDogY29udGFjdC5hdmF0YXJVcmwsXG4gICAgICAgICAgICByaXNrTGV2ZWw6ICdsb3cnLFxuICAgICAgICAgICAgaXNWZXJpZmllZDogY29udGFjdC5pc1ZlcmlmaWVkLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGNvbnRhY3QubmFtZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UmFuZG9tQ3VzdG9tQ29udGFjdCh1c2VySWQ6IHN0cmluZyk6IENvbnRhY3RQcm9maWxlIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHVzZXJDb250YWN0cyA9IHRoaXMuY3VzdG9tQ29udGFjdHMuZmlsdGVyKGMgPT4gYy51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgICAgIGlmICh1c2VyQ29udGFjdHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHVzZXJDb250YWN0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB1c2VyQ29udGFjdHMubGVuZ3RoKV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVDYWxsZXJVc2FnZShjYWxsZXJJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVXBkYXRlZCB1c2FnZSBmb3IgY2FsbGVyOiAke2NhbGxlcklkfWApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRpb24gbWV0aG9kc1xuXG4gICAgcHJpdmF0ZSBpc0Jsb2NrZWRQYXR0ZXJuKHBob25lTnVtYmVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tlZFBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwaG9uZU51bWJlci5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1N1c3BpY2lvdXNQYXR0ZXJuKHBob25lTnVtYmVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VzcGljaW91c1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBwaG9uZU51bWJlci5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNTdXNwaWNpb3VzUGF0dGVybihwaG9uZU51bWJlcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN1c3BpY2lvdXNTZXF1ZW5jZXMgPSBbJzEyMycsICc0NTYnLCAnNzg5JywgJzAwMCcsICcxMTEnLCAnMjIyJ107XG4gICAgICAgIHJldHVybiBzdXNwaWNpb3VzU2VxdWVuY2VzLnNvbWUoc2VxID0+IHBob25lTnVtYmVyLmluY2x1ZGVzKHNlcSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNFbWVyZ2VuY3lOdW1iZXIobnVtYmVyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZW1lcmdlbmN5TnVtYmVycyA9IFsnOTExJywgJzExMicsICc5OTknLCAnMDAwJywgJzExMCddO1xuICAgICAgICByZXR1cm4gZW1lcmdlbmN5TnVtYmVycy5pbmNsdWRlcyhudW1iZXIpIHx8XG4gICAgICAgICAgICBlbWVyZ2VuY3lOdW1iZXJzLnNvbWUoZW1lcmdlbmN5ID0+IG51bWJlci5zdGFydHNXaXRoKGVtZXJnZW5jeSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUb2xsRnJlZU51bWJlcihudW1iZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB0b2xsRnJlZVBhdHRlcm5zID0gWyc4MDAnLCAnODg4JywgJzg3NycsICc4NjYnLCAnODU1JywgJzg0NCcsICc4MzMnXTtcbiAgICAgICAgcmV0dXJuIHRvbGxGcmVlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IG51bWJlci5pbmNsdWRlcyhwYXR0ZXJuKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1ZhbGlkUGhvbmVSZWdpb24ocmVnaW9uOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvZ3JhcGhpY1JlZ2lvbnMuc29tZShyID0+IHIuY29kZSA9PT0gcmVnaW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVmFsaWRHZW9ncmFwaGljUmVnaW9uKHJlZ2lvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb2dyYXBoaWNSZWdpb25zLnNvbWUociA9PiByLmNvZGUgPT09IHJlZ2lvbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0VtZXJnZW5jeUFsbG93ZWQoY2FsbGVySW5mbzogQ2FsbGVySW5mbyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY2FsbGVySW5mby5jYWxsZXJUeXBlID09PSAnZW1lcmdlbmN5JyAmJiBjYWxsZXJJbmZvLmlzVmVyaWZpZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZUJ1c2luZXNzTnVtYmVyKHBob25lTnVtYmVyOiBzdHJpbmcpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGlzc3Vlczogc3RyaW5nW10gfSB7XG4gICAgICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBpZiAoIXBob25lTnVtYmVyLm1hdGNoKC9bXFxkXFwtXFwoXFwpXFwrXS8pKSB7XG4gICAgICAgICAgICBpc3N1ZXMucHVzaCgnSW52YWxpZCBidXNpbmVzcyBudW1iZXIgZm9ybWF0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbGVhbmVkID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvW1xcc1xcLVxcKFxcKVxcLl0vZywgJycpO1xuICAgICAgICBpZiAoY2xlYW5lZC5sZW5ndGggPCAxMCB8fCBjbGVhbmVkLmxlbmd0aCA+IDE1KSB7XG4gICAgICAgICAgICBpc3N1ZXMucHVzaCgnQnVzaW5lc3MgbnVtYmVyIGxlbmd0aCBvdXRzaWRlIGV4cGVjdGVkIHJhbmdlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNWYWxpZDogaXNzdWVzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGlzc3Vlc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgdmFsaWRhdGVDYWxsZXJOYW1lKG5hbWU6IHN0cmluZywgZGlzcGxheU5hbWU6IHN0cmluZyk6IHsgaXNWYWxpZDogYm9vbGVhbjsgaXNzdWVzOiBzdHJpbmdbXSB9IHtcbiAgICAgICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGluYXBwcm9wcmlhdGVXb3JkcyA9IFsnc2NhbScsICdzcGFtJywgJ2ZyYXVkJywgJ2Zha2UnXTtcbiAgICAgICAgY29uc3QgbmFtZUxvd2VyID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBkaXNwbGF5TG93ZXIgPSBkaXNwbGF5TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGlmIChpbmFwcHJvcHJpYXRlV29yZHMuc29tZSh3b3JkID0+IG5hbWVMb3dlci5pbmNsdWRlcyh3b3JkKSB8fCBkaXNwbGF5TG93ZXIuaW5jbHVkZXMod29yZCkpKSB7XG4gICAgICAgICAgICBpc3N1ZXMucHVzaCgnTmFtZSBjb250YWlucyBpbmFwcHJvcHJpYXRlIGNvbnRlbnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYW1lLmxlbmd0aCA8IDIgfHwgbmFtZS5sZW5ndGggPiA1MCkge1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goJ05hbWUgbGVuZ3RoIG91dHNpZGUgYWNjZXB0YWJsZSByYW5nZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuYW1lLm1hdGNoKC9eW2EtekEtWlxcc1xcLlxcLSddKyQvKSkge1xuICAgICAgICAgICAgaXNzdWVzLnB1c2goJ05hbWUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNWYWxpZDogaXNzdWVzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGlzc3Vlc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVBbGxDb250YWN0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgZm9yIChjb25zdCBjb250YWN0IG9mIHRoaXMuY3VzdG9tQ29udGFjdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxlckluZm86IENhbGxlckluZm8gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGNvbnRhY3QuaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogY29udGFjdC5uYW1lLFxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBjb250YWN0LnBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgIGNhbGxlclR5cGU6IGNvbnRhY3QuY2FsbGVyVHlwZSxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogY29udGFjdC5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IGNvbnRhY3QuYXZhdGFyVXJsLFxuICAgICAgICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdycsXG4gICAgICAgICAgICAgICAgaXNWZXJpZmllZDogY29udGFjdC5pc1ZlcmlmaWVkLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBjb250YWN0Lm5hbWVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLnZhbGlkYXRlQ2FsbGVySUQoY2FsbGVySW5mbyk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNTYWZlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYENvbnRhY3QgJHtjb250YWN0Lm5hbWV9IGZhaWxlZCB2YWxpZGF0aW9uLCBtYXJrZWQgZm9yIHJldmlld2ApO1xuICAgICAgICAgICAgICAgIGNvbnRhY3QuaXNWZXJpZmllZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcmFnZSBtZXRob2RzXG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRDdXN0b21Db250YWN0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RzID0gYXdhaXQgQXN5bmNTdG9yYWdlLmdldEl0ZW0oJ2N1c3RvbV9jb250YWN0cycpO1xuICAgICAgICAgICAgaWYgKGNvbnRhY3RzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Db250YWN0cyA9IEpTT04ucGFyc2UoY29udGFjdHMpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgTG9hZGVkICR7dGhpcy5jdXN0b21Db250YWN0cy5sZW5ndGh9IGN1c3RvbSBjb250YWN0c2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGN1c3RvbSBjb250YWN0cyBmcm9tIHN0b3JhZ2U6JywgZXJyb3IgYXMgYW55KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUN1c3RvbUNvbnRhY3RzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgQXN5bmNTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbV9jb250YWN0cycsIEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tQ29udGFjdHMpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gc2F2ZSBjdXN0b20gY29udGFjdHMgdG8gc3RvcmFnZTonLCBlcnJvciBhcyBhbnkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkU2FmZXR5UGF0dGVybnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnTG9hZGVkIHNhZmV0eSBwYXR0ZXJucycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFudXAgcmVzb3VyY2VzXG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGRpc3Bvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVDdXN0b21Db250YWN0cygpO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21Db250YWN0cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnQ2FsbGVyIElEIFNlcnZpY2UgZGlzcG9zZWQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZHVyaW5nIENhbGxlciBJRCBTZXJ2aWNlIGRpc3Bvc2FsOicsIGVycm9yIGFzIGFueSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBjYWxsZXJJRFNlcnZpY2UgPSBD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